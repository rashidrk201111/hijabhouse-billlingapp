(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(s){if(s.ep)return;s.ep=!0;const a=n(s);fetch(s.href,a)}})();var pt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function nm(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function rm(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var s=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:function(){return t[r]}})}),n}var Rh={exports:{}},Ca={},Dh={exports:{}},ee={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ks=Symbol.for("react.element"),sm=Symbol.for("react.portal"),im=Symbol.for("react.fragment"),am=Symbol.for("react.strict_mode"),om=Symbol.for("react.profiler"),lm=Symbol.for("react.provider"),um=Symbol.for("react.context"),cm=Symbol.for("react.forward_ref"),dm=Symbol.for("react.suspense"),hm=Symbol.for("react.memo"),fm=Symbol.for("react.lazy"),qc=Symbol.iterator;function pm(t){return t===null||typeof t!="object"?null:(t=qc&&t[qc]||t["@@iterator"],typeof t=="function"?t:null)}var Lh={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Mh=Object.assign,Uh={};function Br(t,e,n){this.props=t,this.context=e,this.refs=Uh,this.updater=n||Lh}Br.prototype.isReactComponent={};Br.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Br.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function zh(){}zh.prototype=Br.prototype;function cu(t,e,n){this.props=t,this.context=e,this.refs=Uh,this.updater=n||Lh}var du=cu.prototype=new zh;du.constructor=cu;Mh(du,Br.prototype);du.isPureReactComponent=!0;var Hc=Array.isArray,Bh=Object.prototype.hasOwnProperty,hu={current:null},Fh={key:!0,ref:!0,__self:!0,__source:!0};function qh(t,e,n){var r,s={},a=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(a=""+e.key),e)Bh.call(e,r)&&!Fh.hasOwnProperty(r)&&(s[r]=e[r]);var l=arguments.length-2;if(l===1)s.children=n;else if(1<l){for(var u=Array(l),c=0;c<l;c++)u[c]=arguments[c+2];s.children=u}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)s[r]===void 0&&(s[r]=l[r]);return{$$typeof:Ks,type:t,key:a,ref:o,props:s,_owner:hu.current}}function mm(t,e){return{$$typeof:Ks,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function fu(t){return typeof t=="object"&&t!==null&&t.$$typeof===Ks}function gm(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Gc=/\/+/g;function ao(t,e){return typeof t=="object"&&t!==null&&t.key!=null?gm(""+t.key):e.toString(36)}function Li(t,e,n,r,s){var a=typeof t;(a==="undefined"||a==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(a){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Ks:case sm:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+ao(o,0):r,Hc(s)?(n="",t!=null&&(n=t.replace(Gc,"$&/")+"/"),Li(s,e,n,"",function(c){return c})):s!=null&&(fu(s)&&(s=mm(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(Gc,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",Hc(t))for(var l=0;l<t.length;l++){a=t[l];var u=r+ao(a,l);o+=Li(a,e,n,u,s)}else if(u=pm(t),typeof u=="function")for(t=u.call(t),l=0;!(a=t.next()).done;)a=a.value,u=r+ao(a,l++),o+=Li(a,e,n,u,s);else if(a==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function di(t,e,n){if(t==null)return t;var r=[],s=0;return Li(t,r,"","",function(a){return e.call(n,a,s++)}),r}function vm(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Fe={current:null},Mi={transition:null},xm={ReactCurrentDispatcher:Fe,ReactCurrentBatchConfig:Mi,ReactCurrentOwner:hu};function Hh(){throw Error("act(...) is not supported in production builds of React.")}ee.Children={map:di,forEach:function(t,e,n){di(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return di(t,function(){e++}),e},toArray:function(t){return di(t,function(e){return e})||[]},only:function(t){if(!fu(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ee.Component=Br;ee.Fragment=im;ee.Profiler=om;ee.PureComponent=cu;ee.StrictMode=am;ee.Suspense=dm;ee.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=xm;ee.act=Hh;ee.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Mh({},t.props),s=t.key,a=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(a=e.ref,o=hu.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(u in e)Bh.call(e,u)&&!Fh.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&l!==void 0?l[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){l=Array(u);for(var c=0;c<u;c++)l[c]=arguments[c+2];r.children=l}return{$$typeof:Ks,type:t.type,key:s,ref:a,props:r,_owner:o}};ee.createContext=function(t){return t={$$typeof:um,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:lm,_context:t},t.Consumer=t};ee.createElement=qh;ee.createFactory=function(t){var e=qh.bind(null,t);return e.type=t,e};ee.createRef=function(){return{current:null}};ee.forwardRef=function(t){return{$$typeof:cm,render:t}};ee.isValidElement=fu;ee.lazy=function(t){return{$$typeof:fm,_payload:{_status:-1,_result:t},_init:vm}};ee.memo=function(t,e){return{$$typeof:hm,type:t,compare:e===void 0?null:e}};ee.startTransition=function(t){var e=Mi.transition;Mi.transition={};try{t()}finally{Mi.transition=e}};ee.unstable_act=Hh;ee.useCallback=function(t,e){return Fe.current.useCallback(t,e)};ee.useContext=function(t){return Fe.current.useContext(t)};ee.useDebugValue=function(){};ee.useDeferredValue=function(t){return Fe.current.useDeferredValue(t)};ee.useEffect=function(t,e){return Fe.current.useEffect(t,e)};ee.useId=function(){return Fe.current.useId()};ee.useImperativeHandle=function(t,e,n){return Fe.current.useImperativeHandle(t,e,n)};ee.useInsertionEffect=function(t,e){return Fe.current.useInsertionEffect(t,e)};ee.useLayoutEffect=function(t,e){return Fe.current.useLayoutEffect(t,e)};ee.useMemo=function(t,e){return Fe.current.useMemo(t,e)};ee.useReducer=function(t,e,n){return Fe.current.useReducer(t,e,n)};ee.useRef=function(t){return Fe.current.useRef(t)};ee.useState=function(t){return Fe.current.useState(t)};ee.useSyncExternalStore=function(t,e,n){return Fe.current.useSyncExternalStore(t,e,n)};ee.useTransition=function(){return Fe.current.useTransition()};ee.version="18.3.1";Dh.exports=ee;var j=Dh.exports;/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ym=j,wm=Symbol.for("react.element"),bm=Symbol.for("react.fragment"),_m=Object.prototype.hasOwnProperty,jm=ym.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,km={key:!0,ref:!0,__self:!0,__source:!0};function Gh(t,e,n){var r,s={},a=null,o=null;n!==void 0&&(a=""+n),e.key!==void 0&&(a=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)_m.call(e,r)&&!km.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:wm,type:t,key:a,ref:o,props:s,_owner:jm.current}}Ca.Fragment=bm;Ca.jsx=Gh;Ca.jsxs=Gh;Rh.exports=Ca;var i=Rh.exports,Vh={exports:{}},at={},Wh={exports:{}},Kh={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(P,B){var H=P.length;P.push(B);e:for(;0<H;){var te=H-1>>>1,le=P[te];if(0<s(le,B))P[te]=B,P[H]=le,H=te;else break e}}function n(P){return P.length===0?null:P[0]}function r(P){if(P.length===0)return null;var B=P[0],H=P.pop();if(H!==B){P[0]=H;e:for(var te=0,le=P.length,Ot=le>>>1;te<Ot;){var yt=2*(te+1)-1,Zt=P[yt],lt=yt+1,Lt=P[lt];if(0>s(Zt,H))lt<le&&0>s(Lt,Zt)?(P[te]=Lt,P[lt]=H,te=lt):(P[te]=Zt,P[yt]=H,te=yt);else if(lt<le&&0>s(Lt,H))P[te]=Lt,P[lt]=H,te=lt;else break e}}return B}function s(P,B){var H=P.sortIndex-B.sortIndex;return H!==0?H:P.id-B.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var u=[],c=[],h=1,d=null,p=3,v=!1,x=!1,b=!1,k=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,m=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function f(P){for(var B=n(c);B!==null;){if(B.callback===null)r(c);else if(B.startTime<=P)r(c),B.sortIndex=B.expirationTime,e(u,B);else break;B=n(c)}}function y(P){if(b=!1,f(P),!x)if(n(u)!==null)x=!0,F(_);else{var B=n(c);B!==null&&he(y,B.startTime-P)}}function _(P,B){x=!1,b&&(b=!1,g(I),I=-1),v=!0;var H=p;try{for(f(B),d=n(u);d!==null&&(!(d.expirationTime>B)||P&&!U());){var te=d.callback;if(typeof te=="function"){d.callback=null,p=d.priorityLevel;var le=te(d.expirationTime<=B);B=t.unstable_now(),typeof le=="function"?d.callback=le:d===n(u)&&r(u),f(B)}else r(u);d=n(u)}if(d!==null)var Ot=!0;else{var yt=n(c);yt!==null&&he(y,yt.startTime-B),Ot=!1}return Ot}finally{d=null,p=H,v=!1}}var w=!1,N=null,I=-1,E=5,R=-1;function U(){return!(t.unstable_now()-R<E)}function se(){if(N!==null){var P=t.unstable_now();R=P;var B=!0;try{B=N(!0,P)}finally{B?K():(w=!1,N=null)}}else w=!1}var K;if(typeof m=="function")K=function(){m(se)};else if(typeof MessageChannel<"u"){var S=new MessageChannel,$=S.port2;S.port1.onmessage=se,K=function(){$.postMessage(null)}}else K=function(){k(se,0)};function F(P){N=P,w||(w=!0,K())}function he(P,B){I=k(function(){P(t.unstable_now())},B)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(P){P.callback=null},t.unstable_continueExecution=function(){x||v||(x=!0,F(_))},t.unstable_forceFrameRate=function(P){0>P||125<P?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<P?Math.floor(1e3/P):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(P){switch(p){case 1:case 2:case 3:var B=3;break;default:B=p}var H=p;p=B;try{return P()}finally{p=H}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(P,B){switch(P){case 1:case 2:case 3:case 4:case 5:break;default:P=3}var H=p;p=P;try{return B()}finally{p=H}},t.unstable_scheduleCallback=function(P,B,H){var te=t.unstable_now();switch(typeof H=="object"&&H!==null?(H=H.delay,H=typeof H=="number"&&0<H?te+H:te):H=te,P){case 1:var le=-1;break;case 2:le=250;break;case 5:le=1073741823;break;case 4:le=1e4;break;default:le=5e3}return le=H+le,P={id:h++,callback:B,priorityLevel:P,startTime:H,expirationTime:le,sortIndex:-1},H>te?(P.sortIndex=H,e(c,P),n(u)===null&&P===n(c)&&(b?(g(I),I=-1):b=!0,he(y,H-te))):(P.sortIndex=le,e(u,P),x||v||(x=!0,F(_))),P},t.unstable_shouldYield=U,t.unstable_wrapCallback=function(P){var B=p;return function(){var H=p;p=B;try{return P.apply(this,arguments)}finally{p=H}}}})(Kh);Wh.exports=Kh;var Nm=Wh.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Sm=j,it=Nm;function A(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Qh=new Set,Os={};function Wn(t,e){Tr(t,e),Tr(t+"Capture",e)}function Tr(t,e){for(Os[t]=e,t=0;t<e.length;t++)Qh.add(e[t])}var Wt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ko=Object.prototype.hasOwnProperty,Em=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Vc={},Wc={};function Cm(t){return Ko.call(Wc,t)?!0:Ko.call(Vc,t)?!1:Em.test(t)?Wc[t]=!0:(Vc[t]=!0,!1)}function Om(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Pm(t,e,n,r){if(e===null||typeof e>"u"||Om(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function qe(t,e,n,r,s,a,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=a,this.removeEmptyString=o}var Ae={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Ae[t]=new qe(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Ae[e]=new qe(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Ae[t]=new qe(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Ae[t]=new qe(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Ae[t]=new qe(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Ae[t]=new qe(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Ae[t]=new qe(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Ae[t]=new qe(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Ae[t]=new qe(t,5,!1,t.toLowerCase(),null,!1,!1)});var pu=/[\-:]([a-z])/g;function mu(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(pu,mu);Ae[e]=new qe(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(pu,mu);Ae[e]=new qe(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(pu,mu);Ae[e]=new qe(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Ae[t]=new qe(t,1,!1,t.toLowerCase(),null,!1,!1)});Ae.xlinkHref=new qe("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Ae[t]=new qe(t,1,!1,t.toLowerCase(),null,!0,!0)});function gu(t,e,n,r){var s=Ae.hasOwnProperty(e)?Ae[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Pm(e,n,s,r)&&(n=null),r||s===null?Cm(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Yt=Sm.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,hi=Symbol.for("react.element"),fr=Symbol.for("react.portal"),pr=Symbol.for("react.fragment"),vu=Symbol.for("react.strict_mode"),Qo=Symbol.for("react.profiler"),Xh=Symbol.for("react.provider"),Jh=Symbol.for("react.context"),xu=Symbol.for("react.forward_ref"),Xo=Symbol.for("react.suspense"),Jo=Symbol.for("react.suspense_list"),yu=Symbol.for("react.memo"),rn=Symbol.for("react.lazy"),Yh=Symbol.for("react.offscreen"),Kc=Symbol.iterator;function Jr(t){return t===null||typeof t!="object"?null:(t=Kc&&t[Kc]||t["@@iterator"],typeof t=="function"?t:null)}var ye=Object.assign,oo;function us(t){if(oo===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);oo=e&&e[1]||""}return`
`+oo+t}var lo=!1;function uo(t,e){if(!t||lo)return"";lo=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var s=c.stack.split(`
`),a=r.stack.split(`
`),o=s.length-1,l=a.length-1;1<=o&&0<=l&&s[o]!==a[l];)l--;for(;1<=o&&0<=l;o--,l--)if(s[o]!==a[l]){if(o!==1||l!==1)do if(o--,l--,0>l||s[o]!==a[l]){var u=`
`+s[o].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=o&&0<=l);break}}}finally{lo=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?us(t):""}function Tm(t){switch(t.tag){case 5:return us(t.type);case 16:return us("Lazy");case 13:return us("Suspense");case 19:return us("SuspenseList");case 0:case 2:case 15:return t=uo(t.type,!1),t;case 11:return t=uo(t.type.render,!1),t;case 1:return t=uo(t.type,!0),t;default:return""}}function Yo(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case pr:return"Fragment";case fr:return"Portal";case Qo:return"Profiler";case vu:return"StrictMode";case Xo:return"Suspense";case Jo:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Jh:return(t.displayName||"Context")+".Consumer";case Xh:return(t._context.displayName||"Context")+".Provider";case xu:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case yu:return e=t.displayName||null,e!==null?e:Yo(t.type)||"Memo";case rn:e=t._payload,t=t._init;try{return Yo(t(e))}catch{}}return null}function $m(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Yo(e);case 8:return e===vu?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function wn(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Zh(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Am(t){var e=Zh(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,a=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,a.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function fi(t){t._valueTracker||(t._valueTracker=Am(t))}function ef(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Zh(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Xi(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Zo(t,e){var n=e.checked;return ye({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Qc(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=wn(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function tf(t,e){e=e.checked,e!=null&&gu(t,"checked",e,!1)}function el(t,e){tf(t,e);var n=wn(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?tl(t,e.type,n):e.hasOwnProperty("defaultValue")&&tl(t,e.type,wn(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Xc(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function tl(t,e,n){(e!=="number"||Xi(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var cs=Array.isArray;function Nr(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+wn(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function nl(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(A(91));return ye({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Jc(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(A(92));if(cs(n)){if(1<n.length)throw Error(A(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:wn(n)}}function nf(t,e){var n=wn(e.value),r=wn(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Yc(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function rf(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function rl(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?rf(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var pi,sf=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(pi=pi||document.createElement("div"),pi.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=pi.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Ps(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var ms={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Im=["Webkit","ms","Moz","O"];Object.keys(ms).forEach(function(t){Im.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),ms[e]=ms[t]})});function af(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||ms.hasOwnProperty(t)&&ms[t]?(""+e).trim():e+"px"}function of(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=af(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var Rm=ye({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function sl(t,e){if(e){if(Rm[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(A(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(A(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(A(61))}if(e.style!=null&&typeof e.style!="object")throw Error(A(62))}}function il(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var al=null;function wu(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var ol=null,Sr=null,Er=null;function Zc(t){if(t=Js(t)){if(typeof ol!="function")throw Error(A(280));var e=t.stateNode;e&&(e=Aa(e),ol(t.stateNode,t.type,e))}}function lf(t){Sr?Er?Er.push(t):Er=[t]:Sr=t}function uf(){if(Sr){var t=Sr,e=Er;if(Er=Sr=null,Zc(t),e)for(t=0;t<e.length;t++)Zc(e[t])}}function cf(t,e){return t(e)}function df(){}var co=!1;function hf(t,e,n){if(co)return t(e,n);co=!0;try{return cf(t,e,n)}finally{co=!1,(Sr!==null||Er!==null)&&(df(),uf())}}function Ts(t,e){var n=t.stateNode;if(n===null)return null;var r=Aa(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(A(231,e,typeof n));return n}var ll=!1;if(Wt)try{var Yr={};Object.defineProperty(Yr,"passive",{get:function(){ll=!0}}),window.addEventListener("test",Yr,Yr),window.removeEventListener("test",Yr,Yr)}catch{ll=!1}function Dm(t,e,n,r,s,a,o,l,u){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(h){this.onError(h)}}var gs=!1,Ji=null,Yi=!1,ul=null,Lm={onError:function(t){gs=!0,Ji=t}};function Mm(t,e,n,r,s,a,o,l,u){gs=!1,Ji=null,Dm.apply(Lm,arguments)}function Um(t,e,n,r,s,a,o,l,u){if(Mm.apply(this,arguments),gs){if(gs){var c=Ji;gs=!1,Ji=null}else throw Error(A(198));Yi||(Yi=!0,ul=c)}}function Kn(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function ff(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function ed(t){if(Kn(t)!==t)throw Error(A(188))}function zm(t){var e=t.alternate;if(!e){if(e=Kn(t),e===null)throw Error(A(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var a=s.alternate;if(a===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===a.child){for(a=s.child;a;){if(a===n)return ed(s),t;if(a===r)return ed(s),e;a=a.sibling}throw Error(A(188))}if(n.return!==r.return)n=s,r=a;else{for(var o=!1,l=s.child;l;){if(l===n){o=!0,n=s,r=a;break}if(l===r){o=!0,r=s,n=a;break}l=l.sibling}if(!o){for(l=a.child;l;){if(l===n){o=!0,n=a,r=s;break}if(l===r){o=!0,r=a,n=s;break}l=l.sibling}if(!o)throw Error(A(189))}}if(n.alternate!==r)throw Error(A(190))}if(n.tag!==3)throw Error(A(188));return n.stateNode.current===n?t:e}function pf(t){return t=zm(t),t!==null?mf(t):null}function mf(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=mf(t);if(e!==null)return e;t=t.sibling}return null}var gf=it.unstable_scheduleCallback,td=it.unstable_cancelCallback,Bm=it.unstable_shouldYield,Fm=it.unstable_requestPaint,be=it.unstable_now,qm=it.unstable_getCurrentPriorityLevel,bu=it.unstable_ImmediatePriority,vf=it.unstable_UserBlockingPriority,Zi=it.unstable_NormalPriority,Hm=it.unstable_LowPriority,xf=it.unstable_IdlePriority,Oa=null,Rt=null;function Gm(t){if(Rt&&typeof Rt.onCommitFiberRoot=="function")try{Rt.onCommitFiberRoot(Oa,t,void 0,(t.current.flags&128)===128)}catch{}}var St=Math.clz32?Math.clz32:Km,Vm=Math.log,Wm=Math.LN2;function Km(t){return t>>>=0,t===0?32:31-(Vm(t)/Wm|0)|0}var mi=64,gi=4194304;function ds(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function ea(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,a=t.pingedLanes,o=n&268435455;if(o!==0){var l=o&~s;l!==0?r=ds(l):(a&=o,a!==0&&(r=ds(a)))}else o=n&~s,o!==0?r=ds(o):a!==0&&(r=ds(a));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,a=e&-e,s>=a||s===16&&(a&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-St(e),s=1<<n,r|=t[n],e&=~s;return r}function Qm(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Xm(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,a=t.pendingLanes;0<a;){var o=31-St(a),l=1<<o,u=s[o];u===-1?(!(l&n)||l&r)&&(s[o]=Qm(l,e)):u<=e&&(t.expiredLanes|=l),a&=~l}}function cl(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function yf(){var t=mi;return mi<<=1,!(mi&4194240)&&(mi=64),t}function ho(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Qs(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-St(e),t[e]=n}function Jm(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-St(n),a=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~a}}function _u(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-St(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var ie=0;function wf(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var bf,ju,_f,jf,kf,dl=!1,vi=[],dn=null,hn=null,fn=null,$s=new Map,As=new Map,an=[],Ym="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function nd(t,e){switch(t){case"focusin":case"focusout":dn=null;break;case"dragenter":case"dragleave":hn=null;break;case"mouseover":case"mouseout":fn=null;break;case"pointerover":case"pointerout":$s.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":As.delete(e.pointerId)}}function Zr(t,e,n,r,s,a){return t===null||t.nativeEvent!==a?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[s]},e!==null&&(e=Js(e),e!==null&&ju(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function Zm(t,e,n,r,s){switch(e){case"focusin":return dn=Zr(dn,t,e,n,r,s),!0;case"dragenter":return hn=Zr(hn,t,e,n,r,s),!0;case"mouseover":return fn=Zr(fn,t,e,n,r,s),!0;case"pointerover":var a=s.pointerId;return $s.set(a,Zr($s.get(a)||null,t,e,n,r,s)),!0;case"gotpointercapture":return a=s.pointerId,As.set(a,Zr(As.get(a)||null,t,e,n,r,s)),!0}return!1}function Nf(t){var e=Dn(t.target);if(e!==null){var n=Kn(e);if(n!==null){if(e=n.tag,e===13){if(e=ff(n),e!==null){t.blockedOn=e,kf(t.priority,function(){_f(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Ui(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=hl(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);al=r,n.target.dispatchEvent(r),al=null}else return e=Js(n),e!==null&&ju(e),t.blockedOn=n,!1;e.shift()}return!0}function rd(t,e,n){Ui(t)&&n.delete(e)}function eg(){dl=!1,dn!==null&&Ui(dn)&&(dn=null),hn!==null&&Ui(hn)&&(hn=null),fn!==null&&Ui(fn)&&(fn=null),$s.forEach(rd),As.forEach(rd)}function es(t,e){t.blockedOn===e&&(t.blockedOn=null,dl||(dl=!0,it.unstable_scheduleCallback(it.unstable_NormalPriority,eg)))}function Is(t){function e(s){return es(s,t)}if(0<vi.length){es(vi[0],t);for(var n=1;n<vi.length;n++){var r=vi[n];r.blockedOn===t&&(r.blockedOn=null)}}for(dn!==null&&es(dn,t),hn!==null&&es(hn,t),fn!==null&&es(fn,t),$s.forEach(e),As.forEach(e),n=0;n<an.length;n++)r=an[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<an.length&&(n=an[0],n.blockedOn===null);)Nf(n),n.blockedOn===null&&an.shift()}var Cr=Yt.ReactCurrentBatchConfig,ta=!0;function tg(t,e,n,r){var s=ie,a=Cr.transition;Cr.transition=null;try{ie=1,ku(t,e,n,r)}finally{ie=s,Cr.transition=a}}function ng(t,e,n,r){var s=ie,a=Cr.transition;Cr.transition=null;try{ie=4,ku(t,e,n,r)}finally{ie=s,Cr.transition=a}}function ku(t,e,n,r){if(ta){var s=hl(t,e,n,r);if(s===null)_o(t,e,r,na,n),nd(t,r);else if(Zm(s,t,e,n,r))r.stopPropagation();else if(nd(t,r),e&4&&-1<Ym.indexOf(t)){for(;s!==null;){var a=Js(s);if(a!==null&&bf(a),a=hl(t,e,n,r),a===null&&_o(t,e,r,na,n),a===s)break;s=a}s!==null&&r.stopPropagation()}else _o(t,e,r,null,n)}}var na=null;function hl(t,e,n,r){if(na=null,t=wu(r),t=Dn(t),t!==null)if(e=Kn(t),e===null)t=null;else if(n=e.tag,n===13){if(t=ff(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return na=t,null}function Sf(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(qm()){case bu:return 1;case vf:return 4;case Zi:case Hm:return 16;case xf:return 536870912;default:return 16}default:return 16}}var un=null,Nu=null,zi=null;function Ef(){if(zi)return zi;var t,e=Nu,n=e.length,r,s="value"in un?un.value:un.textContent,a=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[a-r];r++);return zi=s.slice(t,1<r?1-r:void 0)}function Bi(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function xi(){return!0}function sd(){return!1}function ot(t){function e(n,r,s,a,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=a,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(a):a[l]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?xi:sd,this.isPropagationStopped=sd,this}return ye(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=xi)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=xi)},persist:function(){},isPersistent:xi}),e}var Fr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Su=ot(Fr),Xs=ye({},Fr,{view:0,detail:0}),rg=ot(Xs),fo,po,ts,Pa=ye({},Xs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Eu,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ts&&(ts&&t.type==="mousemove"?(fo=t.screenX-ts.screenX,po=t.screenY-ts.screenY):po=fo=0,ts=t),fo)},movementY:function(t){return"movementY"in t?t.movementY:po}}),id=ot(Pa),sg=ye({},Pa,{dataTransfer:0}),ig=ot(sg),ag=ye({},Xs,{relatedTarget:0}),mo=ot(ag),og=ye({},Fr,{animationName:0,elapsedTime:0,pseudoElement:0}),lg=ot(og),ug=ye({},Fr,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),cg=ot(ug),dg=ye({},Fr,{data:0}),ad=ot(dg),hg={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},fg={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},pg={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function mg(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=pg[t])?!!e[t]:!1}function Eu(){return mg}var gg=ye({},Xs,{key:function(t){if(t.key){var e=hg[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Bi(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?fg[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Eu,charCode:function(t){return t.type==="keypress"?Bi(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Bi(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),vg=ot(gg),xg=ye({},Pa,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),od=ot(xg),yg=ye({},Xs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Eu}),wg=ot(yg),bg=ye({},Fr,{propertyName:0,elapsedTime:0,pseudoElement:0}),_g=ot(bg),jg=ye({},Pa,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),kg=ot(jg),Ng=[9,13,27,32],Cu=Wt&&"CompositionEvent"in window,vs=null;Wt&&"documentMode"in document&&(vs=document.documentMode);var Sg=Wt&&"TextEvent"in window&&!vs,Cf=Wt&&(!Cu||vs&&8<vs&&11>=vs),ld=" ",ud=!1;function Of(t,e){switch(t){case"keyup":return Ng.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Pf(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var mr=!1;function Eg(t,e){switch(t){case"compositionend":return Pf(e);case"keypress":return e.which!==32?null:(ud=!0,ld);case"textInput":return t=e.data,t===ld&&ud?null:t;default:return null}}function Cg(t,e){if(mr)return t==="compositionend"||!Cu&&Of(t,e)?(t=Ef(),zi=Nu=un=null,mr=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Cf&&e.locale!=="ko"?null:e.data;default:return null}}var Og={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function cd(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Og[t.type]:e==="textarea"}function Tf(t,e,n,r){lf(r),e=ra(e,"onChange"),0<e.length&&(n=new Su("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var xs=null,Rs=null;function Pg(t){Ff(t,0)}function Ta(t){var e=xr(t);if(ef(e))return t}function Tg(t,e){if(t==="change")return e}var $f=!1;if(Wt){var go;if(Wt){var vo="oninput"in document;if(!vo){var dd=document.createElement("div");dd.setAttribute("oninput","return;"),vo=typeof dd.oninput=="function"}go=vo}else go=!1;$f=go&&(!document.documentMode||9<document.documentMode)}function hd(){xs&&(xs.detachEvent("onpropertychange",Af),Rs=xs=null)}function Af(t){if(t.propertyName==="value"&&Ta(Rs)){var e=[];Tf(e,Rs,t,wu(t)),hf(Pg,e)}}function $g(t,e,n){t==="focusin"?(hd(),xs=e,Rs=n,xs.attachEvent("onpropertychange",Af)):t==="focusout"&&hd()}function Ag(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Ta(Rs)}function Ig(t,e){if(t==="click")return Ta(e)}function Rg(t,e){if(t==="input"||t==="change")return Ta(e)}function Dg(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Ct=typeof Object.is=="function"?Object.is:Dg;function Ds(t,e){if(Ct(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Ko.call(e,s)||!Ct(t[s],e[s]))return!1}return!0}function fd(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function pd(t,e){var n=fd(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=fd(n)}}function If(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?If(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Rf(){for(var t=window,e=Xi();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Xi(t.document)}return e}function Ou(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Lg(t){var e=Rf(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&If(n.ownerDocument.documentElement,n)){if(r!==null&&Ou(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,a=Math.min(r.start,s);r=r.end===void 0?a:Math.min(r.end,s),!t.extend&&a>r&&(s=r,r=a,a=s),s=pd(n,a);var o=pd(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),a>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Mg=Wt&&"documentMode"in document&&11>=document.documentMode,gr=null,fl=null,ys=null,pl=!1;function md(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;pl||gr==null||gr!==Xi(r)||(r=gr,"selectionStart"in r&&Ou(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),ys&&Ds(ys,r)||(ys=r,r=ra(fl,"onSelect"),0<r.length&&(e=new Su("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=gr)))}function yi(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var vr={animationend:yi("Animation","AnimationEnd"),animationiteration:yi("Animation","AnimationIteration"),animationstart:yi("Animation","AnimationStart"),transitionend:yi("Transition","TransitionEnd")},xo={},Df={};Wt&&(Df=document.createElement("div").style,"AnimationEvent"in window||(delete vr.animationend.animation,delete vr.animationiteration.animation,delete vr.animationstart.animation),"TransitionEvent"in window||delete vr.transitionend.transition);function $a(t){if(xo[t])return xo[t];if(!vr[t])return t;var e=vr[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Df)return xo[t]=e[n];return t}var Lf=$a("animationend"),Mf=$a("animationiteration"),Uf=$a("animationstart"),zf=$a("transitionend"),Bf=new Map,gd="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function kn(t,e){Bf.set(t,e),Wn(e,[t])}for(var yo=0;yo<gd.length;yo++){var wo=gd[yo],Ug=wo.toLowerCase(),zg=wo[0].toUpperCase()+wo.slice(1);kn(Ug,"on"+zg)}kn(Lf,"onAnimationEnd");kn(Mf,"onAnimationIteration");kn(Uf,"onAnimationStart");kn("dblclick","onDoubleClick");kn("focusin","onFocus");kn("focusout","onBlur");kn(zf,"onTransitionEnd");Tr("onMouseEnter",["mouseout","mouseover"]);Tr("onMouseLeave",["mouseout","mouseover"]);Tr("onPointerEnter",["pointerout","pointerover"]);Tr("onPointerLeave",["pointerout","pointerover"]);Wn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Wn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Wn("onBeforeInput",["compositionend","keypress","textInput","paste"]);Wn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Wn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Wn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var hs="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Bg=new Set("cancel close invalid load scroll toggle".split(" ").concat(hs));function vd(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,Um(r,e,void 0,t),t.currentTarget=null}function Ff(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var a=void 0;if(e)for(var o=r.length-1;0<=o;o--){var l=r[o],u=l.instance,c=l.currentTarget;if(l=l.listener,u!==a&&s.isPropagationStopped())break e;vd(s,l,c),a=u}else for(o=0;o<r.length;o++){if(l=r[o],u=l.instance,c=l.currentTarget,l=l.listener,u!==a&&s.isPropagationStopped())break e;vd(s,l,c),a=u}}}if(Yi)throw t=ul,Yi=!1,ul=null,t}function ue(t,e){var n=e[yl];n===void 0&&(n=e[yl]=new Set);var r=t+"__bubble";n.has(r)||(qf(e,t,2,!1),n.add(r))}function bo(t,e,n){var r=0;e&&(r|=4),qf(n,t,r,e)}var wi="_reactListening"+Math.random().toString(36).slice(2);function Ls(t){if(!t[wi]){t[wi]=!0,Qh.forEach(function(n){n!=="selectionchange"&&(Bg.has(n)||bo(n,!1,t),bo(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[wi]||(e[wi]=!0,bo("selectionchange",!1,e))}}function qf(t,e,n,r){switch(Sf(e)){case 1:var s=tg;break;case 4:s=ng;break;default:s=ku}n=s.bind(null,e,n,t),s=void 0,!ll||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function _o(t,e,n,r,s){var a=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===s||u.nodeType===8&&u.parentNode===s))return;o=o.return}for(;l!==null;){if(o=Dn(l),o===null)return;if(u=o.tag,u===5||u===6){r=a=o;continue e}l=l.parentNode}}r=r.return}hf(function(){var c=a,h=wu(n),d=[];e:{var p=Bf.get(t);if(p!==void 0){var v=Su,x=t;switch(t){case"keypress":if(Bi(n)===0)break e;case"keydown":case"keyup":v=vg;break;case"focusin":x="focus",v=mo;break;case"focusout":x="blur",v=mo;break;case"beforeblur":case"afterblur":v=mo;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":v=id;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":v=ig;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":v=wg;break;case Lf:case Mf:case Uf:v=lg;break;case zf:v=_g;break;case"scroll":v=rg;break;case"wheel":v=kg;break;case"copy":case"cut":case"paste":v=cg;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":v=od}var b=(e&4)!==0,k=!b&&t==="scroll",g=b?p!==null?p+"Capture":null:p;b=[];for(var m=c,f;m!==null;){f=m;var y=f.stateNode;if(f.tag===5&&y!==null&&(f=y,g!==null&&(y=Ts(m,g),y!=null&&b.push(Ms(m,y,f)))),k)break;m=m.return}0<b.length&&(p=new v(p,x,null,n,h),d.push({event:p,listeners:b}))}}if(!(e&7)){e:{if(p=t==="mouseover"||t==="pointerover",v=t==="mouseout"||t==="pointerout",p&&n!==al&&(x=n.relatedTarget||n.fromElement)&&(Dn(x)||x[Kt]))break e;if((v||p)&&(p=h.window===h?h:(p=h.ownerDocument)?p.defaultView||p.parentWindow:window,v?(x=n.relatedTarget||n.toElement,v=c,x=x?Dn(x):null,x!==null&&(k=Kn(x),x!==k||x.tag!==5&&x.tag!==6)&&(x=null)):(v=null,x=c),v!==x)){if(b=id,y="onMouseLeave",g="onMouseEnter",m="mouse",(t==="pointerout"||t==="pointerover")&&(b=od,y="onPointerLeave",g="onPointerEnter",m="pointer"),k=v==null?p:xr(v),f=x==null?p:xr(x),p=new b(y,m+"leave",v,n,h),p.target=k,p.relatedTarget=f,y=null,Dn(h)===c&&(b=new b(g,m+"enter",x,n,h),b.target=f,b.relatedTarget=k,y=b),k=y,v&&x)t:{for(b=v,g=x,m=0,f=b;f;f=tr(f))m++;for(f=0,y=g;y;y=tr(y))f++;for(;0<m-f;)b=tr(b),m--;for(;0<f-m;)g=tr(g),f--;for(;m--;){if(b===g||g!==null&&b===g.alternate)break t;b=tr(b),g=tr(g)}b=null}else b=null;v!==null&&xd(d,p,v,b,!1),x!==null&&k!==null&&xd(d,k,x,b,!0)}}e:{if(p=c?xr(c):window,v=p.nodeName&&p.nodeName.toLowerCase(),v==="select"||v==="input"&&p.type==="file")var _=Tg;else if(cd(p))if($f)_=Rg;else{_=Ag;var w=$g}else(v=p.nodeName)&&v.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(_=Ig);if(_&&(_=_(t,c))){Tf(d,_,n,h);break e}w&&w(t,p,c),t==="focusout"&&(w=p._wrapperState)&&w.controlled&&p.type==="number"&&tl(p,"number",p.value)}switch(w=c?xr(c):window,t){case"focusin":(cd(w)||w.contentEditable==="true")&&(gr=w,fl=c,ys=null);break;case"focusout":ys=fl=gr=null;break;case"mousedown":pl=!0;break;case"contextmenu":case"mouseup":case"dragend":pl=!1,md(d,n,h);break;case"selectionchange":if(Mg)break;case"keydown":case"keyup":md(d,n,h)}var N;if(Cu)e:{switch(t){case"compositionstart":var I="onCompositionStart";break e;case"compositionend":I="onCompositionEnd";break e;case"compositionupdate":I="onCompositionUpdate";break e}I=void 0}else mr?Of(t,n)&&(I="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(I="onCompositionStart");I&&(Cf&&n.locale!=="ko"&&(mr||I!=="onCompositionStart"?I==="onCompositionEnd"&&mr&&(N=Ef()):(un=h,Nu="value"in un?un.value:un.textContent,mr=!0)),w=ra(c,I),0<w.length&&(I=new ad(I,t,null,n,h),d.push({event:I,listeners:w}),N?I.data=N:(N=Pf(n),N!==null&&(I.data=N)))),(N=Sg?Eg(t,n):Cg(t,n))&&(c=ra(c,"onBeforeInput"),0<c.length&&(h=new ad("onBeforeInput","beforeinput",null,n,h),d.push({event:h,listeners:c}),h.data=N))}Ff(d,e)})}function Ms(t,e,n){return{instance:t,listener:e,currentTarget:n}}function ra(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,a=s.stateNode;s.tag===5&&a!==null&&(s=a,a=Ts(t,n),a!=null&&r.unshift(Ms(t,a,s)),a=Ts(t,e),a!=null&&r.push(Ms(t,a,s))),t=t.return}return r}function tr(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function xd(t,e,n,r,s){for(var a=e._reactName,o=[];n!==null&&n!==r;){var l=n,u=l.alternate,c=l.stateNode;if(u!==null&&u===r)break;l.tag===5&&c!==null&&(l=c,s?(u=Ts(n,a),u!=null&&o.unshift(Ms(n,u,l))):s||(u=Ts(n,a),u!=null&&o.push(Ms(n,u,l)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var Fg=/\r\n?/g,qg=/\u0000|\uFFFD/g;function yd(t){return(typeof t=="string"?t:""+t).replace(Fg,`
`).replace(qg,"")}function bi(t,e,n){if(e=yd(e),yd(t)!==e&&n)throw Error(A(425))}function sa(){}var ml=null,gl=null;function vl(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var xl=typeof setTimeout=="function"?setTimeout:void 0,Hg=typeof clearTimeout=="function"?clearTimeout:void 0,wd=typeof Promise=="function"?Promise:void 0,Gg=typeof queueMicrotask=="function"?queueMicrotask:typeof wd<"u"?function(t){return wd.resolve(null).then(t).catch(Vg)}:xl;function Vg(t){setTimeout(function(){throw t})}function jo(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),Is(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Is(e)}function pn(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function bd(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var qr=Math.random().toString(36).slice(2),At="__reactFiber$"+qr,Us="__reactProps$"+qr,Kt="__reactContainer$"+qr,yl="__reactEvents$"+qr,Wg="__reactListeners$"+qr,Kg="__reactHandles$"+qr;function Dn(t){var e=t[At];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Kt]||n[At]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=bd(t);t!==null;){if(n=t[At])return n;t=bd(t)}return e}t=n,n=t.parentNode}return null}function Js(t){return t=t[At]||t[Kt],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function xr(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(A(33))}function Aa(t){return t[Us]||null}var wl=[],yr=-1;function Nn(t){return{current:t}}function ce(t){0>yr||(t.current=wl[yr],wl[yr]=null,yr--)}function oe(t,e){yr++,wl[yr]=t.current,t.current=e}var bn={},Me=Nn(bn),Xe=Nn(!1),Fn=bn;function $r(t,e){var n=t.type.contextTypes;if(!n)return bn;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},a;for(a in n)s[a]=e[a];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Je(t){return t=t.childContextTypes,t!=null}function ia(){ce(Xe),ce(Me)}function _d(t,e,n){if(Me.current!==bn)throw Error(A(168));oe(Me,e),oe(Xe,n)}function Hf(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(A(108,$m(t)||"Unknown",s));return ye({},n,r)}function aa(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||bn,Fn=Me.current,oe(Me,t),oe(Xe,Xe.current),!0}function jd(t,e,n){var r=t.stateNode;if(!r)throw Error(A(169));n?(t=Hf(t,e,Fn),r.__reactInternalMemoizedMergedChildContext=t,ce(Xe),ce(Me),oe(Me,t)):ce(Xe),oe(Xe,n)}var Ft=null,Ia=!1,ko=!1;function Gf(t){Ft===null?Ft=[t]:Ft.push(t)}function Qg(t){Ia=!0,Gf(t)}function Sn(){if(!ko&&Ft!==null){ko=!0;var t=0,e=ie;try{var n=Ft;for(ie=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Ft=null,Ia=!1}catch(s){throw Ft!==null&&(Ft=Ft.slice(t+1)),gf(bu,Sn),s}finally{ie=e,ko=!1}}return null}var wr=[],br=0,oa=null,la=0,ut=[],ct=0,qn=null,qt=1,Ht="";function $n(t,e){wr[br++]=la,wr[br++]=oa,oa=t,la=e}function Vf(t,e,n){ut[ct++]=qt,ut[ct++]=Ht,ut[ct++]=qn,qn=t;var r=qt;t=Ht;var s=32-St(r)-1;r&=~(1<<s),n+=1;var a=32-St(e)+s;if(30<a){var o=s-s%5;a=(r&(1<<o)-1).toString(32),r>>=o,s-=o,qt=1<<32-St(e)+s|n<<s|r,Ht=a+t}else qt=1<<a|n<<s|r,Ht=t}function Pu(t){t.return!==null&&($n(t,1),Vf(t,1,0))}function Tu(t){for(;t===oa;)oa=wr[--br],wr[br]=null,la=wr[--br],wr[br]=null;for(;t===qn;)qn=ut[--ct],ut[ct]=null,Ht=ut[--ct],ut[ct]=null,qt=ut[--ct],ut[ct]=null}var st=null,rt=null,pe=!1,Nt=null;function Wf(t,e){var n=ht(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function kd(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,st=t,rt=pn(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,st=t,rt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=qn!==null?{id:qt,overflow:Ht}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=ht(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,st=t,rt=null,!0):!1;default:return!1}}function bl(t){return(t.mode&1)!==0&&(t.flags&128)===0}function _l(t){if(pe){var e=rt;if(e){var n=e;if(!kd(t,e)){if(bl(t))throw Error(A(418));e=pn(n.nextSibling);var r=st;e&&kd(t,e)?Wf(r,n):(t.flags=t.flags&-4097|2,pe=!1,st=t)}}else{if(bl(t))throw Error(A(418));t.flags=t.flags&-4097|2,pe=!1,st=t}}}function Nd(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;st=t}function _i(t){if(t!==st)return!1;if(!pe)return Nd(t),pe=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!vl(t.type,t.memoizedProps)),e&&(e=rt)){if(bl(t))throw Kf(),Error(A(418));for(;e;)Wf(t,e),e=pn(e.nextSibling)}if(Nd(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(A(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){rt=pn(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}rt=null}}else rt=st?pn(t.stateNode.nextSibling):null;return!0}function Kf(){for(var t=rt;t;)t=pn(t.nextSibling)}function Ar(){rt=st=null,pe=!1}function $u(t){Nt===null?Nt=[t]:Nt.push(t)}var Xg=Yt.ReactCurrentBatchConfig;function ns(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(A(309));var r=n.stateNode}if(!r)throw Error(A(147,t));var s=r,a=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===a?e.ref:(e=function(o){var l=s.refs;o===null?delete l[a]:l[a]=o},e._stringRef=a,e)}if(typeof t!="string")throw Error(A(284));if(!n._owner)throw Error(A(290,t))}return t}function ji(t,e){throw t=Object.prototype.toString.call(e),Error(A(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Sd(t){var e=t._init;return e(t._payload)}function Qf(t){function e(g,m){if(t){var f=g.deletions;f===null?(g.deletions=[m],g.flags|=16):f.push(m)}}function n(g,m){if(!t)return null;for(;m!==null;)e(g,m),m=m.sibling;return null}function r(g,m){for(g=new Map;m!==null;)m.key!==null?g.set(m.key,m):g.set(m.index,m),m=m.sibling;return g}function s(g,m){return g=xn(g,m),g.index=0,g.sibling=null,g}function a(g,m,f){return g.index=f,t?(f=g.alternate,f!==null?(f=f.index,f<m?(g.flags|=2,m):f):(g.flags|=2,m)):(g.flags|=1048576,m)}function o(g){return t&&g.alternate===null&&(g.flags|=2),g}function l(g,m,f,y){return m===null||m.tag!==6?(m=To(f,g.mode,y),m.return=g,m):(m=s(m,f),m.return=g,m)}function u(g,m,f,y){var _=f.type;return _===pr?h(g,m,f.props.children,y,f.key):m!==null&&(m.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===rn&&Sd(_)===m.type)?(y=s(m,f.props),y.ref=ns(g,m,f),y.return=g,y):(y=Ki(f.type,f.key,f.props,null,g.mode,y),y.ref=ns(g,m,f),y.return=g,y)}function c(g,m,f,y){return m===null||m.tag!==4||m.stateNode.containerInfo!==f.containerInfo||m.stateNode.implementation!==f.implementation?(m=$o(f,g.mode,y),m.return=g,m):(m=s(m,f.children||[]),m.return=g,m)}function h(g,m,f,y,_){return m===null||m.tag!==7?(m=zn(f,g.mode,y,_),m.return=g,m):(m=s(m,f),m.return=g,m)}function d(g,m,f){if(typeof m=="string"&&m!==""||typeof m=="number")return m=To(""+m,g.mode,f),m.return=g,m;if(typeof m=="object"&&m!==null){switch(m.$$typeof){case hi:return f=Ki(m.type,m.key,m.props,null,g.mode,f),f.ref=ns(g,null,m),f.return=g,f;case fr:return m=$o(m,g.mode,f),m.return=g,m;case rn:var y=m._init;return d(g,y(m._payload),f)}if(cs(m)||Jr(m))return m=zn(m,g.mode,f,null),m.return=g,m;ji(g,m)}return null}function p(g,m,f,y){var _=m!==null?m.key:null;if(typeof f=="string"&&f!==""||typeof f=="number")return _!==null?null:l(g,m,""+f,y);if(typeof f=="object"&&f!==null){switch(f.$$typeof){case hi:return f.key===_?u(g,m,f,y):null;case fr:return f.key===_?c(g,m,f,y):null;case rn:return _=f._init,p(g,m,_(f._payload),y)}if(cs(f)||Jr(f))return _!==null?null:h(g,m,f,y,null);ji(g,f)}return null}function v(g,m,f,y,_){if(typeof y=="string"&&y!==""||typeof y=="number")return g=g.get(f)||null,l(m,g,""+y,_);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case hi:return g=g.get(y.key===null?f:y.key)||null,u(m,g,y,_);case fr:return g=g.get(y.key===null?f:y.key)||null,c(m,g,y,_);case rn:var w=y._init;return v(g,m,f,w(y._payload),_)}if(cs(y)||Jr(y))return g=g.get(f)||null,h(m,g,y,_,null);ji(m,y)}return null}function x(g,m,f,y){for(var _=null,w=null,N=m,I=m=0,E=null;N!==null&&I<f.length;I++){N.index>I?(E=N,N=null):E=N.sibling;var R=p(g,N,f[I],y);if(R===null){N===null&&(N=E);break}t&&N&&R.alternate===null&&e(g,N),m=a(R,m,I),w===null?_=R:w.sibling=R,w=R,N=E}if(I===f.length)return n(g,N),pe&&$n(g,I),_;if(N===null){for(;I<f.length;I++)N=d(g,f[I],y),N!==null&&(m=a(N,m,I),w===null?_=N:w.sibling=N,w=N);return pe&&$n(g,I),_}for(N=r(g,N);I<f.length;I++)E=v(N,g,I,f[I],y),E!==null&&(t&&E.alternate!==null&&N.delete(E.key===null?I:E.key),m=a(E,m,I),w===null?_=E:w.sibling=E,w=E);return t&&N.forEach(function(U){return e(g,U)}),pe&&$n(g,I),_}function b(g,m,f,y){var _=Jr(f);if(typeof _!="function")throw Error(A(150));if(f=_.call(f),f==null)throw Error(A(151));for(var w=_=null,N=m,I=m=0,E=null,R=f.next();N!==null&&!R.done;I++,R=f.next()){N.index>I?(E=N,N=null):E=N.sibling;var U=p(g,N,R.value,y);if(U===null){N===null&&(N=E);break}t&&N&&U.alternate===null&&e(g,N),m=a(U,m,I),w===null?_=U:w.sibling=U,w=U,N=E}if(R.done)return n(g,N),pe&&$n(g,I),_;if(N===null){for(;!R.done;I++,R=f.next())R=d(g,R.value,y),R!==null&&(m=a(R,m,I),w===null?_=R:w.sibling=R,w=R);return pe&&$n(g,I),_}for(N=r(g,N);!R.done;I++,R=f.next())R=v(N,g,I,R.value,y),R!==null&&(t&&R.alternate!==null&&N.delete(R.key===null?I:R.key),m=a(R,m,I),w===null?_=R:w.sibling=R,w=R);return t&&N.forEach(function(se){return e(g,se)}),pe&&$n(g,I),_}function k(g,m,f,y){if(typeof f=="object"&&f!==null&&f.type===pr&&f.key===null&&(f=f.props.children),typeof f=="object"&&f!==null){switch(f.$$typeof){case hi:e:{for(var _=f.key,w=m;w!==null;){if(w.key===_){if(_=f.type,_===pr){if(w.tag===7){n(g,w.sibling),m=s(w,f.props.children),m.return=g,g=m;break e}}else if(w.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===rn&&Sd(_)===w.type){n(g,w.sibling),m=s(w,f.props),m.ref=ns(g,w,f),m.return=g,g=m;break e}n(g,w);break}else e(g,w);w=w.sibling}f.type===pr?(m=zn(f.props.children,g.mode,y,f.key),m.return=g,g=m):(y=Ki(f.type,f.key,f.props,null,g.mode,y),y.ref=ns(g,m,f),y.return=g,g=y)}return o(g);case fr:e:{for(w=f.key;m!==null;){if(m.key===w)if(m.tag===4&&m.stateNode.containerInfo===f.containerInfo&&m.stateNode.implementation===f.implementation){n(g,m.sibling),m=s(m,f.children||[]),m.return=g,g=m;break e}else{n(g,m);break}else e(g,m);m=m.sibling}m=$o(f,g.mode,y),m.return=g,g=m}return o(g);case rn:return w=f._init,k(g,m,w(f._payload),y)}if(cs(f))return x(g,m,f,y);if(Jr(f))return b(g,m,f,y);ji(g,f)}return typeof f=="string"&&f!==""||typeof f=="number"?(f=""+f,m!==null&&m.tag===6?(n(g,m.sibling),m=s(m,f),m.return=g,g=m):(n(g,m),m=To(f,g.mode,y),m.return=g,g=m),o(g)):n(g,m)}return k}var Ir=Qf(!0),Xf=Qf(!1),ua=Nn(null),ca=null,_r=null,Au=null;function Iu(){Au=_r=ca=null}function Ru(t){var e=ua.current;ce(ua),t._currentValue=e}function jl(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Or(t,e){ca=t,Au=_r=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Qe=!0),t.firstContext=null)}function mt(t){var e=t._currentValue;if(Au!==t)if(t={context:t,memoizedValue:e,next:null},_r===null){if(ca===null)throw Error(A(308));_r=t,ca.dependencies={lanes:0,firstContext:t}}else _r=_r.next=t;return e}var Ln=null;function Du(t){Ln===null?Ln=[t]:Ln.push(t)}function Jf(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,Du(e)):(n.next=s.next,s.next=n),e.interleaved=n,Qt(t,r)}function Qt(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var sn=!1;function Lu(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Yf(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Gt(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function mn(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,re&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,Qt(t,n)}return s=r.interleaved,s===null?(e.next=e,Du(r)):(e.next=s.next,s.next=e),r.interleaved=e,Qt(t,n)}function Fi(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,_u(t,n)}}function Ed(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,a=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};a===null?s=a=o:a=a.next=o,n=n.next}while(n!==null);a===null?s=a=e:a=a.next=e}else s=a=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:a,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function da(t,e,n,r){var s=t.updateQueue;sn=!1;var a=s.firstBaseUpdate,o=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var u=l,c=u.next;u.next=null,o===null?a=c:o.next=c,o=u;var h=t.alternate;h!==null&&(h=h.updateQueue,l=h.lastBaseUpdate,l!==o&&(l===null?h.firstBaseUpdate=c:l.next=c,h.lastBaseUpdate=u))}if(a!==null){var d=s.baseState;o=0,h=c=u=null,l=a;do{var p=l.lane,v=l.eventTime;if((r&p)===p){h!==null&&(h=h.next={eventTime:v,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var x=t,b=l;switch(p=e,v=n,b.tag){case 1:if(x=b.payload,typeof x=="function"){d=x.call(v,d,p);break e}d=x;break e;case 3:x.flags=x.flags&-65537|128;case 0:if(x=b.payload,p=typeof x=="function"?x.call(v,d,p):x,p==null)break e;d=ye({},d,p);break e;case 2:sn=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,p=s.effects,p===null?s.effects=[l]:p.push(l))}else v={eventTime:v,lane:p,tag:l.tag,payload:l.payload,callback:l.callback,next:null},h===null?(c=h=v,u=d):h=h.next=v,o|=p;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;p=l,l=p.next,p.next=null,s.lastBaseUpdate=p,s.shared.pending=null}}while(!0);if(h===null&&(u=d),s.baseState=u,s.firstBaseUpdate=c,s.lastBaseUpdate=h,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else a===null&&(s.shared.lanes=0);Gn|=o,t.lanes=o,t.memoizedState=d}}function Cd(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(A(191,s));s.call(r)}}}var Ys={},Dt=Nn(Ys),zs=Nn(Ys),Bs=Nn(Ys);function Mn(t){if(t===Ys)throw Error(A(174));return t}function Mu(t,e){switch(oe(Bs,e),oe(zs,t),oe(Dt,Ys),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:rl(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=rl(e,t)}ce(Dt),oe(Dt,e)}function Rr(){ce(Dt),ce(zs),ce(Bs)}function Zf(t){Mn(Bs.current);var e=Mn(Dt.current),n=rl(e,t.type);e!==n&&(oe(zs,t),oe(Dt,n))}function Uu(t){zs.current===t&&(ce(Dt),ce(zs))}var ve=Nn(0);function ha(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var No=[];function zu(){for(var t=0;t<No.length;t++)No[t]._workInProgressVersionPrimary=null;No.length=0}var qi=Yt.ReactCurrentDispatcher,So=Yt.ReactCurrentBatchConfig,Hn=0,xe=null,Se=null,Ce=null,fa=!1,ws=!1,Fs=0,Jg=0;function Re(){throw Error(A(321))}function Bu(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Ct(t[n],e[n]))return!1;return!0}function Fu(t,e,n,r,s,a){if(Hn=a,xe=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,qi.current=t===null||t.memoizedState===null?tv:nv,t=n(r,s),ws){a=0;do{if(ws=!1,Fs=0,25<=a)throw Error(A(301));a+=1,Ce=Se=null,e.updateQueue=null,qi.current=rv,t=n(r,s)}while(ws)}if(qi.current=pa,e=Se!==null&&Se.next!==null,Hn=0,Ce=Se=xe=null,fa=!1,e)throw Error(A(300));return t}function qu(){var t=Fs!==0;return Fs=0,t}function Tt(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ce===null?xe.memoizedState=Ce=t:Ce=Ce.next=t,Ce}function gt(){if(Se===null){var t=xe.alternate;t=t!==null?t.memoizedState:null}else t=Se.next;var e=Ce===null?xe.memoizedState:Ce.next;if(e!==null)Ce=e,Se=t;else{if(t===null)throw Error(A(310));Se=t,t={memoizedState:Se.memoizedState,baseState:Se.baseState,baseQueue:Se.baseQueue,queue:Se.queue,next:null},Ce===null?xe.memoizedState=Ce=t:Ce=Ce.next=t}return Ce}function qs(t,e){return typeof e=="function"?e(t):e}function Eo(t){var e=gt(),n=e.queue;if(n===null)throw Error(A(311));n.lastRenderedReducer=t;var r=Se,s=r.baseQueue,a=n.pending;if(a!==null){if(s!==null){var o=s.next;s.next=a.next,a.next=o}r.baseQueue=s=a,n.pending=null}if(s!==null){a=s.next,r=r.baseState;var l=o=null,u=null,c=a;do{var h=c.lane;if((Hn&h)===h)u!==null&&(u=u.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var d={lane:h,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};u===null?(l=u=d,o=r):u=u.next=d,xe.lanes|=h,Gn|=h}c=c.next}while(c!==null&&c!==a);u===null?o=r:u.next=l,Ct(r,e.memoizedState)||(Qe=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do a=s.lane,xe.lanes|=a,Gn|=a,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Co(t){var e=gt(),n=e.queue;if(n===null)throw Error(A(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,a=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do a=t(a,o.action),o=o.next;while(o!==s);Ct(a,e.memoizedState)||(Qe=!0),e.memoizedState=a,e.baseQueue===null&&(e.baseState=a),n.lastRenderedState=a}return[a,r]}function ep(){}function tp(t,e){var n=xe,r=gt(),s=e(),a=!Ct(r.memoizedState,s);if(a&&(r.memoizedState=s,Qe=!0),r=r.queue,Hu(sp.bind(null,n,r,t),[t]),r.getSnapshot!==e||a||Ce!==null&&Ce.memoizedState.tag&1){if(n.flags|=2048,Hs(9,rp.bind(null,n,r,s,e),void 0,null),Oe===null)throw Error(A(349));Hn&30||np(n,e,s)}return s}function np(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=xe.updateQueue,e===null?(e={lastEffect:null,stores:null},xe.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function rp(t,e,n,r){e.value=n,e.getSnapshot=r,ip(e)&&ap(t)}function sp(t,e,n){return n(function(){ip(e)&&ap(t)})}function ip(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Ct(t,n)}catch{return!0}}function ap(t){var e=Qt(t,1);e!==null&&Et(e,t,1,-1)}function Od(t){var e=Tt();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:qs,lastRenderedState:t},e.queue=t,t=t.dispatch=ev.bind(null,xe,t),[e.memoizedState,t]}function Hs(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=xe.updateQueue,e===null?(e={lastEffect:null,stores:null},xe.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function op(){return gt().memoizedState}function Hi(t,e,n,r){var s=Tt();xe.flags|=t,s.memoizedState=Hs(1|e,n,void 0,r===void 0?null:r)}function Ra(t,e,n,r){var s=gt();r=r===void 0?null:r;var a=void 0;if(Se!==null){var o=Se.memoizedState;if(a=o.destroy,r!==null&&Bu(r,o.deps)){s.memoizedState=Hs(e,n,a,r);return}}xe.flags|=t,s.memoizedState=Hs(1|e,n,a,r)}function Pd(t,e){return Hi(8390656,8,t,e)}function Hu(t,e){return Ra(2048,8,t,e)}function lp(t,e){return Ra(4,2,t,e)}function up(t,e){return Ra(4,4,t,e)}function cp(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function dp(t,e,n){return n=n!=null?n.concat([t]):null,Ra(4,4,cp.bind(null,e,t),n)}function Gu(){}function hp(t,e){var n=gt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Bu(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function fp(t,e){var n=gt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Bu(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function pp(t,e,n){return Hn&21?(Ct(n,e)||(n=yf(),xe.lanes|=n,Gn|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Qe=!0),t.memoizedState=n)}function Yg(t,e){var n=ie;ie=n!==0&&4>n?n:4,t(!0);var r=So.transition;So.transition={};try{t(!1),e()}finally{ie=n,So.transition=r}}function mp(){return gt().memoizedState}function Zg(t,e,n){var r=vn(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},gp(t))vp(e,n);else if(n=Jf(t,e,n,r),n!==null){var s=Be();Et(n,t,r,s),xp(n,e,r)}}function ev(t,e,n){var r=vn(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(gp(t))vp(e,s);else{var a=t.alternate;if(t.lanes===0&&(a===null||a.lanes===0)&&(a=e.lastRenderedReducer,a!==null))try{var o=e.lastRenderedState,l=a(o,n);if(s.hasEagerState=!0,s.eagerState=l,Ct(l,o)){var u=e.interleaved;u===null?(s.next=s,Du(e)):(s.next=u.next,u.next=s),e.interleaved=s;return}}catch{}finally{}n=Jf(t,e,s,r),n!==null&&(s=Be(),Et(n,t,r,s),xp(n,e,r))}}function gp(t){var e=t.alternate;return t===xe||e!==null&&e===xe}function vp(t,e){ws=fa=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function xp(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,_u(t,n)}}var pa={readContext:mt,useCallback:Re,useContext:Re,useEffect:Re,useImperativeHandle:Re,useInsertionEffect:Re,useLayoutEffect:Re,useMemo:Re,useReducer:Re,useRef:Re,useState:Re,useDebugValue:Re,useDeferredValue:Re,useTransition:Re,useMutableSource:Re,useSyncExternalStore:Re,useId:Re,unstable_isNewReconciler:!1},tv={readContext:mt,useCallback:function(t,e){return Tt().memoizedState=[t,e===void 0?null:e],t},useContext:mt,useEffect:Pd,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Hi(4194308,4,cp.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Hi(4194308,4,t,e)},useInsertionEffect:function(t,e){return Hi(4,2,t,e)},useMemo:function(t,e){var n=Tt();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Tt();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=Zg.bind(null,xe,t),[r.memoizedState,t]},useRef:function(t){var e=Tt();return t={current:t},e.memoizedState=t},useState:Od,useDebugValue:Gu,useDeferredValue:function(t){return Tt().memoizedState=t},useTransition:function(){var t=Od(!1),e=t[0];return t=Yg.bind(null,t[1]),Tt().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=xe,s=Tt();if(pe){if(n===void 0)throw Error(A(407));n=n()}else{if(n=e(),Oe===null)throw Error(A(349));Hn&30||np(r,e,n)}s.memoizedState=n;var a={value:n,getSnapshot:e};return s.queue=a,Pd(sp.bind(null,r,a,t),[t]),r.flags|=2048,Hs(9,rp.bind(null,r,a,n,e),void 0,null),n},useId:function(){var t=Tt(),e=Oe.identifierPrefix;if(pe){var n=Ht,r=qt;n=(r&~(1<<32-St(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Fs++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=Jg++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},nv={readContext:mt,useCallback:hp,useContext:mt,useEffect:Hu,useImperativeHandle:dp,useInsertionEffect:lp,useLayoutEffect:up,useMemo:fp,useReducer:Eo,useRef:op,useState:function(){return Eo(qs)},useDebugValue:Gu,useDeferredValue:function(t){var e=gt();return pp(e,Se.memoizedState,t)},useTransition:function(){var t=Eo(qs)[0],e=gt().memoizedState;return[t,e]},useMutableSource:ep,useSyncExternalStore:tp,useId:mp,unstable_isNewReconciler:!1},rv={readContext:mt,useCallback:hp,useContext:mt,useEffect:Hu,useImperativeHandle:dp,useInsertionEffect:lp,useLayoutEffect:up,useMemo:fp,useReducer:Co,useRef:op,useState:function(){return Co(qs)},useDebugValue:Gu,useDeferredValue:function(t){var e=gt();return Se===null?e.memoizedState=t:pp(e,Se.memoizedState,t)},useTransition:function(){var t=Co(qs)[0],e=gt().memoizedState;return[t,e]},useMutableSource:ep,useSyncExternalStore:tp,useId:mp,unstable_isNewReconciler:!1};function _t(t,e){if(t&&t.defaultProps){e=ye({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function kl(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:ye({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Da={isMounted:function(t){return(t=t._reactInternals)?Kn(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Be(),s=vn(t),a=Gt(r,s);a.payload=e,n!=null&&(a.callback=n),e=mn(t,a,s),e!==null&&(Et(e,t,s,r),Fi(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Be(),s=vn(t),a=Gt(r,s);a.tag=1,a.payload=e,n!=null&&(a.callback=n),e=mn(t,a,s),e!==null&&(Et(e,t,s,r),Fi(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Be(),r=vn(t),s=Gt(n,r);s.tag=2,e!=null&&(s.callback=e),e=mn(t,s,r),e!==null&&(Et(e,t,r,n),Fi(e,t,r))}};function Td(t,e,n,r,s,a,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,a,o):e.prototype&&e.prototype.isPureReactComponent?!Ds(n,r)||!Ds(s,a):!0}function yp(t,e,n){var r=!1,s=bn,a=e.contextType;return typeof a=="object"&&a!==null?a=mt(a):(s=Je(e)?Fn:Me.current,r=e.contextTypes,a=(r=r!=null)?$r(t,s):bn),e=new e(n,a),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Da,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=a),e}function $d(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Da.enqueueReplaceState(e,e.state,null)}function Nl(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},Lu(t);var a=e.contextType;typeof a=="object"&&a!==null?s.context=mt(a):(a=Je(e)?Fn:Me.current,s.context=$r(t,a)),s.state=t.memoizedState,a=e.getDerivedStateFromProps,typeof a=="function"&&(kl(t,e,a,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Da.enqueueReplaceState(s,s.state,null),da(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Dr(t,e){try{var n="",r=e;do n+=Tm(r),r=r.return;while(r);var s=n}catch(a){s=`
Error generating stack: `+a.message+`
`+a.stack}return{value:t,source:e,stack:s,digest:null}}function Oo(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Sl(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var sv=typeof WeakMap=="function"?WeakMap:Map;function wp(t,e,n){n=Gt(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){ga||(ga=!0,Dl=r),Sl(t,e)},n}function bp(t,e,n){n=Gt(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){Sl(t,e)}}var a=t.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(n.callback=function(){Sl(t,e),typeof r!="function"&&(gn===null?gn=new Set([this]):gn.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function Ad(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new sv;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=xv.bind(null,t,e,n),e.then(t,t))}function Id(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Rd(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Gt(-1,1),e.tag=2,mn(n,e,1))),n.lanes|=1),t)}var iv=Yt.ReactCurrentOwner,Qe=!1;function ze(t,e,n,r){e.child=t===null?Xf(e,null,n,r):Ir(e,t.child,n,r)}function Dd(t,e,n,r,s){n=n.render;var a=e.ref;return Or(e,s),r=Fu(t,e,n,r,a,s),n=qu(),t!==null&&!Qe?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Xt(t,e,s)):(pe&&n&&Pu(e),e.flags|=1,ze(t,e,r,s),e.child)}function Ld(t,e,n,r,s){if(t===null){var a=n.type;return typeof a=="function"&&!Zu(a)&&a.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=a,_p(t,e,a,r,s)):(t=Ki(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(a=t.child,!(t.lanes&s)){var o=a.memoizedProps;if(n=n.compare,n=n!==null?n:Ds,n(o,r)&&t.ref===e.ref)return Xt(t,e,s)}return e.flags|=1,t=xn(a,r),t.ref=e.ref,t.return=e,e.child=t}function _p(t,e,n,r,s){if(t!==null){var a=t.memoizedProps;if(Ds(a,r)&&t.ref===e.ref)if(Qe=!1,e.pendingProps=r=a,(t.lanes&s)!==0)t.flags&131072&&(Qe=!0);else return e.lanes=t.lanes,Xt(t,e,s)}return El(t,e,n,r,s)}function jp(t,e,n){var r=e.pendingProps,s=r.children,a=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},oe(kr,tt),tt|=n;else{if(!(n&1073741824))return t=a!==null?a.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,oe(kr,tt),tt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=a!==null?a.baseLanes:n,oe(kr,tt),tt|=r}else a!==null?(r=a.baseLanes|n,e.memoizedState=null):r=n,oe(kr,tt),tt|=r;return ze(t,e,s,n),e.child}function kp(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function El(t,e,n,r,s){var a=Je(n)?Fn:Me.current;return a=$r(e,a),Or(e,s),n=Fu(t,e,n,r,a,s),r=qu(),t!==null&&!Qe?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Xt(t,e,s)):(pe&&r&&Pu(e),e.flags|=1,ze(t,e,n,s),e.child)}function Md(t,e,n,r,s){if(Je(n)){var a=!0;aa(e)}else a=!1;if(Or(e,s),e.stateNode===null)Gi(t,e),yp(e,n,r),Nl(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var u=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=mt(c):(c=Je(n)?Fn:Me.current,c=$r(e,c));var h=n.getDerivedStateFromProps,d=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||u!==c)&&$d(e,o,r,c),sn=!1;var p=e.memoizedState;o.state=p,da(e,r,o,s),u=e.memoizedState,l!==r||p!==u||Xe.current||sn?(typeof h=="function"&&(kl(e,n,h,r),u=e.memoizedState),(l=sn||Td(e,n,l,r,p,u,c))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),o.props=r,o.state=u,o.context=c,r=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,Yf(t,e),l=e.memoizedProps,c=e.type===e.elementType?l:_t(e.type,l),o.props=c,d=e.pendingProps,p=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=mt(u):(u=Je(n)?Fn:Me.current,u=$r(e,u));var v=n.getDerivedStateFromProps;(h=typeof v=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==d||p!==u)&&$d(e,o,r,u),sn=!1,p=e.memoizedState,o.state=p,da(e,r,o,s);var x=e.memoizedState;l!==d||p!==x||Xe.current||sn?(typeof v=="function"&&(kl(e,n,v,r),x=e.memoizedState),(c=sn||Td(e,n,c,r,p,x,u)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,x,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,x,u)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=x),o.props=r,o.state=x,o.context=u,r=c):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),r=!1)}return Cl(t,e,n,r,a,s)}function Cl(t,e,n,r,s,a){kp(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&jd(e,n,!1),Xt(t,e,a);r=e.stateNode,iv.current=e;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Ir(e,t.child,null,a),e.child=Ir(e,null,l,a)):ze(t,e,l,a),e.memoizedState=r.state,s&&jd(e,n,!0),e.child}function Np(t){var e=t.stateNode;e.pendingContext?_d(t,e.pendingContext,e.pendingContext!==e.context):e.context&&_d(t,e.context,!1),Mu(t,e.containerInfo)}function Ud(t,e,n,r,s){return Ar(),$u(s),e.flags|=256,ze(t,e,n,r),e.child}var Ol={dehydrated:null,treeContext:null,retryLane:0};function Pl(t){return{baseLanes:t,cachePool:null,transitions:null}}function Sp(t,e,n){var r=e.pendingProps,s=ve.current,a=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(s&2)!==0),l?(a=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),oe(ve,s&1),t===null)return _l(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,a?(r=e.mode,a=e.child,o={mode:"hidden",children:o},!(r&1)&&a!==null?(a.childLanes=0,a.pendingProps=o):a=Ua(o,r,0,null),t=zn(t,r,n,null),a.return=e,t.return=e,a.sibling=t,e.child=a,e.child.memoizedState=Pl(n),e.memoizedState=Ol,t):Vu(e,o));if(s=t.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return av(t,e,o,r,l,s,n);if(a){a=r.fallback,o=e.mode,s=t.child,l=s.sibling;var u={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=xn(s,u),r.subtreeFlags=s.subtreeFlags&14680064),l!==null?a=xn(l,a):(a=zn(a,o,n,null),a.flags|=2),a.return=e,r.return=e,r.sibling=a,e.child=r,r=a,a=e.child,o=t.child.memoizedState,o=o===null?Pl(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},a.memoizedState=o,a.childLanes=t.childLanes&~n,e.memoizedState=Ol,r}return a=t.child,t=a.sibling,r=xn(a,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Vu(t,e){return e=Ua({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function ki(t,e,n,r){return r!==null&&$u(r),Ir(e,t.child,null,n),t=Vu(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function av(t,e,n,r,s,a,o){if(n)return e.flags&256?(e.flags&=-257,r=Oo(Error(A(422))),ki(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(a=r.fallback,s=e.mode,r=Ua({mode:"visible",children:r.children},s,0,null),a=zn(a,s,o,null),a.flags|=2,r.return=e,a.return=e,r.sibling=a,e.child=r,e.mode&1&&Ir(e,t.child,null,o),e.child.memoizedState=Pl(o),e.memoizedState=Ol,a);if(!(e.mode&1))return ki(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var l=r.dgst;return r=l,a=Error(A(419)),r=Oo(a,r,void 0),ki(t,e,o,r)}if(l=(o&t.childLanes)!==0,Qe||l){if(r=Oe,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==a.retryLane&&(a.retryLane=s,Qt(t,s),Et(r,t,s,-1))}return Yu(),r=Oo(Error(A(421))),ki(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=yv.bind(null,t),s._reactRetry=e,null):(t=a.treeContext,rt=pn(s.nextSibling),st=e,pe=!0,Nt=null,t!==null&&(ut[ct++]=qt,ut[ct++]=Ht,ut[ct++]=qn,qt=t.id,Ht=t.overflow,qn=e),e=Vu(e,r.children),e.flags|=4096,e)}function zd(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),jl(t.return,e,n)}function Po(t,e,n,r,s){var a=t.memoizedState;a===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(a.isBackwards=e,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=s)}function Ep(t,e,n){var r=e.pendingProps,s=r.revealOrder,a=r.tail;if(ze(t,e,r.children,n),r=ve.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&zd(t,n,e);else if(t.tag===19)zd(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(oe(ve,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&ha(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),Po(e,!1,s,n,a);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&ha(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}Po(e,!0,n,null,a);break;case"together":Po(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Gi(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Xt(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Gn|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(A(153));if(e.child!==null){for(t=e.child,n=xn(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=xn(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function ov(t,e,n){switch(e.tag){case 3:Np(e),Ar();break;case 5:Zf(e);break;case 1:Je(e.type)&&aa(e);break;case 4:Mu(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;oe(ua,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(oe(ve,ve.current&1),e.flags|=128,null):n&e.child.childLanes?Sp(t,e,n):(oe(ve,ve.current&1),t=Xt(t,e,n),t!==null?t.sibling:null);oe(ve,ve.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return Ep(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),oe(ve,ve.current),r)break;return null;case 22:case 23:return e.lanes=0,jp(t,e,n)}return Xt(t,e,n)}var Cp,Tl,Op,Pp;Cp=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Tl=function(){};Op=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,Mn(Dt.current);var a=null;switch(n){case"input":s=Zo(t,s),r=Zo(t,r),a=[];break;case"select":s=ye({},s,{value:void 0}),r=ye({},r,{value:void 0}),a=[];break;case"textarea":s=nl(t,s),r=nl(t,r),a=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=sa)}sl(n,r);var o;n=null;for(c in s)if(!r.hasOwnProperty(c)&&s.hasOwnProperty(c)&&s[c]!=null)if(c==="style"){var l=s[c];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Os.hasOwnProperty(c)?a||(a=[]):(a=a||[]).push(c,null));for(c in r){var u=r[c];if(l=s!=null?s[c]:void 0,r.hasOwnProperty(c)&&u!==l&&(u!=null||l!=null))if(c==="style")if(l){for(o in l)!l.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&l[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(a||(a=[]),a.push(c,n)),n=u;else c==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,l=l?l.__html:void 0,u!=null&&l!==u&&(a=a||[]).push(c,u)):c==="children"?typeof u!="string"&&typeof u!="number"||(a=a||[]).push(c,""+u):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Os.hasOwnProperty(c)?(u!=null&&c==="onScroll"&&ue("scroll",t),a||l===u||(a=[])):(a=a||[]).push(c,u))}n&&(a=a||[]).push("style",n);var c=a;(e.updateQueue=c)&&(e.flags|=4)}};Pp=function(t,e,n,r){n!==r&&(e.flags|=4)};function rs(t,e){if(!pe)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function De(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function lv(t,e,n){var r=e.pendingProps;switch(Tu(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return De(e),null;case 1:return Je(e.type)&&ia(),De(e),null;case 3:return r=e.stateNode,Rr(),ce(Xe),ce(Me),zu(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(_i(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Nt!==null&&(Ul(Nt),Nt=null))),Tl(t,e),De(e),null;case 5:Uu(e);var s=Mn(Bs.current);if(n=e.type,t!==null&&e.stateNode!=null)Op(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(A(166));return De(e),null}if(t=Mn(Dt.current),_i(e)){r=e.stateNode,n=e.type;var a=e.memoizedProps;switch(r[At]=e,r[Us]=a,t=(e.mode&1)!==0,n){case"dialog":ue("cancel",r),ue("close",r);break;case"iframe":case"object":case"embed":ue("load",r);break;case"video":case"audio":for(s=0;s<hs.length;s++)ue(hs[s],r);break;case"source":ue("error",r);break;case"img":case"image":case"link":ue("error",r),ue("load",r);break;case"details":ue("toggle",r);break;case"input":Qc(r,a),ue("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!a.multiple},ue("invalid",r);break;case"textarea":Jc(r,a),ue("invalid",r)}sl(n,a),s=null;for(var o in a)if(a.hasOwnProperty(o)){var l=a[o];o==="children"?typeof l=="string"?r.textContent!==l&&(a.suppressHydrationWarning!==!0&&bi(r.textContent,l,t),s=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(a.suppressHydrationWarning!==!0&&bi(r.textContent,l,t),s=["children",""+l]):Os.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&ue("scroll",r)}switch(n){case"input":fi(r),Xc(r,a,!0);break;case"textarea":fi(r),Yc(r);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(r.onclick=sa)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=rf(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[At]=e,t[Us]=r,Cp(t,e,!1,!1),e.stateNode=t;e:{switch(o=il(n,r),n){case"dialog":ue("cancel",t),ue("close",t),s=r;break;case"iframe":case"object":case"embed":ue("load",t),s=r;break;case"video":case"audio":for(s=0;s<hs.length;s++)ue(hs[s],t);s=r;break;case"source":ue("error",t),s=r;break;case"img":case"image":case"link":ue("error",t),ue("load",t),s=r;break;case"details":ue("toggle",t),s=r;break;case"input":Qc(t,r),s=Zo(t,r),ue("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=ye({},r,{value:void 0}),ue("invalid",t);break;case"textarea":Jc(t,r),s=nl(t,r),ue("invalid",t);break;default:s=r}sl(n,s),l=s;for(a in l)if(l.hasOwnProperty(a)){var u=l[a];a==="style"?of(t,u):a==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&sf(t,u)):a==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&Ps(t,u):typeof u=="number"&&Ps(t,""+u):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(Os.hasOwnProperty(a)?u!=null&&a==="onScroll"&&ue("scroll",t):u!=null&&gu(t,a,u,o))}switch(n){case"input":fi(t),Xc(t,r,!1);break;case"textarea":fi(t),Yc(t);break;case"option":r.value!=null&&t.setAttribute("value",""+wn(r.value));break;case"select":t.multiple=!!r.multiple,a=r.value,a!=null?Nr(t,!!r.multiple,a,!1):r.defaultValue!=null&&Nr(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=sa)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return De(e),null;case 6:if(t&&e.stateNode!=null)Pp(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(A(166));if(n=Mn(Bs.current),Mn(Dt.current),_i(e)){if(r=e.stateNode,n=e.memoizedProps,r[At]=e,(a=r.nodeValue!==n)&&(t=st,t!==null))switch(t.tag){case 3:bi(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&bi(r.nodeValue,n,(t.mode&1)!==0)}a&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[At]=e,e.stateNode=r}return De(e),null;case 13:if(ce(ve),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(pe&&rt!==null&&e.mode&1&&!(e.flags&128))Kf(),Ar(),e.flags|=98560,a=!1;else if(a=_i(e),r!==null&&r.dehydrated!==null){if(t===null){if(!a)throw Error(A(318));if(a=e.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(A(317));a[At]=e}else Ar(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;De(e),a=!1}else Nt!==null&&(Ul(Nt),Nt=null),a=!0;if(!a)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||ve.current&1?Ee===0&&(Ee=3):Yu())),e.updateQueue!==null&&(e.flags|=4),De(e),null);case 4:return Rr(),Tl(t,e),t===null&&Ls(e.stateNode.containerInfo),De(e),null;case 10:return Ru(e.type._context),De(e),null;case 17:return Je(e.type)&&ia(),De(e),null;case 19:if(ce(ve),a=e.memoizedState,a===null)return De(e),null;if(r=(e.flags&128)!==0,o=a.rendering,o===null)if(r)rs(a,!1);else{if(Ee!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=ha(t),o!==null){for(e.flags|=128,rs(a,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)a=n,t=r,a.flags&=14680066,o=a.alternate,o===null?(a.childLanes=0,a.lanes=t,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=o.childLanes,a.lanes=o.lanes,a.child=o.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=o.memoizedProps,a.memoizedState=o.memoizedState,a.updateQueue=o.updateQueue,a.type=o.type,t=o.dependencies,a.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return oe(ve,ve.current&1|2),e.child}t=t.sibling}a.tail!==null&&be()>Lr&&(e.flags|=128,r=!0,rs(a,!1),e.lanes=4194304)}else{if(!r)if(t=ha(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),rs(a,!0),a.tail===null&&a.tailMode==="hidden"&&!o.alternate&&!pe)return De(e),null}else 2*be()-a.renderingStartTime>Lr&&n!==1073741824&&(e.flags|=128,r=!0,rs(a,!1),e.lanes=4194304);a.isBackwards?(o.sibling=e.child,e.child=o):(n=a.last,n!==null?n.sibling=o:e.child=o,a.last=o)}return a.tail!==null?(e=a.tail,a.rendering=e,a.tail=e.sibling,a.renderingStartTime=be(),e.sibling=null,n=ve.current,oe(ve,r?n&1|2:n&1),e):(De(e),null);case 22:case 23:return Ju(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?tt&1073741824&&(De(e),e.subtreeFlags&6&&(e.flags|=8192)):De(e),null;case 24:return null;case 25:return null}throw Error(A(156,e.tag))}function uv(t,e){switch(Tu(e),e.tag){case 1:return Je(e.type)&&ia(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Rr(),ce(Xe),ce(Me),zu(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Uu(e),null;case 13:if(ce(ve),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(A(340));Ar()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return ce(ve),null;case 4:return Rr(),null;case 10:return Ru(e.type._context),null;case 22:case 23:return Ju(),null;case 24:return null;default:return null}}var Ni=!1,Le=!1,cv=typeof WeakSet=="function"?WeakSet:Set,M=null;function jr(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){we(t,e,r)}else n.current=null}function $l(t,e,n){try{n()}catch(r){we(t,e,r)}}var Bd=!1;function dv(t,e){if(ml=ta,t=Rf(),Ou(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{n.nodeType,a.nodeType}catch{n=null;break e}var o=0,l=-1,u=-1,c=0,h=0,d=t,p=null;t:for(;;){for(var v;d!==n||s!==0&&d.nodeType!==3||(l=o+s),d!==a||r!==0&&d.nodeType!==3||(u=o+r),d.nodeType===3&&(o+=d.nodeValue.length),(v=d.firstChild)!==null;)p=d,d=v;for(;;){if(d===t)break t;if(p===n&&++c===s&&(l=o),p===a&&++h===r&&(u=o),(v=d.nextSibling)!==null)break;d=p,p=d.parentNode}d=v}n=l===-1||u===-1?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(gl={focusedElem:t,selectionRange:n},ta=!1,M=e;M!==null;)if(e=M,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,M=t;else for(;M!==null;){e=M;try{var x=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(x!==null){var b=x.memoizedProps,k=x.memoizedState,g=e.stateNode,m=g.getSnapshotBeforeUpdate(e.elementType===e.type?b:_t(e.type,b),k);g.__reactInternalSnapshotBeforeUpdate=m}break;case 3:var f=e.stateNode.containerInfo;f.nodeType===1?f.textContent="":f.nodeType===9&&f.documentElement&&f.removeChild(f.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(A(163))}}catch(y){we(e,e.return,y)}if(t=e.sibling,t!==null){t.return=e.return,M=t;break}M=e.return}return x=Bd,Bd=!1,x}function bs(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var a=s.destroy;s.destroy=void 0,a!==void 0&&$l(e,n,a)}s=s.next}while(s!==r)}}function La(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Al(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Tp(t){var e=t.alternate;e!==null&&(t.alternate=null,Tp(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[At],delete e[Us],delete e[yl],delete e[Wg],delete e[Kg])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function $p(t){return t.tag===5||t.tag===3||t.tag===4}function Fd(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||$p(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Il(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=sa));else if(r!==4&&(t=t.child,t!==null))for(Il(t,e,n),t=t.sibling;t!==null;)Il(t,e,n),t=t.sibling}function Rl(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Rl(t,e,n),t=t.sibling;t!==null;)Rl(t,e,n),t=t.sibling}var Te=null,jt=!1;function en(t,e,n){for(n=n.child;n!==null;)Ap(t,e,n),n=n.sibling}function Ap(t,e,n){if(Rt&&typeof Rt.onCommitFiberUnmount=="function")try{Rt.onCommitFiberUnmount(Oa,n)}catch{}switch(n.tag){case 5:Le||jr(n,e);case 6:var r=Te,s=jt;Te=null,en(t,e,n),Te=r,jt=s,Te!==null&&(jt?(t=Te,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Te.removeChild(n.stateNode));break;case 18:Te!==null&&(jt?(t=Te,n=n.stateNode,t.nodeType===8?jo(t.parentNode,n):t.nodeType===1&&jo(t,n),Is(t)):jo(Te,n.stateNode));break;case 4:r=Te,s=jt,Te=n.stateNode.containerInfo,jt=!0,en(t,e,n),Te=r,jt=s;break;case 0:case 11:case 14:case 15:if(!Le&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var a=s,o=a.destroy;a=a.tag,o!==void 0&&(a&2||a&4)&&$l(n,e,o),s=s.next}while(s!==r)}en(t,e,n);break;case 1:if(!Le&&(jr(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){we(n,e,l)}en(t,e,n);break;case 21:en(t,e,n);break;case 22:n.mode&1?(Le=(r=Le)||n.memoizedState!==null,en(t,e,n),Le=r):en(t,e,n);break;default:en(t,e,n)}}function qd(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new cv),e.forEach(function(r){var s=wv.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function wt(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var a=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:Te=l.stateNode,jt=!1;break e;case 3:Te=l.stateNode.containerInfo,jt=!0;break e;case 4:Te=l.stateNode.containerInfo,jt=!0;break e}l=l.return}if(Te===null)throw Error(A(160));Ap(a,o,s),Te=null,jt=!1;var u=s.alternate;u!==null&&(u.return=null),s.return=null}catch(c){we(s,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Ip(e,t),e=e.sibling}function Ip(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(wt(e,t),Pt(t),r&4){try{bs(3,t,t.return),La(3,t)}catch(b){we(t,t.return,b)}try{bs(5,t,t.return)}catch(b){we(t,t.return,b)}}break;case 1:wt(e,t),Pt(t),r&512&&n!==null&&jr(n,n.return);break;case 5:if(wt(e,t),Pt(t),r&512&&n!==null&&jr(n,n.return),t.flags&32){var s=t.stateNode;try{Ps(s,"")}catch(b){we(t,t.return,b)}}if(r&4&&(s=t.stateNode,s!=null)){var a=t.memoizedProps,o=n!==null?n.memoizedProps:a,l=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{l==="input"&&a.type==="radio"&&a.name!=null&&tf(s,a),il(l,o);var c=il(l,a);for(o=0;o<u.length;o+=2){var h=u[o],d=u[o+1];h==="style"?of(s,d):h==="dangerouslySetInnerHTML"?sf(s,d):h==="children"?Ps(s,d):gu(s,h,d,c)}switch(l){case"input":el(s,a);break;case"textarea":nf(s,a);break;case"select":var p=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!a.multiple;var v=a.value;v!=null?Nr(s,!!a.multiple,v,!1):p!==!!a.multiple&&(a.defaultValue!=null?Nr(s,!!a.multiple,a.defaultValue,!0):Nr(s,!!a.multiple,a.multiple?[]:"",!1))}s[Us]=a}catch(b){we(t,t.return,b)}}break;case 6:if(wt(e,t),Pt(t),r&4){if(t.stateNode===null)throw Error(A(162));s=t.stateNode,a=t.memoizedProps;try{s.nodeValue=a}catch(b){we(t,t.return,b)}}break;case 3:if(wt(e,t),Pt(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Is(e.containerInfo)}catch(b){we(t,t.return,b)}break;case 4:wt(e,t),Pt(t);break;case 13:wt(e,t),Pt(t),s=t.child,s.flags&8192&&(a=s.memoizedState!==null,s.stateNode.isHidden=a,!a||s.alternate!==null&&s.alternate.memoizedState!==null||(Qu=be())),r&4&&qd(t);break;case 22:if(h=n!==null&&n.memoizedState!==null,t.mode&1?(Le=(c=Le)||h,wt(e,t),Le=c):wt(e,t),Pt(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!h&&t.mode&1)for(M=t,h=t.child;h!==null;){for(d=M=h;M!==null;){switch(p=M,v=p.child,p.tag){case 0:case 11:case 14:case 15:bs(4,p,p.return);break;case 1:jr(p,p.return);var x=p.stateNode;if(typeof x.componentWillUnmount=="function"){r=p,n=p.return;try{e=r,x.props=e.memoizedProps,x.state=e.memoizedState,x.componentWillUnmount()}catch(b){we(r,n,b)}}break;case 5:jr(p,p.return);break;case 22:if(p.memoizedState!==null){Gd(d);continue}}v!==null?(v.return=p,M=v):Gd(d)}h=h.sibling}e:for(h=null,d=t;;){if(d.tag===5){if(h===null){h=d;try{s=d.stateNode,c?(a=s.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(l=d.stateNode,u=d.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,l.style.display=af("display",o))}catch(b){we(t,t.return,b)}}}else if(d.tag===6){if(h===null)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(b){we(t,t.return,b)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:wt(e,t),Pt(t),r&4&&qd(t);break;case 21:break;default:wt(e,t),Pt(t)}}function Pt(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if($p(n)){var r=n;break e}n=n.return}throw Error(A(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Ps(s,""),r.flags&=-33);var a=Fd(t);Rl(t,a,s);break;case 3:case 4:var o=r.stateNode.containerInfo,l=Fd(t);Il(t,l,o);break;default:throw Error(A(161))}}catch(u){we(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function hv(t,e,n){M=t,Rp(t)}function Rp(t,e,n){for(var r=(t.mode&1)!==0;M!==null;){var s=M,a=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||Ni;if(!o){var l=s.alternate,u=l!==null&&l.memoizedState!==null||Le;l=Ni;var c=Le;if(Ni=o,(Le=u)&&!c)for(M=s;M!==null;)o=M,u=o.child,o.tag===22&&o.memoizedState!==null?Vd(s):u!==null?(u.return=o,M=u):Vd(s);for(;a!==null;)M=a,Rp(a),a=a.sibling;M=s,Ni=l,Le=c}Hd(t)}else s.subtreeFlags&8772&&a!==null?(a.return=s,M=a):Hd(t)}}function Hd(t){for(;M!==null;){var e=M;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Le||La(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Le)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:_t(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var a=e.updateQueue;a!==null&&Cd(e,a,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Cd(e,o,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var h=c.memoizedState;if(h!==null){var d=h.dehydrated;d!==null&&Is(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(A(163))}Le||e.flags&512&&Al(e)}catch(p){we(e,e.return,p)}}if(e===t){M=null;break}if(n=e.sibling,n!==null){n.return=e.return,M=n;break}M=e.return}}function Gd(t){for(;M!==null;){var e=M;if(e===t){M=null;break}var n=e.sibling;if(n!==null){n.return=e.return,M=n;break}M=e.return}}function Vd(t){for(;M!==null;){var e=M;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{La(4,e)}catch(u){we(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(u){we(e,s,u)}}var a=e.return;try{Al(e)}catch(u){we(e,a,u)}break;case 5:var o=e.return;try{Al(e)}catch(u){we(e,o,u)}}}catch(u){we(e,e.return,u)}if(e===t){M=null;break}var l=e.sibling;if(l!==null){l.return=e.return,M=l;break}M=e.return}}var fv=Math.ceil,ma=Yt.ReactCurrentDispatcher,Wu=Yt.ReactCurrentOwner,ft=Yt.ReactCurrentBatchConfig,re=0,Oe=null,_e=null,$e=0,tt=0,kr=Nn(0),Ee=0,Gs=null,Gn=0,Ma=0,Ku=0,_s=null,Ve=null,Qu=0,Lr=1/0,zt=null,ga=!1,Dl=null,gn=null,Si=!1,cn=null,va=0,js=0,Ll=null,Vi=-1,Wi=0;function Be(){return re&6?be():Vi!==-1?Vi:Vi=be()}function vn(t){return t.mode&1?re&2&&$e!==0?$e&-$e:Xg.transition!==null?(Wi===0&&(Wi=yf()),Wi):(t=ie,t!==0||(t=window.event,t=t===void 0?16:Sf(t.type)),t):1}function Et(t,e,n,r){if(50<js)throw js=0,Ll=null,Error(A(185));Qs(t,n,r),(!(re&2)||t!==Oe)&&(t===Oe&&(!(re&2)&&(Ma|=n),Ee===4&&on(t,$e)),Ye(t,r),n===1&&re===0&&!(e.mode&1)&&(Lr=be()+500,Ia&&Sn()))}function Ye(t,e){var n=t.callbackNode;Xm(t,e);var r=ea(t,t===Oe?$e:0);if(r===0)n!==null&&td(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&td(n),e===1)t.tag===0?Qg(Wd.bind(null,t)):Gf(Wd.bind(null,t)),Gg(function(){!(re&6)&&Sn()}),n=null;else{switch(wf(r)){case 1:n=bu;break;case 4:n=vf;break;case 16:n=Zi;break;case 536870912:n=xf;break;default:n=Zi}n=qp(n,Dp.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function Dp(t,e){if(Vi=-1,Wi=0,re&6)throw Error(A(327));var n=t.callbackNode;if(Pr()&&t.callbackNode!==n)return null;var r=ea(t,t===Oe?$e:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=xa(t,r);else{e=r;var s=re;re|=2;var a=Mp();(Oe!==t||$e!==e)&&(zt=null,Lr=be()+500,Un(t,e));do try{gv();break}catch(l){Lp(t,l)}while(!0);Iu(),ma.current=a,re=s,_e!==null?e=0:(Oe=null,$e=0,e=Ee)}if(e!==0){if(e===2&&(s=cl(t),s!==0&&(r=s,e=Ml(t,s))),e===1)throw n=Gs,Un(t,0),on(t,r),Ye(t,be()),n;if(e===6)on(t,r);else{if(s=t.current.alternate,!(r&30)&&!pv(s)&&(e=xa(t,r),e===2&&(a=cl(t),a!==0&&(r=a,e=Ml(t,a))),e===1))throw n=Gs,Un(t,0),on(t,r),Ye(t,be()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(A(345));case 2:An(t,Ve,zt);break;case 3:if(on(t,r),(r&130023424)===r&&(e=Qu+500-be(),10<e)){if(ea(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){Be(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=xl(An.bind(null,t,Ve,zt),e);break}An(t,Ve,zt);break;case 4:if(on(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-St(r);a=1<<o,o=e[o],o>s&&(s=o),r&=~a}if(r=s,r=be()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*fv(r/1960))-r,10<r){t.timeoutHandle=xl(An.bind(null,t,Ve,zt),r);break}An(t,Ve,zt);break;case 5:An(t,Ve,zt);break;default:throw Error(A(329))}}}return Ye(t,be()),t.callbackNode===n?Dp.bind(null,t):null}function Ml(t,e){var n=_s;return t.current.memoizedState.isDehydrated&&(Un(t,e).flags|=256),t=xa(t,e),t!==2&&(e=Ve,Ve=n,e!==null&&Ul(e)),t}function Ul(t){Ve===null?Ve=t:Ve.push.apply(Ve,t)}function pv(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],a=s.getSnapshot;s=s.value;try{if(!Ct(a(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function on(t,e){for(e&=~Ku,e&=~Ma,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-St(e),r=1<<n;t[n]=-1,e&=~r}}function Wd(t){if(re&6)throw Error(A(327));Pr();var e=ea(t,0);if(!(e&1))return Ye(t,be()),null;var n=xa(t,e);if(t.tag!==0&&n===2){var r=cl(t);r!==0&&(e=r,n=Ml(t,r))}if(n===1)throw n=Gs,Un(t,0),on(t,e),Ye(t,be()),n;if(n===6)throw Error(A(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,An(t,Ve,zt),Ye(t,be()),null}function Xu(t,e){var n=re;re|=1;try{return t(e)}finally{re=n,re===0&&(Lr=be()+500,Ia&&Sn())}}function Vn(t){cn!==null&&cn.tag===0&&!(re&6)&&Pr();var e=re;re|=1;var n=ft.transition,r=ie;try{if(ft.transition=null,ie=1,t)return t()}finally{ie=r,ft.transition=n,re=e,!(re&6)&&Sn()}}function Ju(){tt=kr.current,ce(kr)}function Un(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,Hg(n)),_e!==null)for(n=_e.return;n!==null;){var r=n;switch(Tu(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&ia();break;case 3:Rr(),ce(Xe),ce(Me),zu();break;case 5:Uu(r);break;case 4:Rr();break;case 13:ce(ve);break;case 19:ce(ve);break;case 10:Ru(r.type._context);break;case 22:case 23:Ju()}n=n.return}if(Oe=t,_e=t=xn(t.current,null),$e=tt=e,Ee=0,Gs=null,Ku=Ma=Gn=0,Ve=_s=null,Ln!==null){for(e=0;e<Ln.length;e++)if(n=Ln[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,a=n.pending;if(a!==null){var o=a.next;a.next=s,r.next=o}n.pending=r}Ln=null}return t}function Lp(t,e){do{var n=_e;try{if(Iu(),qi.current=pa,fa){for(var r=xe.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}fa=!1}if(Hn=0,Ce=Se=xe=null,ws=!1,Fs=0,Wu.current=null,n===null||n.return===null){Ee=1,Gs=e,_e=null;break}e:{var a=t,o=n.return,l=n,u=e;if(e=$e,l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var c=u,h=l,d=h.tag;if(!(h.mode&1)&&(d===0||d===11||d===15)){var p=h.alternate;p?(h.updateQueue=p.updateQueue,h.memoizedState=p.memoizedState,h.lanes=p.lanes):(h.updateQueue=null,h.memoizedState=null)}var v=Id(o);if(v!==null){v.flags&=-257,Rd(v,o,l,a,e),v.mode&1&&Ad(a,c,e),e=v,u=c;var x=e.updateQueue;if(x===null){var b=new Set;b.add(u),e.updateQueue=b}else x.add(u);break e}else{if(!(e&1)){Ad(a,c,e),Yu();break e}u=Error(A(426))}}else if(pe&&l.mode&1){var k=Id(o);if(k!==null){!(k.flags&65536)&&(k.flags|=256),Rd(k,o,l,a,e),$u(Dr(u,l));break e}}a=u=Dr(u,l),Ee!==4&&(Ee=2),_s===null?_s=[a]:_s.push(a),a=o;do{switch(a.tag){case 3:a.flags|=65536,e&=-e,a.lanes|=e;var g=wp(a,u,e);Ed(a,g);break e;case 1:l=u;var m=a.type,f=a.stateNode;if(!(a.flags&128)&&(typeof m.getDerivedStateFromError=="function"||f!==null&&typeof f.componentDidCatch=="function"&&(gn===null||!gn.has(f)))){a.flags|=65536,e&=-e,a.lanes|=e;var y=bp(a,l,e);Ed(a,y);break e}}a=a.return}while(a!==null)}zp(n)}catch(_){e=_,_e===n&&n!==null&&(_e=n=n.return);continue}break}while(!0)}function Mp(){var t=ma.current;return ma.current=pa,t===null?pa:t}function Yu(){(Ee===0||Ee===3||Ee===2)&&(Ee=4),Oe===null||!(Gn&268435455)&&!(Ma&268435455)||on(Oe,$e)}function xa(t,e){var n=re;re|=2;var r=Mp();(Oe!==t||$e!==e)&&(zt=null,Un(t,e));do try{mv();break}catch(s){Lp(t,s)}while(!0);if(Iu(),re=n,ma.current=r,_e!==null)throw Error(A(261));return Oe=null,$e=0,Ee}function mv(){for(;_e!==null;)Up(_e)}function gv(){for(;_e!==null&&!Bm();)Up(_e)}function Up(t){var e=Fp(t.alternate,t,tt);t.memoizedProps=t.pendingProps,e===null?zp(t):_e=e,Wu.current=null}function zp(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=uv(n,e),n!==null){n.flags&=32767,_e=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Ee=6,_e=null;return}}else if(n=lv(n,e,tt),n!==null){_e=n;return}if(e=e.sibling,e!==null){_e=e;return}_e=e=t}while(e!==null);Ee===0&&(Ee=5)}function An(t,e,n){var r=ie,s=ft.transition;try{ft.transition=null,ie=1,vv(t,e,n,r)}finally{ft.transition=s,ie=r}return null}function vv(t,e,n,r){do Pr();while(cn!==null);if(re&6)throw Error(A(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(A(177));t.callbackNode=null,t.callbackPriority=0;var a=n.lanes|n.childLanes;if(Jm(t,a),t===Oe&&(_e=Oe=null,$e=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Si||(Si=!0,qp(Zi,function(){return Pr(),null})),a=(n.flags&15990)!==0,n.subtreeFlags&15990||a){a=ft.transition,ft.transition=null;var o=ie;ie=1;var l=re;re|=4,Wu.current=null,dv(t,n),Ip(n,t),Lg(gl),ta=!!ml,gl=ml=null,t.current=n,hv(n),Fm(),re=l,ie=o,ft.transition=a}else t.current=n;if(Si&&(Si=!1,cn=t,va=s),a=t.pendingLanes,a===0&&(gn=null),Gm(n.stateNode),Ye(t,be()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(ga)throw ga=!1,t=Dl,Dl=null,t;return va&1&&t.tag!==0&&Pr(),a=t.pendingLanes,a&1?t===Ll?js++:(js=0,Ll=t):js=0,Sn(),null}function Pr(){if(cn!==null){var t=wf(va),e=ft.transition,n=ie;try{if(ft.transition=null,ie=16>t?16:t,cn===null)var r=!1;else{if(t=cn,cn=null,va=0,re&6)throw Error(A(331));var s=re;for(re|=4,M=t.current;M!==null;){var a=M,o=a.child;if(M.flags&16){var l=a.deletions;if(l!==null){for(var u=0;u<l.length;u++){var c=l[u];for(M=c;M!==null;){var h=M;switch(h.tag){case 0:case 11:case 15:bs(8,h,a)}var d=h.child;if(d!==null)d.return=h,M=d;else for(;M!==null;){h=M;var p=h.sibling,v=h.return;if(Tp(h),h===c){M=null;break}if(p!==null){p.return=v,M=p;break}M=v}}}var x=a.alternate;if(x!==null){var b=x.child;if(b!==null){x.child=null;do{var k=b.sibling;b.sibling=null,b=k}while(b!==null)}}M=a}}if(a.subtreeFlags&2064&&o!==null)o.return=a,M=o;else e:for(;M!==null;){if(a=M,a.flags&2048)switch(a.tag){case 0:case 11:case 15:bs(9,a,a.return)}var g=a.sibling;if(g!==null){g.return=a.return,M=g;break e}M=a.return}}var m=t.current;for(M=m;M!==null;){o=M;var f=o.child;if(o.subtreeFlags&2064&&f!==null)f.return=o,M=f;else e:for(o=m;M!==null;){if(l=M,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:La(9,l)}}catch(_){we(l,l.return,_)}if(l===o){M=null;break e}var y=l.sibling;if(y!==null){y.return=l.return,M=y;break e}M=l.return}}if(re=s,Sn(),Rt&&typeof Rt.onPostCommitFiberRoot=="function")try{Rt.onPostCommitFiberRoot(Oa,t)}catch{}r=!0}return r}finally{ie=n,ft.transition=e}}return!1}function Kd(t,e,n){e=Dr(n,e),e=wp(t,e,1),t=mn(t,e,1),e=Be(),t!==null&&(Qs(t,1,e),Ye(t,e))}function we(t,e,n){if(t.tag===3)Kd(t,t,n);else for(;e!==null;){if(e.tag===3){Kd(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(gn===null||!gn.has(r))){t=Dr(n,t),t=bp(e,t,1),e=mn(e,t,1),t=Be(),e!==null&&(Qs(e,1,t),Ye(e,t));break}}e=e.return}}function xv(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Be(),t.pingedLanes|=t.suspendedLanes&n,Oe===t&&($e&n)===n&&(Ee===4||Ee===3&&($e&130023424)===$e&&500>be()-Qu?Un(t,0):Ku|=n),Ye(t,e)}function Bp(t,e){e===0&&(t.mode&1?(e=gi,gi<<=1,!(gi&130023424)&&(gi=4194304)):e=1);var n=Be();t=Qt(t,e),t!==null&&(Qs(t,e,n),Ye(t,n))}function yv(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),Bp(t,n)}function wv(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(A(314))}r!==null&&r.delete(e),Bp(t,n)}var Fp;Fp=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Xe.current)Qe=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Qe=!1,ov(t,e,n);Qe=!!(t.flags&131072)}else Qe=!1,pe&&e.flags&1048576&&Vf(e,la,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Gi(t,e),t=e.pendingProps;var s=$r(e,Me.current);Or(e,n),s=Fu(null,e,r,t,s,n);var a=qu();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Je(r)?(a=!0,aa(e)):a=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Lu(e),s.updater=Da,e.stateNode=s,s._reactInternals=e,Nl(e,r,t,n),e=Cl(null,e,r,!0,a,n)):(e.tag=0,pe&&a&&Pu(e),ze(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Gi(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=_v(r),t=_t(r,t),s){case 0:e=El(null,e,r,t,n);break e;case 1:e=Md(null,e,r,t,n);break e;case 11:e=Dd(null,e,r,t,n);break e;case 14:e=Ld(null,e,r,_t(r.type,t),n);break e}throw Error(A(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:_t(r,s),El(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:_t(r,s),Md(t,e,r,s,n);case 3:e:{if(Np(e),t===null)throw Error(A(387));r=e.pendingProps,a=e.memoizedState,s=a.element,Yf(t,e),da(e,r,null,n);var o=e.memoizedState;if(r=o.element,a.isDehydrated)if(a={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=a,e.memoizedState=a,e.flags&256){s=Dr(Error(A(423)),e),e=Ud(t,e,r,n,s);break e}else if(r!==s){s=Dr(Error(A(424)),e),e=Ud(t,e,r,n,s);break e}else for(rt=pn(e.stateNode.containerInfo.firstChild),st=e,pe=!0,Nt=null,n=Xf(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Ar(),r===s){e=Xt(t,e,n);break e}ze(t,e,r,n)}e=e.child}return e;case 5:return Zf(e),t===null&&_l(e),r=e.type,s=e.pendingProps,a=t!==null?t.memoizedProps:null,o=s.children,vl(r,s)?o=null:a!==null&&vl(r,a)&&(e.flags|=32),kp(t,e),ze(t,e,o,n),e.child;case 6:return t===null&&_l(e),null;case 13:return Sp(t,e,n);case 4:return Mu(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Ir(e,null,r,n):ze(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:_t(r,s),Dd(t,e,r,s,n);case 7:return ze(t,e,e.pendingProps,n),e.child;case 8:return ze(t,e,e.pendingProps.children,n),e.child;case 12:return ze(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,a=e.memoizedProps,o=s.value,oe(ua,r._currentValue),r._currentValue=o,a!==null)if(Ct(a.value,o)){if(a.children===s.children&&!Xe.current){e=Xt(t,e,n);break e}}else for(a=e.child,a!==null&&(a.return=e);a!==null;){var l=a.dependencies;if(l!==null){o=a.child;for(var u=l.firstContext;u!==null;){if(u.context===r){if(a.tag===1){u=Gt(-1,n&-n),u.tag=2;var c=a.updateQueue;if(c!==null){c=c.shared;var h=c.pending;h===null?u.next=u:(u.next=h.next,h.next=u),c.pending=u}}a.lanes|=n,u=a.alternate,u!==null&&(u.lanes|=n),jl(a.return,n,e),l.lanes|=n;break}u=u.next}}else if(a.tag===10)o=a.type===e.type?null:a.child;else if(a.tag===18){if(o=a.return,o===null)throw Error(A(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),jl(o,n,e),o=a.sibling}else o=a.child;if(o!==null)o.return=a;else for(o=a;o!==null;){if(o===e){o=null;break}if(a=o.sibling,a!==null){a.return=o.return,o=a;break}o=o.return}a=o}ze(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,Or(e,n),s=mt(s),r=r(s),e.flags|=1,ze(t,e,r,n),e.child;case 14:return r=e.type,s=_t(r,e.pendingProps),s=_t(r.type,s),Ld(t,e,r,s,n);case 15:return _p(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:_t(r,s),Gi(t,e),e.tag=1,Je(r)?(t=!0,aa(e)):t=!1,Or(e,n),yp(e,r,s),Nl(e,r,s,n),Cl(null,e,r,!0,t,n);case 19:return Ep(t,e,n);case 22:return jp(t,e,n)}throw Error(A(156,e.tag))};function qp(t,e){return gf(t,e)}function bv(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ht(t,e,n,r){return new bv(t,e,n,r)}function Zu(t){return t=t.prototype,!(!t||!t.isReactComponent)}function _v(t){if(typeof t=="function")return Zu(t)?1:0;if(t!=null){if(t=t.$$typeof,t===xu)return 11;if(t===yu)return 14}return 2}function xn(t,e){var n=t.alternate;return n===null?(n=ht(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Ki(t,e,n,r,s,a){var o=2;if(r=t,typeof t=="function")Zu(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case pr:return zn(n.children,s,a,e);case vu:o=8,s|=8;break;case Qo:return t=ht(12,n,e,s|2),t.elementType=Qo,t.lanes=a,t;case Xo:return t=ht(13,n,e,s),t.elementType=Xo,t.lanes=a,t;case Jo:return t=ht(19,n,e,s),t.elementType=Jo,t.lanes=a,t;case Yh:return Ua(n,s,a,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Xh:o=10;break e;case Jh:o=9;break e;case xu:o=11;break e;case yu:o=14;break e;case rn:o=16,r=null;break e}throw Error(A(130,t==null?t:typeof t,""))}return e=ht(o,n,e,s),e.elementType=t,e.type=r,e.lanes=a,e}function zn(t,e,n,r){return t=ht(7,t,r,e),t.lanes=n,t}function Ua(t,e,n,r){return t=ht(22,t,r,e),t.elementType=Yh,t.lanes=n,t.stateNode={isHidden:!1},t}function To(t,e,n){return t=ht(6,t,null,e),t.lanes=n,t}function $o(t,e,n){return e=ht(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function jv(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ho(0),this.expirationTimes=ho(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ho(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function ec(t,e,n,r,s,a,o,l,u){return t=new jv(t,e,n,l,u),e===1?(e=1,a===!0&&(e|=8)):e=0,a=ht(3,null,null,e),t.current=a,a.stateNode=t,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Lu(a),t}function kv(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:fr,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function Hp(t){if(!t)return bn;t=t._reactInternals;e:{if(Kn(t)!==t||t.tag!==1)throw Error(A(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Je(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(A(171))}if(t.tag===1){var n=t.type;if(Je(n))return Hf(t,n,e)}return e}function Gp(t,e,n,r,s,a,o,l,u){return t=ec(n,r,!0,t,s,a,o,l,u),t.context=Hp(null),n=t.current,r=Be(),s=vn(n),a=Gt(r,s),a.callback=e??null,mn(n,a,s),t.current.lanes=s,Qs(t,s,r),Ye(t,r),t}function za(t,e,n,r){var s=e.current,a=Be(),o=vn(s);return n=Hp(n),e.context===null?e.context=n:e.pendingContext=n,e=Gt(a,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=mn(s,e,o),t!==null&&(Et(t,s,o,a),Fi(t,s,o)),o}function ya(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Qd(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function tc(t,e){Qd(t,e),(t=t.alternate)&&Qd(t,e)}function Nv(){return null}var Vp=typeof reportError=="function"?reportError:function(t){console.error(t)};function nc(t){this._internalRoot=t}Ba.prototype.render=nc.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(A(409));za(t,e,null,null)};Ba.prototype.unmount=nc.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Vn(function(){za(null,t,null,null)}),e[Kt]=null}};function Ba(t){this._internalRoot=t}Ba.prototype.unstable_scheduleHydration=function(t){if(t){var e=jf();t={blockedOn:null,target:t,priority:e};for(var n=0;n<an.length&&e!==0&&e<an[n].priority;n++);an.splice(n,0,t),n===0&&Nf(t)}};function rc(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Fa(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Xd(){}function Sv(t,e,n,r,s){if(s){if(typeof r=="function"){var a=r;r=function(){var c=ya(o);a.call(c)}}var o=Gp(e,r,t,0,null,!1,!1,"",Xd);return t._reactRootContainer=o,t[Kt]=o.current,Ls(t.nodeType===8?t.parentNode:t),Vn(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var l=r;r=function(){var c=ya(u);l.call(c)}}var u=ec(t,0,!1,null,null,!1,!1,"",Xd);return t._reactRootContainer=u,t[Kt]=u.current,Ls(t.nodeType===8?t.parentNode:t),Vn(function(){za(e,u,n,r)}),u}function qa(t,e,n,r,s){var a=n._reactRootContainer;if(a){var o=a;if(typeof s=="function"){var l=s;s=function(){var u=ya(o);l.call(u)}}za(e,o,t,s)}else o=Sv(n,e,t,s,r);return ya(o)}bf=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=ds(e.pendingLanes);n!==0&&(_u(e,n|1),Ye(e,be()),!(re&6)&&(Lr=be()+500,Sn()))}break;case 13:Vn(function(){var r=Qt(t,1);if(r!==null){var s=Be();Et(r,t,1,s)}}),tc(t,1)}};ju=function(t){if(t.tag===13){var e=Qt(t,134217728);if(e!==null){var n=Be();Et(e,t,134217728,n)}tc(t,134217728)}};_f=function(t){if(t.tag===13){var e=vn(t),n=Qt(t,e);if(n!==null){var r=Be();Et(n,t,e,r)}tc(t,e)}};jf=function(){return ie};kf=function(t,e){var n=ie;try{return ie=t,e()}finally{ie=n}};ol=function(t,e,n){switch(e){case"input":if(el(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=Aa(r);if(!s)throw Error(A(90));ef(r),el(r,s)}}}break;case"textarea":nf(t,n);break;case"select":e=n.value,e!=null&&Nr(t,!!n.multiple,e,!1)}};cf=Xu;df=Vn;var Ev={usingClientEntryPoint:!1,Events:[Js,xr,Aa,lf,uf,Xu]},ss={findFiberByHostInstance:Dn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Cv={bundleType:ss.bundleType,version:ss.version,rendererPackageName:ss.rendererPackageName,rendererConfig:ss.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Yt.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=pf(t),t===null?null:t.stateNode},findFiberByHostInstance:ss.findFiberByHostInstance||Nv,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ei=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ei.isDisabled&&Ei.supportsFiber)try{Oa=Ei.inject(Cv),Rt=Ei}catch{}}at.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Ev;at.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!rc(e))throw Error(A(200));return kv(t,e,null,n)};at.createRoot=function(t,e){if(!rc(t))throw Error(A(299));var n=!1,r="",s=Vp;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=ec(t,1,!1,null,null,n,!1,r,s),t[Kt]=e.current,Ls(t.nodeType===8?t.parentNode:t),new nc(e)};at.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(A(188)):(t=Object.keys(t).join(","),Error(A(268,t)));return t=pf(e),t=t===null?null:t.stateNode,t};at.flushSync=function(t){return Vn(t)};at.hydrate=function(t,e,n){if(!Fa(e))throw Error(A(200));return qa(null,t,e,!0,n)};at.hydrateRoot=function(t,e,n){if(!rc(t))throw Error(A(405));var r=n!=null&&n.hydratedSources||null,s=!1,a="",o=Vp;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(a=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=Gp(e,null,t,1,n??null,s,!1,a,o),t[Kt]=e.current,Ls(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new Ba(e)};at.render=function(t,e,n){if(!Fa(e))throw Error(A(200));return qa(null,t,e,!1,n)};at.unmountComponentAtNode=function(t){if(!Fa(t))throw Error(A(40));return t._reactRootContainer?(Vn(function(){qa(null,null,t,!1,function(){t._reactRootContainer=null,t[Kt]=null})}),!0):!1};at.unstable_batchedUpdates=Xu;at.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Fa(n))throw Error(A(200));if(t==null||t._reactInternals===void 0)throw Error(A(38));return qa(t,e,n,!1,r)};at.version="18.3.1-next-f1338f8080-20240426";function Wp(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Wp)}catch(t){console.error(t)}}Wp(),Vh.exports=at;var Ov=Vh.exports,Kp,Jd=Ov;Kp=Jd.createRoot,Jd.hydrateRoot;const Pv="modulepreload",Tv=function(t){return"/manso0r-bhai-billing-app/"+t},Yd={},Zs=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.allSettled(n.map(u=>{if(u=Tv(u),u in Yd)return;Yd[u]=!0;const c=u.endsWith(".css"),h=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${h}`))return;const d=document.createElement("link");if(d.rel=c?"stylesheet":Pv,c||(d.as="script"),d.crossOrigin="",d.href=u,l&&d.setAttribute("nonce",l),document.head.appendChild(d),c)return new Promise((p,v)=>{d.addEventListener("load",p),d.addEventListener("error",()=>v(new Error(`Unable to preload CSS for ${u}`)))})}))}function a(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return s.then(o=>{for(const l of o||[])l.status==="rejected"&&a(l.reason);return e().catch(a)})},$v=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>Zs(async()=>{const{default:r}=await Promise.resolve().then(()=>Hr);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)};class sc extends Error{constructor(e,n="FunctionsError",r){super(e),this.name=n,this.context=r}}class Av extends sc{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class Zd extends sc{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class eh extends sc{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var zl;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(zl||(zl={}));var Iv=function(t,e,n,r){function s(a){return a instanceof n?a:new n(function(o){o(a)})}return new(n||(n=Promise))(function(a,o){function l(h){try{c(r.next(h))}catch(d){o(d)}}function u(h){try{c(r.throw(h))}catch(d){o(d)}}function c(h){h.done?a(h.value):s(h.value).then(l,u)}c((r=r.apply(t,e||[])).next())})};class Rv{constructor(e,{headers:n={},customFetch:r,region:s=zl.Any}={}){this.url=e,this.headers=n,this.region=s,this.fetch=$v(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,n={}){var r;return Iv(this,void 0,void 0,function*(){try{const{headers:s,method:a,body:o}=n;let l={},{region:u}=n;u||(u=this.region);const c=new URL(`${this.url}/${e}`);u&&u!=="any"&&(l["x-region"]=u,c.searchParams.set("forceFunctionRegion",u));let h;o&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(l["Content-Type"]="application/octet-stream",h=o):typeof o=="string"?(l["Content-Type"]="text/plain",h=o):typeof FormData<"u"&&o instanceof FormData?h=o:(l["Content-Type"]="application/json",h=JSON.stringify(o)));const d=yield this.fetch(c.toString(),{method:a||"POST",headers:Object.assign(Object.assign(Object.assign({},l),this.headers),s),body:h}).catch(b=>{throw new Av(b)}),p=d.headers.get("x-relay-error");if(p&&p==="true")throw new Zd(d);if(!d.ok)throw new eh(d);let v=((r=d.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),x;return v==="application/json"?x=yield d.json():v==="application/octet-stream"?x=yield d.blob():v==="text/event-stream"?x=d:v==="multipart/form-data"?x=yield d.formData():x=yield d.text(),{data:x,error:null,response:d}}catch(s){return{data:null,error:s,response:s instanceof eh||s instanceof Zd?s.context:void 0}}})}}var We={},ic={},Ha={},ei={},Ga={},Va={},Dv=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Mr=Dv();const Lv=Mr.fetch,Qp=Mr.fetch.bind(Mr),Xp=Mr.Headers,Mv=Mr.Request,Uv=Mr.Response,Hr=Object.freeze(Object.defineProperty({__proto__:null,Headers:Xp,Request:Mv,Response:Uv,default:Qp,fetch:Lv},Symbol.toStringTag,{value:"Module"})),zv=rm(Hr);var Wa={};Object.defineProperty(Wa,"__esModule",{value:!0});let Bv=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};Wa.default=Bv;var Jp=pt&&pt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Va,"__esModule",{value:!0});const Fv=Jp(zv),qv=Jp(Wa);let Hv=class{constructor(e){var n,r;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=(n=e.shouldThrowOnError)!==null&&n!==void 0?n:!1,this.signal=e.signal,this.isMaybeSingle=(r=e.isMaybeSingle)!==null&&r!==void 0?r:!1,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=Fv.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,n){return this.headers=new Headers(this.headers),this.headers.set(e,n),this}then(e,n){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const r=this.fetch;let s=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async a=>{var o,l,u,c;let h=null,d=null,p=null,v=a.status,x=a.statusText;if(a.ok){if(this.method!=="HEAD"){const m=await a.text();m===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((o=this.headers.get("Accept"))===null||o===void 0)&&o.includes("application/vnd.pgrst.plan+text"))?d=m:d=JSON.parse(m))}const k=(l=this.headers.get("Prefer"))===null||l===void 0?void 0:l.match(/count=(exact|planned|estimated)/),g=(u=a.headers.get("content-range"))===null||u===void 0?void 0:u.split("/");k&&g&&g.length>1&&(p=parseInt(g[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(d)&&(d.length>1?(h={code:"PGRST116",details:`Results contain ${d.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},d=null,p=null,v=406,x="Not Acceptable"):d.length===1?d=d[0]:d=null)}else{const k=await a.text();try{h=JSON.parse(k),Array.isArray(h)&&a.status===404&&(d=[],h=null,v=200,x="OK")}catch{a.status===404&&k===""?(v=204,x="No Content"):h={message:k}}if(h&&this.isMaybeSingle&&(!((c=h==null?void 0:h.details)===null||c===void 0)&&c.includes("0 rows"))&&(h=null,v=200,x="OK"),h&&this.shouldThrowOnError)throw new qv.default(h)}return{error:h,data:d,count:p,status:v,statusText:x}});return this.shouldThrowOnError||(s=s.catch(a=>{var o,l,u;return{error:{message:`${(o=a==null?void 0:a.name)!==null&&o!==void 0?o:"FetchError"}: ${a==null?void 0:a.message}`,details:`${(l=a==null?void 0:a.stack)!==null&&l!==void 0?l:""}`,hint:"",code:`${(u=a==null?void 0:a.code)!==null&&u!==void 0?u:""}`},data:null,count:null,status:0,statusText:""}})),s.then(e,n)}returns(){return this}overrideTypes(){return this}};Va.default=Hv;var Gv=pt&&pt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Ga,"__esModule",{value:!0});const Vv=Gv(Va);let Wv=class extends Vv.default{select(e){let n=!1;const r=(e??"*").split("").map(s=>/\s/.test(s)&&!n?"":(s==='"'&&(n=!n),s)).join("");return this.url.searchParams.set("select",r),this.headers.append("Prefer","return=representation"),this}order(e,{ascending:n=!0,nullsFirst:r,foreignTable:s,referencedTable:a=s}={}){const o=a?`${a}.order`:"order",l=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${l?`${l},`:""}${e}.${n?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:n,referencedTable:r=n}={}){const s=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(s,`${e}`),this}range(e,n,{foreignTable:r,referencedTable:s=r}={}){const a=typeof s>"u"?"offset":`${s}.offset`,o=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(a,`${e}`),this.url.searchParams.set(o,`${n-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:e=!1,verbose:n=!1,settings:r=!1,buffers:s=!1,wal:a=!1,format:o="text"}={}){var l;const u=[e?"analyze":null,n?"verbose":null,r?"settings":null,s?"buffers":null,a?"wal":null].filter(Boolean).join("|"),c=(l=this.headers.get("Accept"))!==null&&l!==void 0?l:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${o}; for="${c}"; options=${u};`),o==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${e}`),this}};Ga.default=Wv;var Kv=pt&&pt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(ei,"__esModule",{value:!0});const Qv=Kv(Ga);let Xv=class extends Qv.default{eq(e,n){return this.url.searchParams.append(e,`eq.${n}`),this}neq(e,n){return this.url.searchParams.append(e,`neq.${n}`),this}gt(e,n){return this.url.searchParams.append(e,`gt.${n}`),this}gte(e,n){return this.url.searchParams.append(e,`gte.${n}`),this}lt(e,n){return this.url.searchParams.append(e,`lt.${n}`),this}lte(e,n){return this.url.searchParams.append(e,`lte.${n}`),this}like(e,n){return this.url.searchParams.append(e,`like.${n}`),this}likeAllOf(e,n){return this.url.searchParams.append(e,`like(all).{${n.join(",")}}`),this}likeAnyOf(e,n){return this.url.searchParams.append(e,`like(any).{${n.join(",")}}`),this}ilike(e,n){return this.url.searchParams.append(e,`ilike.${n}`),this}ilikeAllOf(e,n){return this.url.searchParams.append(e,`ilike(all).{${n.join(",")}}`),this}ilikeAnyOf(e,n){return this.url.searchParams.append(e,`ilike(any).{${n.join(",")}}`),this}is(e,n){return this.url.searchParams.append(e,`is.${n}`),this}in(e,n){const r=Array.from(new Set(n)).map(s=>typeof s=="string"&&new RegExp("[,()]").test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(e,`in.(${r})`),this}contains(e,n){return typeof n=="string"?this.url.searchParams.append(e,`cs.${n}`):Array.isArray(n)?this.url.searchParams.append(e,`cs.{${n.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(n)}`),this}containedBy(e,n){return typeof n=="string"?this.url.searchParams.append(e,`cd.${n}`):Array.isArray(n)?this.url.searchParams.append(e,`cd.{${n.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(n)}`),this}rangeGt(e,n){return this.url.searchParams.append(e,`sr.${n}`),this}rangeGte(e,n){return this.url.searchParams.append(e,`nxl.${n}`),this}rangeLt(e,n){return this.url.searchParams.append(e,`sl.${n}`),this}rangeLte(e,n){return this.url.searchParams.append(e,`nxr.${n}`),this}rangeAdjacent(e,n){return this.url.searchParams.append(e,`adj.${n}`),this}overlaps(e,n){return typeof n=="string"?this.url.searchParams.append(e,`ov.${n}`):this.url.searchParams.append(e,`ov.{${n.join(",")}}`),this}textSearch(e,n,{config:r,type:s}={}){let a="";s==="plain"?a="pl":s==="phrase"?a="ph":s==="websearch"&&(a="w");const o=r===void 0?"":`(${r})`;return this.url.searchParams.append(e,`${a}fts${o}.${n}`),this}match(e){return Object.entries(e).forEach(([n,r])=>{this.url.searchParams.append(n,`eq.${r}`)}),this}not(e,n,r){return this.url.searchParams.append(e,`not.${n}.${r}`),this}or(e,{foreignTable:n,referencedTable:r=n}={}){const s=r?`${r}.or`:"or";return this.url.searchParams.append(s,`(${e})`),this}filter(e,n,r){return this.url.searchParams.append(e,`${n}.${r}`),this}};ei.default=Xv;var Jv=pt&&pt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Ha,"__esModule",{value:!0});const is=Jv(ei);let Yv=class{constructor(e,{headers:n={},schema:r,fetch:s}){this.url=e,this.headers=new Headers(n),this.schema=r,this.fetch=s}select(e,{head:n=!1,count:r}={}){const s=n?"HEAD":"GET";let a=!1;const o=(e??"*").split("").map(l=>/\s/.test(l)&&!a?"":(l==='"'&&(a=!a),l)).join("");return this.url.searchParams.set("select",o),r&&this.headers.append("Prefer",`count=${r}`),new is.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(e,{count:n,defaultToNull:r=!0}={}){var s;const a="POST";if(n&&this.headers.append("Prefer",`count=${n}`),r||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const o=e.reduce((l,u)=>l.concat(Object.keys(u)),[]);if(o.length>0){const l=[...new Set(o)].map(u=>`"${u}"`);this.url.searchParams.set("columns",l.join(","))}}return new is.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}upsert(e,{onConflict:n,ignoreDuplicates:r=!1,count:s,defaultToNull:a=!0}={}){var o;const l="POST";if(this.headers.append("Prefer",`resolution=${r?"ignore":"merge"}-duplicates`),n!==void 0&&this.url.searchParams.set("on_conflict",n),s&&this.headers.append("Prefer",`count=${s}`),a||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const u=e.reduce((c,h)=>c.concat(Object.keys(h)),[]);if(u.length>0){const c=[...new Set(u)].map(h=>`"${h}"`);this.url.searchParams.set("columns",c.join(","))}}return new is.default({method:l,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}update(e,{count:n}={}){var r;const s="PATCH";return n&&this.headers.append("Prefer",`count=${n}`),new is.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}delete({count:e}={}){var n;const r="DELETE";return e&&this.headers.append("Prefer",`count=${e}`),new is.default({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}};Ha.default=Yv;var Yp=pt&&pt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(ic,"__esModule",{value:!0});const Zv=Yp(Ha),ex=Yp(ei);let tx=class Zp{constructor(e,{headers:n={},schema:r,fetch:s}={}){this.url=e,this.headers=new Headers(n),this.schemaName=r,this.fetch=s}from(e){const n=new URL(`${this.url}/${e}`);return new Zv.default(n,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new Zp(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,n={},{head:r=!1,get:s=!1,count:a}={}){var o;let l;const u=new URL(`${this.url}/rpc/${e}`);let c;r||s?(l=r?"HEAD":"GET",Object.entries(n).filter(([d,p])=>p!==void 0).map(([d,p])=>[d,Array.isArray(p)?`{${p.join(",")}}`:`${p}`]).forEach(([d,p])=>{u.searchParams.append(d,p)})):(l="POST",c=n);const h=new Headers(this.headers);return a&&h.set("Prefer",`count=${a}`),new ex.default({method:l,url:u,headers:h,schema:this.schemaName,body:c,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}};ic.default=tx;var Gr=pt&&pt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(We,"__esModule",{value:!0});We.PostgrestError=We.PostgrestBuilder=We.PostgrestTransformBuilder=We.PostgrestFilterBuilder=We.PostgrestQueryBuilder=We.PostgrestClient=void 0;const e0=Gr(ic);We.PostgrestClient=e0.default;const t0=Gr(Ha);We.PostgrestQueryBuilder=t0.default;const n0=Gr(ei);We.PostgrestFilterBuilder=n0.default;const r0=Gr(Ga);We.PostgrestTransformBuilder=r0.default;const s0=Gr(Va);We.PostgrestBuilder=s0.default;const i0=Gr(Wa);We.PostgrestError=i0.default;var nx=We.default={PostgrestClient:e0.default,PostgrestQueryBuilder:t0.default,PostgrestFilterBuilder:n0.default,PostgrestTransformBuilder:r0.default,PostgrestBuilder:s0.default,PostgrestError:i0.default};const{PostgrestClient:rx,PostgrestQueryBuilder:Xk,PostgrestFilterBuilder:Jk,PostgrestTransformBuilder:Yk,PostgrestBuilder:Zk,PostgrestError:eN}=nx;class sx{static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const n=process.versions;if(n&&n.node){const r=n.node,s=parseInt(r.replace(/^v/,"").split(".")[0]);return s>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${s} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${s} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let n=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(n+=`

Suggested solution: ${e.workaround}`),new Error(n)}static createWebSocket(e,n){const r=this.getWebSocketConstructor();return new r(e,n)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const ix="2.15.5",ax=`realtime-js/${ix}`,ox="1.0.0",Bl=1e4,lx=1e3,ux=100;var ks;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(ks||(ks={}));var ke;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(ke||(ke={}));var kt;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(kt||(kt={}));var Fl;(function(t){t.websocket="websocket"})(Fl||(Fl={}));var Rn;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(Rn||(Rn={}));class cx{constructor(){this.HEADER_LENGTH=1}decode(e,n){return e.constructor===ArrayBuffer?n(this._binaryDecode(e)):n(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const n=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,n,r)}_decodeBroadcast(e,n,r){const s=n.getUint8(1),a=n.getUint8(2);let o=this.HEADER_LENGTH+2;const l=r.decode(e.slice(o,o+s));o=o+s;const u=r.decode(e.slice(o,o+a));o=o+a;const c=JSON.parse(r.decode(e.slice(o,e.byteLength)));return{ref:null,topic:l,event:u,payload:c}}}class a0{constructor(e,n){this.callback=e,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var ae;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(ae||(ae={}));const th=(t,e,n={})=>{var r;const s=(r=n.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(e).reduce((a,o)=>(a[o]=dx(o,t,e,s),a),{})},dx=(t,e,n,r)=>{const s=e.find(l=>l.name===t),a=s==null?void 0:s.type,o=n[t];return a&&!r.includes(a)?o0(a,o):ql(o)},o0=(t,e)=>{if(t.charAt(0)==="_"){const n=t.slice(1,t.length);return mx(e,n)}switch(t){case ae.bool:return hx(e);case ae.float4:case ae.float8:case ae.int2:case ae.int4:case ae.int8:case ae.numeric:case ae.oid:return fx(e);case ae.json:case ae.jsonb:return px(e);case ae.timestamp:return gx(e);case ae.abstime:case ae.date:case ae.daterange:case ae.int4range:case ae.int8range:case ae.money:case ae.reltime:case ae.text:case ae.time:case ae.timestamptz:case ae.timetz:case ae.tsrange:case ae.tstzrange:return ql(e);default:return ql(e)}},ql=t=>t,hx=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},fx=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},px=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},mx=(t,e)=>{if(typeof t!="string")return t;const n=t.length-1,r=t[n];if(t[0]==="{"&&r==="}"){let a;const o=t.slice(1,n);try{a=JSON.parse("["+o+"]")}catch{a=o?o.split(","):[]}return a.map(l=>o0(e,l))}return t},gx=t=>typeof t=="string"?t.replace(" ","T"):t,l0=t=>{let e=t;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")+"/api/broadcast"};class Ao{constructor(e,n,r={},s=Bl){this.channel=e,this.event=n,this.payload=r,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,n){var r;return this._hasReceived(e)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:n}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var nh;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(nh||(nh={}));class Ns{constructor(e,n){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},s=>{const{onJoin:a,onLeave:o,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Ns.syncState(this.state,s,a,o),this.pendingDiffs.forEach(u=>{this.state=Ns.syncDiff(this.state,u,a,o)}),this.pendingDiffs=[],l()}),this.channel._on(r.diff,{},s=>{const{onJoin:a,onLeave:o,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=Ns.syncDiff(this.state,s,a,o),l())}),this.onJoin((s,a,o)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:a,newPresences:o})}),this.onLeave((s,a,o)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:a,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,n,r,s){const a=this.cloneDeep(e),o=this.transformState(n),l={},u={};return this.map(a,(c,h)=>{o[c]||(u[c]=h)}),this.map(o,(c,h)=>{const d=a[c];if(d){const p=h.map(k=>k.presence_ref),v=d.map(k=>k.presence_ref),x=h.filter(k=>v.indexOf(k.presence_ref)<0),b=d.filter(k=>p.indexOf(k.presence_ref)<0);x.length>0&&(l[c]=x),b.length>0&&(u[c]=b)}else l[c]=h}),this.syncDiff(a,{joins:l,leaves:u},r,s)}static syncDiff(e,n,r,s){const{joins:a,leaves:o}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),s||(s=()=>{}),this.map(a,(l,u)=>{var c;const h=(c=e[l])!==null&&c!==void 0?c:[];if(e[l]=this.cloneDeep(u),h.length>0){const d=e[l].map(v=>v.presence_ref),p=h.filter(v=>d.indexOf(v.presence_ref)<0);e[l].unshift(...p)}r(l,h,u)}),this.map(o,(l,u)=>{let c=e[l];if(!c)return;const h=u.map(d=>d.presence_ref);c=c.filter(d=>h.indexOf(d.presence_ref)<0),e[l]=c,s(l,c,u),c.length===0&&delete e[l]}),e}static map(e,n){return Object.getOwnPropertyNames(e).map(r=>n(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((n,r)=>{const s=e[r];return"metas"in s?n[r]=s.metas.map(a=>(a.presence_ref=a.phx_ref,delete a.phx_ref,delete a.phx_ref_prev,a)):n[r]=s,n},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var rh;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(rh||(rh={}));var Ss;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(Ss||(Ss={}));var Bt;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(Bt||(Bt={}));class ac{constructor(e,n={config:{}},r){this.topic=e,this.params=n,this.socket=r,this.bindings={},this.state=ke.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new Ao(this,kt.join,this.params,this.timeout),this.rejoinTimer=new a0(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=ke.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=ke.closed,this.socket._remove(this)}),this._onError(s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=ke.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=ke.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=ke.errored,this.rejoinTimer.scheduleTimeout())}),this._on(kt.reply,{},(s,a)=>{this._trigger(this._replyEventName(a),s)}),this.presence=new Ns(this),this.broadcastEndpointURL=l0(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(e,n=this.timeout){var r,s,a;if(this.socket.isConnected()||this.socket.connect(),this.state==ke.closed){const{config:{broadcast:o,presence:l,private:u}}=this.params,c=(s=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(v=>v.filter))!==null&&s!==void 0?s:[],h=!!this.bindings[Ss.PRESENCE]&&this.bindings[Ss.PRESENCE].length>0||((a=this.params.config.presence)===null||a===void 0?void 0:a.enabled)===!0,d={},p={broadcast:o,presence:Object.assign(Object.assign({},l),{enabled:h}),postgres_changes:c,private:u};this.socket.accessTokenValue&&(d.access_token=this.socket.accessTokenValue),this._onError(v=>e==null?void 0:e(Bt.CHANNEL_ERROR,v)),this._onClose(()=>e==null?void 0:e(Bt.CLOSED)),this.updateJoinPayload(Object.assign({config:p},d)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:v})=>{var x;if(this.socket.setAuth(),v===void 0){e==null||e(Bt.SUBSCRIBED);return}else{const b=this.bindings.postgres_changes,k=(x=b==null?void 0:b.length)!==null&&x!==void 0?x:0,g=[];for(let m=0;m<k;m++){const f=b[m],{filter:{event:y,schema:_,table:w,filter:N}}=f,I=v&&v[m];if(I&&I.event===y&&I.schema===_&&I.table===w&&I.filter===N)g.push(Object.assign(Object.assign({},f),{id:I.id}));else{this.unsubscribe(),this.state=ke.errored,e==null||e(Bt.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=g,e&&e(Bt.SUBSCRIBED);return}}).receive("error",v=>{this.state=ke.errored,e==null||e(Bt.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(v).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(Bt.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,n={}){return await this.send({type:"presence",event:"track",payload:e},n.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,n,r){return this.state===ke.joined&&e===Ss.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,n,r)}async send(e,n={}){var r,s;if(!this._canPush()&&e.type==="broadcast"){const{event:a,payload:o}=e,u={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:a,payload:o,private:this.private}]})};try{const c=await this._fetchWithTimeout(this.broadcastEndpointURL,u,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((s=c.body)===null||s===void 0?void 0:s.cancel()),c.ok?"ok":"error"}catch(c){return c.name==="AbortError"?"timed out":"error"}}else return new Promise(a=>{var o,l,u;const c=this._push(e.type,e,n.timeout||this.timeout);e.type==="broadcast"&&!(!((u=(l=(o=this.params)===null||o===void 0?void 0:o.config)===null||l===void 0?void 0:l.broadcast)===null||u===void 0)&&u.ack)&&a("ok"),c.receive("ok",()=>a("ok")),c.receive("error",()=>a("error")),c.receive("timeout",()=>a("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=ke.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(kt.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(s=>{r=new Ao(this,kt.leave,{},e),r.receive("ok",()=>{n(),s("ok")}).receive("timeout",()=>{n(),s("timed out")}).receive("error",()=>{s("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=ke.closed,this.bindings={}}async _fetchWithTimeout(e,n,r){const s=new AbortController,a=setTimeout(()=>s.abort(),r),o=await this.socket.fetch(e,Object.assign(Object.assign({},n),{signal:s.signal}));return clearTimeout(a),o}_push(e,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new Ao(this,e,n,r);return this._canPush()?s.send():this._addToPushBuffer(s),s}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>ux){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(e,n,r){return n}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,n,r){var s,a;const o=e.toLocaleLowerCase(),{close:l,error:u,leave:c,join:h}=kt;if(r&&[l,u,c,h].indexOf(o)>=0&&r!==this._joinRef())return;let p=this._onMessage(o,n,r);if(n&&!p)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(v=>{var x,b,k;return((x=v.filter)===null||x===void 0?void 0:x.event)==="*"||((k=(b=v.filter)===null||b===void 0?void 0:b.event)===null||k===void 0?void 0:k.toLocaleLowerCase())===o}).map(v=>v.callback(p,r)):(a=this.bindings[o])===null||a===void 0||a.filter(v=>{var x,b,k,g,m,f;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in v){const y=v.id,_=(x=v.filter)===null||x===void 0?void 0:x.event;return y&&((b=n.ids)===null||b===void 0?void 0:b.includes(y))&&(_==="*"||(_==null?void 0:_.toLocaleLowerCase())===((k=n.data)===null||k===void 0?void 0:k.type.toLocaleLowerCase()))}else{const y=(m=(g=v==null?void 0:v.filter)===null||g===void 0?void 0:g.event)===null||m===void 0?void 0:m.toLocaleLowerCase();return y==="*"||y===((f=n==null?void 0:n.event)===null||f===void 0?void 0:f.toLocaleLowerCase())}else return v.type.toLocaleLowerCase()===o}).map(v=>{if(typeof p=="object"&&"ids"in p){const x=p.data,{schema:b,table:k,commit_timestamp:g,type:m,errors:f}=x;p=Object.assign(Object.assign({},{schema:b,table:k,commit_timestamp:g,eventType:m,new:{},old:{},errors:f}),this._getPayloadRecords(x))}v.callback(p,r)})}_isClosed(){return this.state===ke.closed}_isJoined(){return this.state===ke.joined}_isJoining(){return this.state===ke.joining}_isLeaving(){return this.state===ke.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,n,r){const s=e.toLocaleLowerCase(),a={type:s,filter:n,callback:r};return this.bindings[s]?this.bindings[s].push(a):this.bindings[s]=[a],this}_off(e,n){const r=e.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(s=>{var a;return!(((a=s.type)===null||a===void 0?void 0:a.toLocaleLowerCase())===r&&ac.isEqual(s.filter,n))})),this}static isEqual(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const r in e)if(e[r]!==n[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(kt.close,{},e)}_onError(e){this._on(kt.error,{},n=>e(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=ke.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const n={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(n.new=th(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(n.old=th(e.columns,e.old_record)),n}}const Io=()=>{},Ci={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},vx=[1e3,2e3,5e3,1e4],xx=1e4,yx=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class wx{constructor(e,n){var r;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Bl,this.transport=null,this.heartbeatIntervalMs=Ci.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Io,this.ref=0,this.reconnectTimer=null,this.logger=Io,this.conn=null,this.sendBuffer=[],this.serializer=new cx,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=s=>{let a;return s?a=s:typeof fetch>"u"?a=(...o)=>Zs(async()=>{const{default:l}=await Promise.resolve().then(()=>Hr);return{default:l}},void 0).then(({default:l})=>l(...o)).catch(l=>{throw new Error(`Failed to load @supabase/node-fetch: ${l.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):a=fetch,(...o)=>a(...o)},!(!((r=n==null?void 0:n.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${e}/${Fl.websocket}`,this.httpEndpoint=l0(e),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n==null?void 0:n.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=sx.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const n=e.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:ox}))}disconnect(e,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},e?this.conn.close(e,n??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const n=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const e=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,n,r){this.logger(e,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case ks.connecting:return Rn.Connecting;case ks.open:return Rn.Open;case ks.closing:return Rn.Closing;default:return Rn.Closed}}isConnected(){return this.connectionState()===Rn.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,n={config:{}}){const r=`realtime:${e}`,s=this.getChannels().find(a=>a.topic===r);if(s)return s;{const a=new ac(`realtime:${e}`,n,this);return this.channels.push(a),a}}push(e){const{topic:n,event:r,payload:s,ref:a}=e,o=()=>{this.encode(e,l=>{var u;(u=this.conn)===null||u===void 0||u.send(l)})};this.log("push",`${n} ${r} (${a})`,s),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(lx,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},Ci.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let n=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${e}"`),n.unsubscribe())}_remove(e){this.channels=this.channels.filter(n=>n.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply")try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error")}catch(c){this.log("error","error in heartbeat callback",c)}n.ref&&n.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:r,event:s,payload:a,ref:o}=n,l=o?`(${o})`:"",u=a.status||"";this.log("receive",`${u} ${r} ${s} ${l}`.trim(),a),this.channels.filter(c=>c._isMember(r)).forEach(c=>c._trigger(s,a,o)),this._triggerStateCallbacks("message",n)})}_clearTimer(e){var n;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var n;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(kt.error))}_appendParams(e,n){if(Object.keys(n).length===0)return e;const r=e.match(/\?/)?"&":"?",s=new URLSearchParams(n);return`${e}${r}${s}`}_workerObjectUrl(e){let n;if(e)n=e;else{const r=new Blob([yx],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}_setConnectionState(e,n=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(e=null){let n;e?n=e:this.accessToken?n=await this.accessToken():n=this.accessTokenValue,this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(r=>{const s={access_token:n,version:ax};n&&r.updateJoinPayload(s),r.joinedOnce&&r._isJoined()&&r._push(kt.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(n=>{this.log("error",`error setting auth in ${e}`,n)})}_triggerStateCallbacks(e,n){try{this.stateChangeCallbacks[e].forEach(r=>{try{r(n)}catch(s){this.log("error",`error in ${e} callback`,s)}})}catch(r){this.log("error",`error triggering ${e} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new a0(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Ci.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var n,r,s,a,o,l,u,c,h;if(this.transport=(n=e==null?void 0:e.transport)!==null&&n!==void 0?n:null,this.timeout=(r=e==null?void 0:e.timeout)!==null&&r!==void 0?r:Bl,this.heartbeatIntervalMs=(s=e==null?void 0:e.heartbeatIntervalMs)!==null&&s!==void 0?s:Ci.HEARTBEAT_INTERVAL,this.worker=(a=e==null?void 0:e.worker)!==null&&a!==void 0?a:!1,this.accessToken=(o=e==null?void 0:e.accessToken)!==null&&o!==void 0?o:null,this.heartbeatCallback=(l=e==null?void 0:e.heartbeatCallback)!==null&&l!==void 0?l:Io,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(u=e==null?void 0:e.reconnectAfterMs)!==null&&u!==void 0?u:d=>vx[d-1]||xx,this.encode=(c=e==null?void 0:e.encode)!==null&&c!==void 0?c:(d,p)=>p(JSON.stringify(d)),this.decode=(h=e==null?void 0:e.decode)!==null&&h!==void 0?h:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}class oc extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function Ne(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class bx extends oc{constructor(e,n,r){super(e),this.name="StorageApiError",this.status=n,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Hl extends oc{constructor(e,n){super(e),this.name="StorageUnknownError",this.originalError=n}}var _x=function(t,e,n,r){function s(a){return a instanceof n?a:new n(function(o){o(a)})}return new(n||(n=Promise))(function(a,o){function l(h){try{c(r.next(h))}catch(d){o(d)}}function u(h){try{c(r.throw(h))}catch(d){o(d)}}function c(h){h.done?a(h.value):s(h.value).then(l,u)}c((r=r.apply(t,e||[])).next())})};const u0=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>Zs(async()=>{const{default:r}=await Promise.resolve().then(()=>Hr);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)},jx=()=>_x(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Zs(()=>Promise.resolve().then(()=>Hr),void 0)).Response:Response}),Gl=t=>{if(Array.isArray(t))return t.map(n=>Gl(n));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([n,r])=>{const s=n.replace(/([-_][a-z])/gi,a=>a.toUpperCase().replace(/[-_]/g,""));e[s]=Gl(r)}),e},kx=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)};var Qn=function(t,e,n,r){function s(a){return a instanceof n?a:new n(function(o){o(a)})}return new(n||(n=Promise))(function(a,o){function l(h){try{c(r.next(h))}catch(d){o(d)}}function u(h){try{c(r.throw(h))}catch(d){o(d)}}function c(h){h.done?a(h.value):s(h.value).then(l,u)}c((r=r.apply(t,e||[])).next())})};const Ro=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),Nx=(t,e,n)=>Qn(void 0,void 0,void 0,function*(){const r=yield jx();t instanceof r&&!(n!=null&&n.noResolveJson)?t.json().then(s=>{const a=t.status||500,o=(s==null?void 0:s.statusCode)||a+"";e(new bx(Ro(s),a,o))}).catch(s=>{e(new Hl(Ro(s),s))}):e(new Hl(Ro(t),t))}),Sx=(t,e,n,r)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"||!r?s:(kx(r)?(s.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),s.body=JSON.stringify(r)):s.body=r,e!=null&&e.duplex&&(s.duplex=e.duplex),Object.assign(Object.assign({},s),n))};function ti(t,e,n,r,s,a){return Qn(this,void 0,void 0,function*(){return new Promise((o,l)=>{t(n,Sx(e,r,s,a)).then(u=>{if(!u.ok)throw u;return r!=null&&r.noResolveJson?u:u.json()}).then(u=>o(u)).catch(u=>Nx(u,l,r))})})}function wa(t,e,n,r){return Qn(this,void 0,void 0,function*(){return ti(t,"GET",e,n,r)})}function $t(t,e,n,r,s){return Qn(this,void 0,void 0,function*(){return ti(t,"POST",e,r,s,n)})}function Vl(t,e,n,r,s){return Qn(this,void 0,void 0,function*(){return ti(t,"PUT",e,r,s,n)})}function Ex(t,e,n,r){return Qn(this,void 0,void 0,function*(){return ti(t,"HEAD",e,Object.assign(Object.assign({},n),{noResolveJson:!0}),r)})}function c0(t,e,n,r,s){return Qn(this,void 0,void 0,function*(){return ti(t,"DELETE",e,r,s,n)})}var Ue=function(t,e,n,r){function s(a){return a instanceof n?a:new n(function(o){o(a)})}return new(n||(n=Promise))(function(a,o){function l(h){try{c(r.next(h))}catch(d){o(d)}}function u(h){try{c(r.throw(h))}catch(d){o(d)}}function c(h){h.done?a(h.value):s(h.value).then(l,u)}c((r=r.apply(t,e||[])).next())})};const Cx={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},sh={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Ox{constructor(e,n={},r,s){this.shouldThrowOnError=!1,this.url=e,this.headers=n,this.bucketId=r,this.fetch=u0(s)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,n,r,s){return Ue(this,void 0,void 0,function*(){try{let a;const o=Object.assign(Object.assign({},sh),s);let l=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(o.upsert)});const u=o.metadata;typeof Blob<"u"&&r instanceof Blob?(a=new FormData,a.append("cacheControl",o.cacheControl),u&&a.append("metadata",this.encodeMetadata(u)),a.append("",r)):typeof FormData<"u"&&r instanceof FormData?(a=r,a.append("cacheControl",o.cacheControl),u&&a.append("metadata",this.encodeMetadata(u))):(a=r,l["cache-control"]=`max-age=${o.cacheControl}`,l["content-type"]=o.contentType,u&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(u)))),s!=null&&s.headers&&(l=Object.assign(Object.assign({},l),s.headers));const c=this._removeEmptyFolders(n),h=this._getFinalPath(c),d=yield(e=="PUT"?Vl:$t)(this.fetch,`${this.url}/object/${h}`,a,Object.assign({headers:l},o!=null&&o.duplex?{duplex:o.duplex}:{}));return{data:{path:c,id:d.Id,fullPath:d.Key},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Ne(a))return{data:null,error:a};throw a}})}upload(e,n,r){return Ue(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,n,r)})}uploadToSignedUrl(e,n,r,s){return Ue(this,void 0,void 0,function*(){const a=this._removeEmptyFolders(e),o=this._getFinalPath(a),l=new URL(this.url+`/object/upload/sign/${o}`);l.searchParams.set("token",n);try{let u;const c=Object.assign({upsert:sh.upsert},s),h=Object.assign(Object.assign({},this.headers),{"x-upsert":String(c.upsert)});typeof Blob<"u"&&r instanceof Blob?(u=new FormData,u.append("cacheControl",c.cacheControl),u.append("",r)):typeof FormData<"u"&&r instanceof FormData?(u=r,u.append("cacheControl",c.cacheControl)):(u=r,h["cache-control"]=`max-age=${c.cacheControl}`,h["content-type"]=c.contentType);const d=yield Vl(this.fetch,l.toString(),u,{headers:h});return{data:{path:a,fullPath:d.Key},error:null}}catch(u){if(this.shouldThrowOnError)throw u;if(Ne(u))return{data:null,error:u};throw u}})}createSignedUploadUrl(e,n){return Ue(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e);const s=Object.assign({},this.headers);n!=null&&n.upsert&&(s["x-upsert"]="true");const a=yield $t(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:s}),o=new URL(this.url+a.url),l=o.searchParams.get("token");if(!l)throw new oc("No token returned by API");return{data:{signedUrl:o.toString(),path:e,token:l},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ne(r))return{data:null,error:r};throw r}})}update(e,n,r){return Ue(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,n,r)})}move(e,n,r){return Ue(this,void 0,void 0,function*(){try{return{data:yield $t(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Ne(s))return{data:null,error:s};throw s}})}copy(e,n,r){return Ue(this,void 0,void 0,function*(){try{return{data:{path:(yield $t(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Ne(s))return{data:null,error:s};throw s}})}createSignedUrl(e,n,r){return Ue(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e),a=yield $t(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:n},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const o=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return a={signedUrl:encodeURI(`${this.url}${a.signedURL}${o}`)},{data:a,error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Ne(s))return{data:null,error:s};throw s}})}createSignedUrls(e,n,r){return Ue(this,void 0,void 0,function*(){try{const s=yield $t(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:e},{headers:this.headers}),a=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:s.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${a}`):null})),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Ne(s))return{data:null,error:s};throw s}})}download(e,n){return Ue(this,void 0,void 0,function*(){const s=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",a=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),o=a?`?${a}`:"";try{const l=this._getFinalPath(e);return{data:yield(yield wa(this.fetch,`${this.url}/${s}/${l}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(Ne(l))return{data:null,error:l};throw l}})}info(e){return Ue(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{const r=yield wa(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:Gl(r),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ne(r))return{data:null,error:r};throw r}})}exists(e){return Ue(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{return yield Ex(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ne(r)&&r instanceof Hl){const s=r.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:r}}throw r}})}getPublicUrl(e,n){const r=this._getFinalPath(e),s=[],a=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";a!==""&&s.push(a);const l=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",u=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});u!==""&&s.push(u);let c=s.join("&");return c!==""&&(c=`?${c}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${r}${c}`)}}}remove(e){return Ue(this,void 0,void 0,function*(){try{return{data:yield c0(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ne(n))return{data:null,error:n};throw n}})}list(e,n,r){return Ue(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},Cx),n),{prefix:e||""});return{data:yield $t(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},r),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Ne(s))return{data:null,error:s};throw s}})}listV2(e,n){return Ue(this,void 0,void 0,function*(){try{const r=Object.assign({},e);return{data:yield $t(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,r,{headers:this.headers},n),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ne(r))return{data:null,error:r};throw r}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const n=[];return e.width&&n.push(`width=${e.width}`),e.height&&n.push(`height=${e.height}`),e.resize&&n.push(`resize=${e.resize}`),e.format&&n.push(`format=${e.format}`),e.quality&&n.push(`quality=${e.quality}`),n.join("&")}}const Px="2.12.1",Tx={"X-Client-Info":`storage-js/${Px}`};var nr=function(t,e,n,r){function s(a){return a instanceof n?a:new n(function(o){o(a)})}return new(n||(n=Promise))(function(a,o){function l(h){try{c(r.next(h))}catch(d){o(d)}}function u(h){try{c(r.throw(h))}catch(d){o(d)}}function c(h){h.done?a(h.value):s(h.value).then(l,u)}c((r=r.apply(t,e||[])).next())})};class $x{constructor(e,n={},r,s){this.shouldThrowOnError=!1;const a=new URL(e);s!=null&&s.useNewHostname&&/supabase\.(co|in|red)$/.test(a.hostname)&&!a.hostname.includes("storage.supabase.")&&(a.hostname=a.hostname.replace("supabase.","storage.supabase.")),this.url=a.href,this.headers=Object.assign(Object.assign({},Tx),n),this.fetch=u0(r)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(){return nr(this,void 0,void 0,function*(){try{return{data:yield wa(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Ne(e))return{data:null,error:e};throw e}})}getBucket(e){return nr(this,void 0,void 0,function*(){try{return{data:yield wa(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ne(n))return{data:null,error:n};throw n}})}createBucket(e,n={public:!1}){return nr(this,void 0,void 0,function*(){try{return{data:yield $t(this.fetch,`${this.url}/bucket`,{id:e,name:e,type:n.type,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ne(r))return{data:null,error:r};throw r}})}updateBucket(e,n){return nr(this,void 0,void 0,function*(){try{return{data:yield Vl(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ne(r))return{data:null,error:r};throw r}})}emptyBucket(e){return nr(this,void 0,void 0,function*(){try{return{data:yield $t(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ne(n))return{data:null,error:n};throw n}})}deleteBucket(e){return nr(this,void 0,void 0,function*(){try{return{data:yield c0(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ne(n))return{data:null,error:n};throw n}})}}class Ax extends $x{constructor(e,n={},r,s){super(e,n,r,s)}from(e){return new Ox(this.url,this.headers,e,this.fetch)}}const Ix="2.57.4";let fs="";typeof Deno<"u"?fs="deno":typeof document<"u"?fs="web":typeof navigator<"u"&&navigator.product==="ReactNative"?fs="react-native":fs="node";const Rx={"X-Client-Info":`supabase-js-${fs}/${Ix}`},Dx={headers:Rx},Lx={schema:"public"},Mx={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Ux={};var zx=function(t,e,n,r){function s(a){return a instanceof n?a:new n(function(o){o(a)})}return new(n||(n=Promise))(function(a,o){function l(h){try{c(r.next(h))}catch(d){o(d)}}function u(h){try{c(r.throw(h))}catch(d){o(d)}}function c(h){h.done?a(h.value):s(h.value).then(l,u)}c((r=r.apply(t,e||[])).next())})};const Bx=t=>{let e;return t?e=t:typeof fetch>"u"?e=Qp:e=fetch,(...n)=>e(...n)},Fx=()=>typeof Headers>"u"?Xp:Headers,qx=(t,e,n)=>{const r=Bx(n),s=Fx();return(a,o)=>zx(void 0,void 0,void 0,function*(){var l;const u=(l=yield e())!==null&&l!==void 0?l:t;let c=new s(o==null?void 0:o.headers);return c.has("apikey")||c.set("apikey",t),c.has("Authorization")||c.set("Authorization",`Bearer ${u}`),r(a,Object.assign(Object.assign({},o),{headers:c}))})};var Hx=function(t,e,n,r){function s(a){return a instanceof n?a:new n(function(o){o(a)})}return new(n||(n=Promise))(function(a,o){function l(h){try{c(r.next(h))}catch(d){o(d)}}function u(h){try{c(r.throw(h))}catch(d){o(d)}}function c(h){h.done?a(h.value):s(h.value).then(l,u)}c((r=r.apply(t,e||[])).next())})};function Gx(t){return t.endsWith("/")?t:t+"/"}function Vx(t,e){var n,r;const{db:s,auth:a,realtime:o,global:l}=t,{db:u,auth:c,realtime:h,global:d}=e,p={db:Object.assign(Object.assign({},u),s),auth:Object.assign(Object.assign({},c),a),realtime:Object.assign(Object.assign({},h),o),storage:{},global:Object.assign(Object.assign(Object.assign({},d),l),{headers:Object.assign(Object.assign({},(n=d==null?void 0:d.headers)!==null&&n!==void 0?n:{}),(r=l==null?void 0:l.headers)!==null&&r!==void 0?r:{})}),accessToken:()=>Hx(this,void 0,void 0,function*(){return""})};return t.accessToken?p.accessToken=t.accessToken:delete p.accessToken,p}function Wx(t){const e=t==null?void 0:t.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(Gx(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const d0="2.71.1",cr=30*1e3,Wl=3,Do=Wl*cr,Kx="http://localhost:9999",Qx="supabase.auth.token",Xx={"X-Client-Info":`gotrue-js/${d0}`},Kl="X-Supabase-Api-Version",h0={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},Jx=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,Yx=10*60*1e3;class lc extends Error{constructor(e,n,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function Q(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class Zx extends lc{constructor(e,n,r){super(e,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function ey(t){return Q(t)&&t.name==="AuthApiError"}class f0 extends lc{constructor(e,n){super(e),this.name="AuthUnknownError",this.originalError=n}}class En extends lc{constructor(e,n,r,s){super(e,r,s),this.name=n,this.status=r}}class nn extends En{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function ty(t){return Q(t)&&t.name==="AuthSessionMissingError"}class Oi extends En{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Pi extends En{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Ti extends En{constructor(e,n=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function ny(t){return Q(t)&&t.name==="AuthImplicitGrantRedirectError"}class ih extends En{constructor(e,n=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Ql extends En{constructor(e,n){super(e,"AuthRetryableFetchError",n,void 0)}}function Lo(t){return Q(t)&&t.name==="AuthRetryableFetchError"}class ah extends En{constructor(e,n,r){super(e,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}class Xl extends En{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const ba="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),oh=` 	
\r=`.split(""),ry=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<oh.length;e+=1)t[oh[e].charCodeAt(0)]=-2;for(let e=0;e<ba.length;e+=1)t[ba[e].charCodeAt(0)]=e;return t})();function lh(t,e,n){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(ba[r]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(ba[r]),e.queuedBits-=6}}function p0(t,e,n){const r=ry[t];if(r>-1)for(e.queue=e.queue<<6|r,e.queuedBits+=6;e.queuedBits>=8;)n(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function uh(t){const e=[],n=o=>{e.push(String.fromCodePoint(o))},r={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},a=o=>{ay(o,r,n)};for(let o=0;o<t.length;o+=1)p0(t.charCodeAt(o),s,a);return e.join("")}function sy(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function iy(t,e){for(let n=0;n<t.length;n+=1){let r=t.charCodeAt(n);if(r>55295&&r<=56319){const s=(r-55296)*1024&65535;r=(t.charCodeAt(n+1)-56320&65535|s)+65536,n+=1}sy(r,e)}}function ay(t,e,n){if(e.utf8seq===0){if(t<=127){n(t);return}for(let r=1;r<6;r+=1)if(!(t>>7-r&1)){e.utf8seq=r;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&n(e.codepoint)}}function oy(t){const e=[],n={queue:0,queuedBits:0},r=s=>{e.push(s)};for(let s=0;s<t.length;s+=1)p0(t.charCodeAt(s),n,r);return new Uint8Array(e)}function ly(t){const e=[];return iy(t,n=>e.push(n)),new Uint8Array(e)}function uy(t){const e=[],n={queue:0,queuedBits:0},r=s=>{e.push(s)};return t.forEach(s=>lh(s,n,r)),lh(null,n,r),e.join("")}function cy(t){return Math.round(Date.now()/1e3)+t}function dy(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const bt=()=>typeof window<"u"&&typeof document<"u",Pn={tested:!1,writable:!1},m0=()=>{if(!bt())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Pn.tested)return Pn.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),Pn.tested=!0,Pn.writable=!0}catch{Pn.tested=!0,Pn.writable=!1}return Pn.writable};function hy(t){const e={},n=new URL(t);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((s,a)=>{e[a]=s})}catch{}return n.searchParams.forEach((r,s)=>{e[s]=r}),e}const g0=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>Zs(async()=>{const{default:r}=await Promise.resolve().then(()=>Hr);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)},fy=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",dr=async(t,e,n)=>{await t.setItem(e,JSON.stringify(n))},Tn=async(t,e)=>{const n=await t.getItem(e);if(!n)return null;try{return JSON.parse(n)}catch{return n}},tn=async(t,e)=>{await t.removeItem(e)};class Ka{constructor(){this.promise=new Ka.promiseConstructor((e,n)=>{this.resolve=e,this.reject=n})}}Ka.promiseConstructor=Promise;function Mo(t){const e=t.split(".");if(e.length!==3)throw new Xl("Invalid JWT structure");for(let r=0;r<e.length;r++)if(!Jx.test(e[r]))throw new Xl("JWT not in base64url format");return{header:JSON.parse(uh(e[0])),payload:JSON.parse(uh(e[1])),signature:oy(e[2]),raw:{header:e[0],payload:e[1]}}}async function py(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function my(t,e){return new Promise((r,s)=>{(async()=>{for(let a=0;a<1/0;a++)try{const o=await t(a);if(!e(a,null,o)){r(o);return}}catch(o){if(!e(a,o)){s(o);return}}})()})}function gy(t){return("0"+t.toString(16)).substr(-2)}function vy(){const e=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let s="";for(let a=0;a<56;a++)s+=n.charAt(Math.floor(Math.random()*r));return s}return crypto.getRandomValues(e),Array.from(e,gy).join("")}async function xy(t){const n=new TextEncoder().encode(t),r=await crypto.subtle.digest("SHA-256",n),s=new Uint8Array(r);return Array.from(s).map(a=>String.fromCharCode(a)).join("")}async function yy(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const n=await xy(t);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function rr(t,e,n=!1){const r=vy();let s=r;n&&(s+="/PASSWORD_RECOVERY"),await dr(t,`${e}-code-verifier`,s);const a=await yy(r);return[a,r===a?"plain":"s256"]}const wy=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function by(t){const e=t.headers.get(Kl);if(!e||!e.match(wy))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function _y(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function jy(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const ky=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function sr(t){if(!ky.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Uo(){const t={};return new Proxy(t,{get:(e,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const r=n.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function ch(t){return JSON.parse(JSON.stringify(t))}var Ny=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n};const In=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),Sy=[502,503,504];async function dh(t){var e;if(!fy(t))throw new Ql(In(t),0);if(Sy.includes(t.status))throw new Ql(In(t),t.status);let n;try{n=await t.json()}catch(a){throw new f0(In(a),a)}let r;const s=by(t);if(s&&s.getTime()>=h0["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new ah(In(n),t.status,((e=n.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new nn}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((a,o)=>a&&typeof o=="string",!0))throw new ah(In(n),t.status,n.weak_password.reasons);throw new Zx(In(n),t.status||500,r)}const Ey=(t,e,n,r)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),s.body=JSON.stringify(r),Object.assign(Object.assign({},s),n))};async function Z(t,e,n,r){var s;const a=Object.assign({},r==null?void 0:r.headers);a[Kl]||(a[Kl]=h0["2024-01-01"].name),r!=null&&r.jwt&&(a.Authorization=`Bearer ${r.jwt}`);const o=(s=r==null?void 0:r.query)!==null&&s!==void 0?s:{};r!=null&&r.redirectTo&&(o.redirect_to=r.redirectTo);const l=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",u=await Cy(t,e,n+l,{headers:a,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(u):{data:Object.assign({},u),error:null}}async function Cy(t,e,n,r,s,a){const o=Ey(e,r,s,a);let l;try{l=await t(n,Object.assign({},o))}catch(u){throw console.error(u),new Ql(In(u),0)}if(l.ok||await dh(l),r!=null&&r.noResolveJson)return l;try{return await l.json()}catch(u){await dh(u)}}function Ut(t){var e;let n=null;$y(t)&&(n=Object.assign({},t),t.expires_at||(n.expires_at=cy(t.expires_in)));const r=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:n,user:r},error:null}}function hh(t){const e=Ut(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(e.data.weak_password=t.weak_password),e}function ln(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function Oy(t){return{data:t,error:null}}function Py(t){const{action_link:e,email_otp:n,hashed_token:r,redirect_to:s,verification_type:a}=t,o=Ny(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:e,email_otp:n,hashed_token:r,redirect_to:s,verification_type:a},u=Object.assign({},o);return{data:{properties:l,user:u},error:null}}function Ty(t){return t}function $y(t){return t.access_token&&t.refresh_token&&t.expires_in}const zo=["global","local","others"];var Ay=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n};class Iy{constructor({url:e="",headers:n={},fetch:r}){this.url=e,this.headers=n,this.fetch=g0(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,n=zo[0]){if(zo.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${zo.join(", ")}`);try{return await Z(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(Q(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,n={}){try{return await Z(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:ln})}catch(r){if(Q(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:n}=e,r=Ay(e,["options"]),s=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(s.new_email=r==null?void 0:r.newEmail,delete s.newEmail),await Z(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:Py,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(Q(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(e){try{return await Z(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:ln})}catch(n){if(Q(n))return{data:{user:null},error:n};throw n}}async listUsers(e){var n,r,s,a,o,l,u;try{const c={nextPage:null,lastPage:0,total:0},h=await Z(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(a=(s=e==null?void 0:e.perPage)===null||s===void 0?void 0:s.toString())!==null&&a!==void 0?a:""},xform:Ty});if(h.error)throw h.error;const d=await h.json(),p=(o=h.headers.get("x-total-count"))!==null&&o!==void 0?o:0,v=(u=(l=h.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&u!==void 0?u:[];return v.length>0&&(v.forEach(x=>{const b=parseInt(x.split(";")[0].split("=")[1].substring(0,1)),k=JSON.parse(x.split(";")[1].split("=")[1]);c[`${k}Page`]=b}),c.total=parseInt(p)),{data:Object.assign(Object.assign({},d),c),error:null}}catch(c){if(Q(c))return{data:{users:[]},error:c};throw c}}async getUserById(e){sr(e);try{return await Z(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:ln})}catch(n){if(Q(n))return{data:{user:null},error:n};throw n}}async updateUserById(e,n){sr(e);try{return await Z(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:n,headers:this.headers,xform:ln})}catch(r){if(Q(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,n=!1){sr(e);try{return await Z(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:n},xform:ln})}catch(r){if(Q(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){sr(e.userId);try{const{data:n,error:r}=await Z(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:n,error:r}}catch(n){if(Q(n))return{data:null,error:n};throw n}}async _deleteFactor(e){sr(e.userId),sr(e.id);try{return{data:await Z(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(n){if(Q(n))return{data:null,error:n};throw n}}}function fh(t={}){return{getItem:e=>t[e]||null,setItem:(e,n)=>{t[e]=n},removeItem:e=>{delete t[e]}}}function Ry(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const ir={debug:!!(globalThis&&m0()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class v0 extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class Dy extends v0{}async function Ly(t,e,n){ir.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),ir.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async s=>{if(s){ir.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,s.name);try{return await n()}finally{ir.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,s.name)}}else{if(e===0)throw ir.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new Dy(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(ir.debug)try{const a=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(a,null,"  "))}catch(a){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",a)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}Ry();const My={url:Kx,storageKey:Qx,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Xx,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function ph(t,e,n){return await n()}const ar={};class Vs{constructor(e){var n,r;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Vs.nextInstanceID,Vs.nextInstanceID+=1,this.instanceID>0&&bt()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const s=Object.assign(Object.assign({},My),e);if(this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new Iy({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=g0(s.fetch),this.lock=s.lock||ph,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,s.lock?this.lock=s.lock:bt()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=Ly:this.lock=ph,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(s.storage?this.storage=s.storage:m0()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=fh(this.memoryStorage)),s.userStorage&&(this.userStorage=s.userStorage)):(this.memoryStorage={},this.storage=fh(this.memoryStorage)),bt()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(a){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",a)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async a=>{this._debug("received broadcast notification from other tab or client",a),await this._notifyAllSubscribers(a.data.event,a.data.session,!1)})}this.initialize()}get jwks(){var e,n;return(n=(e=ar[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(e){ar[this.storageKey]=Object.assign(Object.assign({},ar[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,n;return(n=(e=ar[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){ar[this.storageKey]=Object.assign(Object.assign({},ar[this.storageKey]),{cachedAt:e})}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${d0}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const n=hy(window.location.href);let r="none";if(this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce"),bt()&&this.detectSessionInUrl&&r!=="none"){const{data:s,error:a}=await this._getSessionFromURL(n,r);if(a){if(this._debug("#_initialize()","error detecting session from URL",a),ny(a)){const u=(e=a.details)===null||e===void 0?void 0:e.code;if(u==="identity_already_exists"||u==="identity_not_found"||u==="single_identity_not_deletable")return{error:a}}return await this._removeSession(),{error:a}}const{session:o,redirectType:l}=s;return this._debug("#_initialize()","detected session in URL",o,"redirect type",l),await this._saveSession(o),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return Q(n)?{error:n}:{error:new f0("Unexpected error during initialization",n)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var n,r,s;try{const a=await Z(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=e==null?void 0:e.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(s=e==null?void 0:e.options)===null||s===void 0?void 0:s.captchaToken}},xform:Ut}),{data:o,error:l}=a;if(l||!o)return{data:{user:null,session:null},error:l};const u=o.session,c=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",u)),{data:{user:c,session:u},error:null}}catch(a){if(Q(a))return{data:{user:null,session:null},error:a};throw a}}async signUp(e){var n,r,s;try{let a;if("email"in e){const{email:h,password:d,options:p}=e;let v=null,x=null;this.flowType==="pkce"&&([v,x]=await rr(this.storage,this.storageKey)),a=await Z(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:p==null?void 0:p.emailRedirectTo,body:{email:h,password:d,data:(n=p==null?void 0:p.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:p==null?void 0:p.captchaToken},code_challenge:v,code_challenge_method:x},xform:Ut})}else if("phone"in e){const{phone:h,password:d,options:p}=e;a=await Z(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:h,password:d,data:(r=p==null?void 0:p.data)!==null&&r!==void 0?r:{},channel:(s=p==null?void 0:p.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:p==null?void 0:p.captchaToken}},xform:Ut})}else throw new Pi("You must provide either an email or phone number and a password");const{data:o,error:l}=a;if(l||!o)return{data:{user:null,session:null},error:l};const u=o.session,c=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",u)),{data:{user:c,session:u},error:null}}catch(a){if(Q(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithPassword(e){try{let n;if("email"in e){const{email:a,password:o,options:l}=e;n=await Z(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:a,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:hh})}else if("phone"in e){const{phone:a,password:o,options:l}=e;n=await Z(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:a,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:hh})}else throw new Pi("You must provide either an email or phone number and a password");const{data:r,error:s}=n;return s?{data:{user:null,session:null},error:s}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new Oi}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:s})}catch(n){if(Q(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOAuth(e){var n,r,s,a;return await this._handleProviderSignIn(e.provider,{redirectTo:(n=e.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(s=e.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(a=e.options)===null||a===void 0?void 0:a.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:n}=e;if(n==="solana")return await this.signInWithSolana(e);throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}async signInWithSolana(e){var n,r,s,a,o,l,u,c,h,d,p,v;let x,b;if("message"in e)x=e.message,b=e.signature;else{const{chain:k,wallet:g,statement:m,options:f}=e;let y;if(bt())if(typeof g=="object")y=g;else{const w=window;if("solana"in w&&typeof w.solana=="object"&&("signIn"in w.solana&&typeof w.solana.signIn=="function"||"signMessage"in w.solana&&typeof w.solana.signMessage=="function"))y=w.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof g!="object"||!(f!=null&&f.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");y=g}const _=new URL((n=f==null?void 0:f.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in y&&y.signIn){const w=await y.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},f==null?void 0:f.signInWithSolana),{version:"1",domain:_.host,uri:_.href}),m?{statement:m}:null));let N;if(Array.isArray(w)&&w[0]&&typeof w[0]=="object")N=w[0];else if(w&&typeof w=="object"&&"signedMessage"in w&&"signature"in w)N=w;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in N&&"signature"in N&&(typeof N.signedMessage=="string"||N.signedMessage instanceof Uint8Array)&&N.signature instanceof Uint8Array)x=typeof N.signedMessage=="string"?N.signedMessage:new TextDecoder().decode(N.signedMessage),b=N.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in y)||typeof y.signMessage!="function"||!("publicKey"in y)||typeof y!="object"||!y.publicKey||!("toBase58"in y.publicKey)||typeof y.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");x=[`${_.host} wants you to sign in with your Solana account:`,y.publicKey.toBase58(),...m?["",m,""]:[""],"Version: 1",`URI: ${_.href}`,`Issued At: ${(s=(r=f==null?void 0:f.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((a=f==null?void 0:f.signInWithSolana)===null||a===void 0)&&a.notBefore?[`Not Before: ${f.signInWithSolana.notBefore}`]:[],...!((o=f==null?void 0:f.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${f.signInWithSolana.expirationTime}`]:[],...!((l=f==null?void 0:f.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${f.signInWithSolana.chainId}`]:[],...!((u=f==null?void 0:f.signInWithSolana)===null||u===void 0)&&u.nonce?[`Nonce: ${f.signInWithSolana.nonce}`]:[],...!((c=f==null?void 0:f.signInWithSolana)===null||c===void 0)&&c.requestId?[`Request ID: ${f.signInWithSolana.requestId}`]:[],...!((d=(h=f==null?void 0:f.signInWithSolana)===null||h===void 0?void 0:h.resources)===null||d===void 0)&&d.length?["Resources",...f.signInWithSolana.resources.map(N=>`- ${N}`)]:[]].join(`
`);const w=await y.signMessage(new TextEncoder().encode(x),"utf8");if(!w||!(w instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");b=w}}try{const{data:k,error:g}=await Z(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:x,signature:uy(b)},!((p=e.options)===null||p===void 0)&&p.captchaToken?{gotrue_meta_security:{captcha_token:(v=e.options)===null||v===void 0?void 0:v.captchaToken}}:null),xform:Ut});if(g)throw g;return!k||!k.session||!k.user?{data:{user:null,session:null},error:new Oi}:(k.session&&(await this._saveSession(k.session),await this._notifyAllSubscribers("SIGNED_IN",k.session)),{data:Object.assign({},k),error:g})}catch(k){if(Q(k))return{data:{user:null,session:null},error:k};throw k}}async _exchangeCodeForSession(e){const n=await Tn(this.storage,`${this.storageKey}-code-verifier`),[r,s]=(n??"").split("/");try{const{data:a,error:o}=await Z(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:Ut});if(await tn(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!a||!a.session||!a.user?{data:{user:null,session:null,redirectType:null},error:new Oi}:(a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),{data:Object.assign(Object.assign({},a),{redirectType:s??null}),error:o})}catch(a){if(Q(a))return{data:{user:null,session:null,redirectType:null},error:a};throw a}}async signInWithIdToken(e){try{const{options:n,provider:r,token:s,access_token:a,nonce:o}=e,l=await Z(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:s,access_token:a,nonce:o,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:Ut}),{data:u,error:c}=l;return c?{data:{user:null,session:null},error:c}:!u||!u.session||!u.user?{data:{user:null,session:null},error:new Oi}:(u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",u.session)),{data:u,error:c})}catch(n){if(Q(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOtp(e){var n,r,s,a,o;try{if("email"in e){const{email:l,options:u}=e;let c=null,h=null;this.flowType==="pkce"&&([c,h]=await rr(this.storage,this.storageKey));const{error:d}=await Z(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(n=u==null?void 0:u.data)!==null&&n!==void 0?n:{},create_user:(r=u==null?void 0:u.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken},code_challenge:c,code_challenge_method:h},redirectTo:u==null?void 0:u.emailRedirectTo});return{data:{user:null,session:null},error:d}}if("phone"in e){const{phone:l,options:u}=e,{data:c,error:h}=await Z(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(s=u==null?void 0:u.data)!==null&&s!==void 0?s:{},create_user:(a=u==null?void 0:u.shouldCreateUser)!==null&&a!==void 0?a:!0,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken},channel:(o=u==null?void 0:u.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:c==null?void 0:c.message_id},error:h}}throw new Pi("You must provide either an email or phone number.")}catch(l){if(Q(l))return{data:{user:null,session:null},error:l};throw l}}async verifyOtp(e){var n,r;try{let s,a;"options"in e&&(s=(n=e.options)===null||n===void 0?void 0:n.redirectTo,a=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:o,error:l}=await Z(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:a}}),redirectTo:s,xform:Ut});if(l)throw l;if(!o)throw new Error("An error occurred on token verification.");const u=o.session,c=o.user;return u!=null&&u.access_token&&(await this._saveSession(u),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",u)),{data:{user:c,session:u},error:null}}catch(s){if(Q(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithSSO(e){var n,r,s;try{let a=null,o=null;return this.flowType==="pkce"&&([a,o]=await rr(this.storage,this.storageKey)),await Z(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(n=e.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((s=e==null?void 0:e.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:a,code_challenge_method:o}),headers:this.headers,xform:Oy})}catch(a){if(Q(a))return{data:null,error:a};throw a}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:n},error:r}=e;if(r)throw r;if(!n)throw new nn;const{error:s}=await Z(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return{data:{user:null,session:null},error:s}})}catch(e){if(Q(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const n=`${this.url}/resend`;if("email"in e){const{email:r,type:s,options:a}=e,{error:o}=await Z(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:s,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},redirectTo:a==null?void 0:a.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in e){const{phone:r,type:s,options:a}=e,{data:o,error:l}=await Z(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:s,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:l}}throw new Pi("You must provide either an email or phone number and a type")}catch(n){if(Q(n))return{data:{user:null,session:null},error:n};throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(e,n){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await e(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const n=await Tn(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?e=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at*1e3-Date.now()<Do:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.userStorage){const o=await Tn(this.userStorage,this.storageKey+"-user");o!=null&&o.user?e.user=o.user:e.user=Uo()}if(this.storage.isServer&&e.user){let o=this.suppressGetSessionWarning;e=new Proxy(e,{get:(u,c,h)=>(!o&&c==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(u,c,h))})}return{data:{session:e},error:null}}const{session:s,error:a}=await this._callRefreshToken(e.refresh_token);return a?{data:{session:null},error:a}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await Z(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:ln}):await this._useSession(async n=>{var r,s,a;const{data:o,error:l}=n;if(l)throw l;return!(!((r=o.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new nn}:await Z(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(a=(s=o.session)===null||s===void 0?void 0:s.access_token)!==null&&a!==void 0?a:void 0,xform:ln})})}catch(n){if(Q(n))return ty(n)&&(await this._removeSession(),await tn(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:n};throw n}}async updateUser(e,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,n))}async _updateUser(e,n={}){try{return await this._useSession(async r=>{const{data:s,error:a}=r;if(a)throw a;if(!s.session)throw new nn;const o=s.session;let l=null,u=null;this.flowType==="pkce"&&e.email!=null&&([l,u]=await rr(this.storage,this.storageKey));const{data:c,error:h}=await Z(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:l,code_challenge_method:u}),jwt:o.access_token,xform:ln});if(h)throw h;return o.user=c.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(r){if(Q(r))return{data:{user:null},error:r};throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new nn;const n=Date.now()/1e3;let r=n,s=!0,a=null;const{payload:o}=Mo(e.access_token);if(o.exp&&(r=o.exp,s=r<=n),s){const{session:l,error:u}=await this._callRefreshToken(e.refresh_token);if(u)return{data:{user:null,session:null},error:u};if(!l)return{data:{user:null,session:null},error:null};a=l}else{const{data:l,error:u}=await this._getUser(e.access_token);if(u)throw u;a={access_token:e.access_token,refresh_token:e.refresh_token,user:l.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)}return{data:{user:a.user,session:a},error:null}}catch(n){if(Q(n))return{data:{session:null,user:null},error:n};throw n}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async n=>{var r;if(!e){const{data:o,error:l}=n;if(l)throw l;e=(r=o.session)!==null&&r!==void 0?r:void 0}if(!(e!=null&&e.refresh_token))throw new nn;const{session:s,error:a}=await this._callRefreshToken(e.refresh_token);return a?{data:{user:null,session:null},error:a}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}})}catch(n){if(Q(n))return{data:{user:null,session:null},error:n};throw n}}async _getSessionFromURL(e,n){try{if(!bt())throw new Ti("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Ti(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new ih("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Ti("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new ih("No code detected.");const{data:m,error:f}=await this._exchangeCodeForSession(e.code);if(f)throw f;const y=new URL(window.location.href);return y.searchParams.delete("code"),window.history.replaceState(window.history.state,"",y.toString()),{data:{session:m.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:s,access_token:a,refresh_token:o,expires_in:l,expires_at:u,token_type:c}=e;if(!a||!l||!o||!c)throw new Ti("No session defined in URL");const h=Math.round(Date.now()/1e3),d=parseInt(l);let p=h+d;u&&(p=parseInt(u));const v=p-h;v*1e3<=cr&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${v}s, should have been closer to ${d}s`);const x=p-d;h-x>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",x,p,h):h-x<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",x,p,h);const{data:b,error:k}=await this._getUser(a);if(k)throw k;const g={provider_token:r,provider_refresh_token:s,access_token:a,expires_in:d,expires_at:p,refresh_token:o,token_type:c,user:b.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:g,redirectType:e.type},error:null}}catch(r){if(Q(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const n=await Tn(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&n)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:s,error:a}=n;if(a)return{error:a};const o=(r=s.session)===null||r===void 0?void 0:r.access_token;if(o){const{error:l}=await this.admin.signOut(o,e);if(l&&!(ey(l)&&(l.status===404||l.status===401||l.status===403)))return{error:l}}return e!=="others"&&(await this._removeSession(),await tn(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const n=dy(),r={id:n,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async n=>{var r,s;try{const{data:{session:a},error:o}=n;if(o)throw o;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",a)),this._debug("INITIAL_SESSION","callback id",e,"session",a)}catch(a){await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",a),console.error(a)}})}async resetPasswordForEmail(e,n={}){let r=null,s=null;this.flowType==="pkce"&&([r,s]=await rr(this.storage,this.storageKey,!0));try{return await Z(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:s,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(a){if(Q(a))return{data:null,error:a};throw a}}async getUserIdentities(){var e;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(e=n.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(n){if(Q(n))return{data:null,error:n};throw n}}async linkIdentity(e){var n;try{const{data:r,error:s}=await this._useSession(async a=>{var o,l,u,c,h;const{data:d,error:p}=a;if(p)throw p;const v=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(o=e.options)===null||o===void 0?void 0:o.redirectTo,scopes:(l=e.options)===null||l===void 0?void 0:l.scopes,queryParams:(u=e.options)===null||u===void 0?void 0:u.queryParams,skipBrowserRedirect:!0});return await Z(this.fetch,"GET",v,{headers:this.headers,jwt:(h=(c=d.session)===null||c===void 0?void 0:c.access_token)!==null&&h!==void 0?h:void 0})});if(s)throw s;return bt()&&!(!((n=e.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:e.provider,url:r==null?void 0:r.url},error:null}}catch(r){if(Q(r))return{data:{provider:e.provider,url:null},error:r};throw r}}async unlinkIdentity(e){try{return await this._useSession(async n=>{var r,s;const{data:a,error:o}=n;if(o)throw o;return await Z(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(s=(r=a.session)===null||r===void 0?void 0:r.access_token)!==null&&s!==void 0?s:void 0})})}catch(n){if(Q(n))return{data:null,error:n};throw n}}async _refreshAccessToken(e){const n=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await my(async s=>(s>0&&await py(200*Math.pow(2,s-1)),this._debug(n,"refreshing attempt",s),await Z(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Ut})),(s,a)=>{const o=200*Math.pow(2,s);return a&&Lo(a)&&Date.now()+o-r<cr})}catch(r){if(this._debug(n,"error",r),Q(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(n,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",n,"url",r),bt()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e,n;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const s=await Tn(this.storage,this.storageKey);if(s&&this.userStorage){let o=await Tn(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:s.user},await dr(this.userStorage,this.storageKey+"-user",o)),s.user=(e=o==null?void 0:o.user)!==null&&e!==void 0?e:Uo()}else if(s&&!s.user&&!s.user){const o=await Tn(this.storage,this.storageKey+"-user");o&&(o!=null&&o.user)?(s.user=o.user,await tn(this.storage,this.storageKey+"-user"),await dr(this.storage,this.storageKey,s)):s.user=Uo()}if(this._debug(r,"session from storage",s),!this._isValidSession(s)){this._debug(r,"session is not valid"),s!==null&&await this._removeSession();return}const a=((n=s.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<Do;if(this._debug(r,`session has${a?"":" not"} expired with margin of ${Do}s`),a){if(this.autoRefreshToken&&s.refresh_token){const{error:o}=await this._callRefreshToken(s.refresh_token);o&&(console.error(o),Lo(o)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(s.user&&s.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:l}=await this._getUser(s.access_token);!l&&(o!=null&&o.user)?(s.user=o.user,await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(r,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(r,"error",s),console.error(s);return}finally{this._debug(r,"end")}}async _callRefreshToken(e){var n,r;if(!e)throw new nn;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new Ka;const{data:a,error:o}=await this._refreshAccessToken(e);if(o)throw o;if(!a.session)throw new nn;await this._saveSession(a.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",a.session);const l={session:a.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(a){if(this._debug(s,"error",a),Q(a)){const o={session:null,error:a};return Lo(a)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(o),o}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(a),a}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(e,n,r=!0){const s=`#_notifyAllSubscribers(${e})`;this._debug(s,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:n});const a=[],o=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(e,n)}catch(u){a.push(u)}});if(await Promise.all(o),a.length>0){for(let l=0;l<a.length;l+=1)console.error(a[l]);throw a[0]}}finally{this._debug(s,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const n=Object.assign({},e),r=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&n.user&&await dr(this.userStorage,this.storageKey+"-user",{user:n.user});const s=Object.assign({},n);delete s.user;const a=ch(s);await dr(this.storage,this.storageKey,a)}else{const s=ch(n);await dr(this.storage,this.storageKey,s)}}async _removeSession(){this._debug("#_removeSession()"),await tn(this.storage,this.storageKey),await tn(this.storage,this.storageKey+"-code-verifier"),await tn(this.storage,this.storageKey+"-user"),this.userStorage&&await tn(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&bt()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),cr);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((r.expires_at*1e3-e)/cr);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${cr}ms, refresh threshold is ${Wl} ticks`),s<=Wl&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof v0)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!bt()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const n=`#_onVisibilityChanged(${e})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,n,r){const s=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&s.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&s.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[a,o]=await rr(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(a)}`,code_challenge_method:`${encodeURIComponent(o)}`});s.push(l.toString())}if(r!=null&&r.queryParams){const a=new URLSearchParams(r.queryParams);s.push(a.toString())}return r!=null&&r.skipBrowserRedirect&&s.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${s.join("&")}`}async _unenroll(e){try{return await this._useSession(async n=>{var r;const{data:s,error:a}=n;return a?{data:null,error:a}:await Z(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(Q(n))return{data:null,error:n};throw n}}async _enroll(e){try{return await this._useSession(async n=>{var r,s;const{data:a,error:o}=n;if(o)return{data:null,error:o};const l=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:u,error:c}=await Z(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(r=a==null?void 0:a.session)===null||r===void 0?void 0:r.access_token});return c?{data:null,error:c}:(e.factorType==="totp"&&(!((s=u==null?void 0:u.totp)===null||s===void 0)&&s.qr_code)&&(u.totp.qr_code=`data:image/svg+xml;utf-8,${u.totp.qr_code}`),{data:u,error:null})})}catch(n){if(Q(n))return{data:null,error:n};throw n}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:a}=n;if(a)return{data:null,error:a};const{data:o,error:l}=await Z(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});return l?{data:null,error:l}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:l})})}catch(n){if(Q(n))return{data:null,error:n};throw n}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:a}=n;return a?{data:null,error:a}:await Z(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(Q(n))return{data:null,error:n};throw n}})}async _challengeAndVerify(e){const{data:n,error:r}=await this._challenge({factorId:e.factorId});return r?{data:null,error:r}:await this._verify({factorId:e.factorId,challengeId:n.id,code:e.code})}async _listFactors(){const{data:{user:e},error:n}=await this.getUser();if(n)return{data:null,error:n};const r=(e==null?void 0:e.factors)||[],s=r.filter(o=>o.factor_type==="totp"&&o.status==="verified"),a=r.filter(o=>o.factor_type==="phone"&&o.status==="verified");return{data:{all:r,totp:s,phone:a},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var n,r;const{data:{session:s},error:a}=e;if(a)return{data:null,error:a};if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=Mo(s.access_token);let l=null;o.aal&&(l=o.aal);let u=l;((r=(n=s.user.factors)===null||n===void 0?void 0:n.filter(d=>d.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(u="aal2");const h=o.amr||[];return{data:{currentLevel:l,nextLevel:u,currentAuthenticationMethods:h},error:null}}))}async fetchJwk(e,n={keys:[]}){let r=n.keys.find(l=>l.kid===e);if(r)return r;const s=Date.now();if(r=this.jwks.keys.find(l=>l.kid===e),r&&this.jwks_cached_at+Yx>s)return r;const{data:a,error:o}=await Z(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!a.keys||a.keys.length===0||(this.jwks=a,this.jwks_cached_at=s,r=a.keys.find(l=>l.kid===e),!r)?null:r}async getClaims(e,n={}){try{let r=e;if(!r){const{data:v,error:x}=await this.getSession();if(x||!v.session)return{data:null,error:x};r=v.session.access_token}const{header:s,payload:a,signature:o,raw:{header:l,payload:u}}=Mo(r);n!=null&&n.allowExpired||_y(a.exp);const c=!s.alg||s.alg.startsWith("HS")||!s.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(s.kid,n!=null&&n.keys?{keys:n.keys}:n==null?void 0:n.jwks);if(!c){const{error:v}=await this.getUser(r);if(v)throw v;return{data:{claims:a,header:s,signature:o},error:null}}const h=jy(s.alg),d=await crypto.subtle.importKey("jwk",c,h,!0,["verify"]);if(!await crypto.subtle.verify(h,d,o,ly(`${l}.${u}`)))throw new Xl("Invalid JWT signature");return{data:{claims:a,header:s,signature:o},error:null}}catch(r){if(Q(r))return{data:null,error:r};throw r}}}Vs.nextInstanceID=0;const Uy=Vs;class zy extends Uy{constructor(e){super(e)}}var By=function(t,e,n,r){function s(a){return a instanceof n?a:new n(function(o){o(a)})}return new(n||(n=Promise))(function(a,o){function l(h){try{c(r.next(h))}catch(d){o(d)}}function u(h){try{c(r.throw(h))}catch(d){o(d)}}function c(h){h.done?a(h.value):s(h.value).then(l,u)}c((r=r.apply(t,e||[])).next())})};class Fy{constructor(e,n,r){var s,a,o;this.supabaseUrl=e,this.supabaseKey=n;const l=Wx(e);if(!n)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",l),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",l),this.storageUrl=new URL("storage/v1",l),this.functionsUrl=new URL("functions/v1",l);const u=`sb-${l.hostname.split(".")[0]}-auth-token`,c={db:Lx,realtime:Ux,auth:Object.assign(Object.assign({},Mx),{storageKey:u}),global:Dx},h=Vx(r??{},c);this.storageKey=(s=h.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(a=h.global.headers)!==null&&a!==void 0?a:{},h.accessToken?(this.accessToken=h.accessToken,this.auth=new Proxy({},{get:(d,p)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(p)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=h.auth)!==null&&o!==void 0?o:{},this.headers,h.global.fetch),this.fetch=qx(n,this._getAccessToken.bind(this),h.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},h.realtime)),this.rest=new rx(new URL("rest/v1",l).href,{headers:this.headers,schema:h.db.schema,fetch:this.fetch}),this.storage=new Ax(this.storageUrl.href,this.headers,this.fetch,r==null?void 0:r.storage),h.accessToken||this._listenForAuthEvents()}get functions(){return new Rv(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,n={},r={}){return this.rest.rpc(e,n,r)}channel(e,n={config:{}}){return this.realtime.channel(e,n)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,n;return By(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return(n=(e=r.session)===null||e===void 0?void 0:e.access_token)!==null&&n!==void 0?n:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:s,userStorage:a,storageKey:o,flowType:l,lock:u,debug:c},h,d){const p={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new zy({url:this.authUrl.href,headers:Object.assign(Object.assign({},p),h),storageKey:o,autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:s,userStorage:a,flowType:l,lock:u,debug:c,fetch:d,hasCustomAuthorizationHeader:Object.keys(this.headers).some(v=>v.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new wx(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,r)=>{this._handleTokenChanged(n,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(e,n,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?this.changedAccessToken=r:e==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const qy=(t,e,n)=>new Fy(t,e,n);function Hy(){if(typeof window<"u"||typeof process>"u")return!1;const t=process.version;if(t==null)return!1;const e=t.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}Hy()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const Gy="https://ftjukgofugzoxhvqhrez.supabase.co",Vy="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImZ0anVrZ29mdWd6b3hodnFocmV6Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjE2NjQyMDksImV4cCI6MjA3NzI0MDIwOX0.j8kwtLaklvEB59X4_ir3HBGGkUmXfFbnl4M8lFC8wZM",T=qy(Gy,Vy),x0=j.createContext(void 0);function Wy({children:t}){const[e,n]=j.useState(null),[r,s]=j.useState(null),[a,o]=j.useState(!0);j.useEffect(()=>{T.auth.getSession().then(({data:{session:p}})=>{n((p==null?void 0:p.user)??null),p!=null&&p.user?l(p.user.id):o(!1)});const{data:{subscription:d}}=T.auth.onAuthStateChange((p,v)=>{n((v==null?void 0:v.user)??null),v!=null&&v.user?l(v.user.id):(s(null),o(!1))});return()=>d.unsubscribe()},[]);const l=async d=>{try{const{data:p,error:v}=await T.from("profiles").select("*").eq("id",d).maybeSingle();if(v)throw v;s(p)}catch(p){console.error("Error loading profile:",p)}finally{o(!1)}},u=async(d,p)=>{const{error:v}=await T.auth.signInWithPassword({email:d,password:p});if(v)throw v},c=async(d,p,v,x)=>{const{data:b,error:k}=await T.auth.signUp({email:d,password:p});if(k)throw k;if(b.user){const{error:g}=await T.from("profiles").insert([{id:b.user.id,email:d,full_name:v,role:x}]);if(g)throw g}},h=async()=>{const{error:d}=await T.auth.signOut();if(d)throw d};return i.jsx(x0.Provider,{value:{user:e,profile:r,loading:a,signIn:u,signUp:c,signOut:h},children:t})}function vt(){const t=j.useContext(x0);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t}/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Ky={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qy=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),W=(t,e)=>{const n=j.forwardRef(({color:r="currentColor",size:s=24,strokeWidth:a=2,absoluteStrokeWidth:o,className:l="",children:u,...c},h)=>j.createElement("svg",{ref:h,...Ky,width:s,height:s,stroke:r,strokeWidth:o?Number(a)*24/Number(s):a,className:["lucide",`lucide-${Qy(t)}`,l].join(" "),...c},[...e.map(([d,p])=>j.createElement(d,p)),...Array.isArray(u)?u:[u]]));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jl=W("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xy=W("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jy=W("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mh=W("Barcode",[["path",{d:"M3 5v14",key:"1nt18q"}],["path",{d:"M8 5v14",key:"1ybrkv"}],["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"M17 5v14",key:"ycjyhj"}],["path",{d:"M21 5v14",key:"nzette"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y0=W("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gh=W("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yy=W("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _a=W("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zy=W("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Es=W("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w0=W("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yl=W("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b0=W("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vh=W("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zl=W("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e1=W("FileDown",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M12 18v-6",key:"17g6i2"}],["path",{d:"m9 15 3 3 3-3",key:"1npd3o"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ja=W("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _0=W("IndianRupee",[["path",{d:"M6 3h12",key:"ggurg9"}],["path",{d:"M6 8h12",key:"6g4wlu"}],["path",{d:"m6 13 8.5 8",key:"u1kupk"}],["path",{d:"M6 13h3",key:"wdp6ag"}],["path",{d:"M9 13c6.667 0 6.667-10 0-10",key:"1nkvk2"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t1=W("Key",[["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["path",{d:"m15.5 7.5 3 3L22 7l-3-3",key:"1rn1fs"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n1=W("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xh=W("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r1=W("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s1=W("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i1=W("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ka=W("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j0=W("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a1=W("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eu=W("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o1=W("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l1=W("Pencil",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k0=W("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _n=W("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cs=W("Printer",[["polyline",{points:"6 9 6 2 18 2 18 9",key:"1306q4"}],["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["rect",{width:"12",height:"8",x:"6",y:"14",key:"5ipwut"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Na=W("Receipt",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tu=W("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u1=W("Scan",[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jn=W("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c1=W("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d1=W("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jt=W("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nu=W("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ru=W("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h1=W("Truck",[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f1=W("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sa=W("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ea=W("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ws=W("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);function p1(){const[t,e]=j.useState(""),[n,r]=j.useState(""),[s,a]=j.useState(""),[o,l]=j.useState(!1),{signIn:u}=vt(),c=async h=>{h.preventDefault(),a(""),l(!0);try{await u(t,n)}catch(d){a(d instanceof Error?d.message:"Failed to sign in")}finally{l(!1)}};return i.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900",children:i.jsxs("div",{className:"w-full max-w-md p-8 bg-white rounded-2xl shadow-2xl",children:[i.jsx("div",{className:"flex items-center justify-center mb-8",children:i.jsx("div",{className:"bg-blue-600 p-3 rounded-xl",children:i.jsx(s1,{className:"w-8 h-8 text-white"})})}),i.jsx("h1",{className:"text-3xl font-bold text-center mb-2 text-slate-900",children:"Welcome Back"}),i.jsx("p",{className:"text-center text-slate-600 mb-8",children:"Sign in to your account"}),s&&i.jsx("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg text-red-700 text-sm",children:s}),i.jsxs("form",{onSubmit:c,className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-slate-700 mb-2",children:"Email Address"}),i.jsx("input",{id:"email",type:"email",value:t,onChange:h=>e(h.target.value),required:!0,className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition",placeholder:"you@example.com"})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-slate-700 mb-2",children:"Password"}),i.jsx("input",{id:"password",type:"password",value:n,onChange:h=>r(h.target.value),required:!0,className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition",placeholder:""})]}),i.jsx("button",{type:"submit",disabled:o,className:"w-full py-3 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-lg transition disabled:opacity-50 disabled:cursor-not-allowed",children:o?"Signing in...":"Sign In"})]})]})})}const m1=[{name:"Dashboard",icon:n1,path:"dashboard",roles:["admin","sales_person","inventory_person","purchase_person"]},{name:"Inventory",icon:eu,path:"inventory",roles:["admin","inventory_person"]},{name:"Invoices",icon:ja,path:"invoices",roles:["admin","sales_person"]},{name:"Payment Receivables",icon:Na,path:"receivables",roles:["admin","sales_person"]},{name:"Customers",icon:Ea,path:"customers",roles:["admin","sales_person"]},{name:"Suppliers",icon:h1,path:"suppliers",roles:["admin","purchase_person","inventory_person"]},{name:"Purchases",icon:c1,path:"purchases",roles:["admin","purchase_person","inventory_person"]},{name:"Accounting",icon:Jy,path:"accounting",roles:["admin"]},{name:"Employees",icon:Sa,path:"employees",roles:["admin"]},{name:"Company Profile",icon:y0,path:"profile",roles:["admin"]}];function g1({children:t}){var d;const{profile:e,signOut:n}=vt(),[r,s]=j.useState("dashboard"),[a,o]=j.useState(!1),[l,u]=j.useState("BizManager");j.useEffect(()=>{(async()=>{try{const{data:v}=await T.from("company_profile").select("company_name").maybeSingle();v!=null&&v.company_name&&u(v.company_name)}catch(v){console.error("Error loading company name:",v)}})()},[]);const c=m1.filter(p=>p.roles.includes((e==null?void 0:e.role)||"")),h=async()=>{try{await n(),window.location.reload()}catch(p){console.error("Error signing out:",p),alert("Failed to sign out. Please try again.")}};return i.jsxs("div",{className:"min-h-screen bg-slate-50",children:[i.jsxs("div",{className:"flex",children:[i.jsx("aside",{className:`fixed inset-y-0 left-0 z-50 w-64 bg-white shadow-lg transform transition-transform duration-300 ease-in-out lg:translate-x-0 ${a?"translate-x-0":"-translate-x-full"}`,children:i.jsxs("div",{className:"h-full flex flex-col",children:[i.jsxs("div",{className:"p-6 border-b border-slate-200",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:l}),i.jsx("button",{onClick:()=>o(!1),className:"lg:hidden text-slate-600 hover:text-slate-900",children:i.jsx(Ws,{className:"w-6 h-6"})})]}),i.jsxs("div",{className:"mt-4",children:[i.jsx("p",{className:"text-sm font-medium text-slate-900",children:e==null?void 0:e.full_name}),i.jsx("p",{className:"text-xs text-slate-500 capitalize",children:(d=e==null?void 0:e.role)==null?void 0:d.replace("_"," ")})]})]}),i.jsx("nav",{className:"flex-1 p-4 space-y-2 overflow-y-auto",children:c.map(p=>{const v=p.icon;return i.jsxs("button",{onClick:()=>{s(p.path),o(!1)},className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg transition ${r===p.path?"bg-blue-50 text-blue-600":"text-slate-700 hover:bg-slate-100"}`,children:[i.jsx(v,{className:"w-5 h-5"}),i.jsx("span",{className:"font-medium",children:p.name})]},p.path)})}),i.jsxs("div",{className:"p-4 border-t border-slate-200 space-y-2",children:[i.jsxs("button",{onClick:()=>{s("manage-profile"),o(!1)},className:"w-full flex items-center gap-3 px-4 py-3 text-slate-700 hover:bg-slate-100 rounded-lg transition",children:[i.jsx(Sa,{className:"w-5 h-5"}),i.jsx("span",{className:"font-medium",children:"Manage Profile"})]}),i.jsxs("button",{onClick:h,className:"w-full flex items-center gap-3 px-4 py-3 text-slate-700 hover:bg-slate-100 rounded-lg transition",children:[i.jsx(i1,{className:"w-5 h-5"}),i.jsx("span",{className:"font-medium",children:"Sign Out"})]})]})]})}),i.jsxs("div",{className:"flex-1 lg:ml-64",children:[i.jsx("header",{className:"bg-white shadow-sm border-b border-slate-200",children:i.jsxs("div",{className:"px-6 py-4 flex items-center justify-between",children:[i.jsx("button",{onClick:()=>o(!0),className:"lg:hidden text-slate-600 hover:text-slate-900",children:i.jsx(a1,{className:"w-6 h-6"})}),i.jsx("h2",{className:"text-2xl font-bold text-slate-900 capitalize",children:r.replace("_"," ")}),i.jsx("div",{className:"w-10 lg:hidden"})]})}),i.jsx("main",{className:"p-6",children:t({currentView:r,setCurrentView:s})})]})]}),a&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-40 lg:hidden",onClick:()=>o(!1)})]})}function V(t){return new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:2,maximumFractionDigits:2}).format(t)}function yh({setCurrentView:t}){const[e,n]=j.useState({totalProducts:0,lowStockProducts:0,totalInvoices:0,totalRevenue:0,pendingInvoices:0,totalCustomers:0}),[r,s]=j.useState(!0);j.useEffect(()=>{a()},[]);const a=async()=>{var l,u,c,h,d;try{const[p,v,x]=await Promise.all([T.from("products").select("quantity, reorder_level"),T.from("invoices").select("status, total"),T.from("customers").select("id",{count:"exact",head:!0})]),b=((l=p.data)==null?void 0:l.length)||0,k=((u=p.data)==null?void 0:u.filter(_=>_.quantity<=_.reorder_level).length)||0,g=((c=v.data)==null?void 0:c.length)||0,m=((h=v.data)==null?void 0:h.filter(_=>_.status!=="paid").length)||0,f=((d=v.data)==null?void 0:d.reduce((_,w)=>_+(w.status==="paid"?Number(w.total):0),0))||0,y=x.count||0;n({totalProducts:b,lowStockProducts:k,totalInvoices:g,totalRevenue:f,pendingInvoices:m,totalCustomers:y})}catch(p){console.error("Error loading stats:",p)}finally{s(!1)}},o=[{title:"Total Revenue",value:V(e.totalRevenue),icon:Yl,color:"bg-green-500",trend:"+12%",trendUp:!0},{title:"Total Products",value:e.totalProducts.toString(),icon:eu,color:"bg-blue-500",subtitle:`${e.lowStockProducts} low stock`},{title:"Total Invoices",value:e.totalInvoices.toString(),icon:ja,color:"bg-orange-500",subtitle:`${e.pendingInvoices} pending`},{title:"Total Customers",value:e.totalCustomers.toString(),icon:Ea,color:"bg-purple-500",trend:"+8%",trendUp:!0}];return r?i.jsx("div",{className:"flex items-center justify-center h-64",children:i.jsx("div",{className:"text-slate-600",children:"Loading dashboard..."})}):i.jsxs("div",{className:"space-y-6",children:[i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:o.map(l=>{const u=l.icon;return i.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsx("div",{className:`${l.color} p-3 rounded-lg`,children:i.jsx(u,{className:"w-6 h-6 text-white"})}),l.trend&&i.jsxs("div",{className:`flex items-center gap-1 text-sm font-medium ${l.trendUp?"text-green-600":"text-red-600"}`,children:[l.trendUp?i.jsx(ru,{className:"w-4 h-4"}):i.jsx(nu,{className:"w-4 h-4"}),l.trend]})]}),i.jsx("h3",{className:"text-slate-600 text-sm font-medium mb-1",children:l.title}),i.jsx("p",{className:"text-3xl font-bold text-slate-900",children:l.value}),l.subtitle&&i.jsx("p",{className:"text-sm text-slate-500 mt-2",children:l.subtitle})]},l.title)})}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[i.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-6",children:[i.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-4",children:"Quick Actions"}),i.jsxs("div",{className:"space-y-3",children:[i.jsx("button",{onClick:()=>t("invoices"),className:"w-full px-4 py-3 bg-blue-50 hover:bg-blue-100 text-blue-700 font-medium rounded-lg transition text-left",children:"Create New Invoice"}),i.jsx("button",{onClick:()=>t("inventory"),className:"w-full px-4 py-3 bg-green-50 hover:bg-green-100 text-green-700 font-medium rounded-lg transition text-left",children:"Add New Product"}),i.jsx("button",{onClick:()=>t("customers"),className:"w-full px-4 py-3 bg-orange-50 hover:bg-orange-100 text-orange-700 font-medium rounded-lg transition text-left",children:"Add New Customer"})]})]}),i.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-6",children:[i.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-4",children:"Recent Activity"}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center gap-3 pb-3 border-b border-slate-100",children:[i.jsx("div",{className:"bg-blue-100 p-2 rounded-lg",children:i.jsx(ja,{className:"w-4 h-4 text-blue-600"})}),i.jsxs("div",{className:"flex-1",children:[i.jsx("p",{className:"text-sm font-medium text-slate-900",children:"New invoice created"}),i.jsx("p",{className:"text-xs text-slate-500",children:"2 hours ago"})]})]}),i.jsxs("div",{className:"flex items-center gap-3 pb-3 border-b border-slate-100",children:[i.jsx("div",{className:"bg-green-100 p-2 rounded-lg",children:i.jsx(eu,{className:"w-4 h-4 text-green-600"})}),i.jsxs("div",{className:"flex-1",children:[i.jsx("p",{className:"text-sm font-medium text-slate-900",children:"Product stock updated"}),i.jsx("p",{className:"text-xs text-slate-500",children:"5 hours ago"})]})]}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"bg-orange-100 p-2 rounded-lg",children:i.jsx(Ea,{className:"w-4 h-4 text-orange-600"})}),i.jsxs("div",{className:"flex-1",children:[i.jsx("p",{className:"text-sm font-medium text-slate-900",children:"New customer added"}),i.jsx("p",{className:"text-xs text-slate-500",children:"1 day ago"})]})]})]})]})]})]})}var uc={},Qa={},He={};Object.defineProperty(He,"__esModule",{value:!0});function v1(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var x1=function t(e,n){v1(this,t),this.data=e,this.text=n.text||e,this.options=n};He.default=x1;Object.defineProperty(Qa,"__esModule",{value:!0});Qa.CODE39=void 0;var y1=function(){function t(e,n){for(var r=0;r<n.length;r++){var s=n[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),w1=He,b1=_1(w1);function _1(t){return t&&t.__esModule?t:{default:t}}function j1(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function k1(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function N1(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var S1=function(t){N1(e,t);function e(n,r){return j1(this,e),n=n.toUpperCase(),r.mod43&&(n+=O1(P1(n))),k1(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n,r))}return y1(e,[{key:"encode",value:function(){for(var r=Bo("*"),s=0;s<this.data.length;s++)r+=Bo(this.data[s])+"0";return r+=Bo("*"),{data:r,text:this.text}}},{key:"valid",value:function(){return this.data.search(/^[0-9A-Z\-\.\ \$\/\+\%]+$/)!==-1}}]),e}(b1.default),N0=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","-","."," ","$","/","+","%","*"],E1=[20957,29783,23639,30485,20951,29813,23669,20855,29789,23645,29975,23831,30533,22295,30149,24005,21623,29981,23837,22301,30023,23879,30545,22343,30161,24017,21959,30065,23921,22385,29015,18263,29141,17879,29045,18293,17783,29021,18269,17477,17489,17681,20753,35770];function Bo(t){return C1(S0(t))}function C1(t){return E1[t].toString(2)}function O1(t){return N0[t]}function S0(t){return N0.indexOf(t)}function P1(t){for(var e=0,n=0;n<t.length;n++)e+=S0(t[n]);return e=e%43,e}Qa.CODE39=S1;var It={},cc={},Vr={},de={};Object.defineProperty(de,"__esModule",{value:!0});var as;function Fo(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var E0=de.SET_A=0,C0=de.SET_B=1,O0=de.SET_C=2;de.SHIFT=98;var T1=de.START_A=103,$1=de.START_B=104,A1=de.START_C=105;de.MODULO=103;de.STOP=106;de.FNC1=207;de.SET_BY_CODE=(as={},Fo(as,T1,E0),Fo(as,$1,C0),Fo(as,A1,O0),as);de.SWAP={101:E0,100:C0,99:O0};de.A_START_CHAR="";de.B_START_CHAR="";de.C_START_CHAR="";de.A_CHARS="[\0-_-]";de.B_CHARS="[ --]";de.C_CHARS="(*[0-9]{2}*)";de.BARS=[11011001100,11001101100,11001100110,10010011e3,10010001100,10001001100,10011001e3,10011000100,10001100100,11001001e3,11001000100,11000100100,10110011100,10011011100,10011001110,10111001100,10011101100,10011100110,11001110010,11001011100,11001001110,11011100100,11001110100,11101101110,11101001100,11100101100,11100100110,11101100100,11100110100,11100110010,11011011e3,11011000110,11000110110,10100011e3,10001011e3,10001000110,10110001e3,10001101e3,10001100010,11010001e3,11000101e3,11000100010,10110111e3,10110001110,10001101110,10111011e3,10111000110,10001110110,11101110110,11010001110,11000101110,11011101e3,11011100010,11011101110,11101011e3,11101000110,11100010110,11101101e3,11101100010,11100011010,11101111010,11001000010,11110001010,1010011e4,10100001100,1001011e4,10010000110,10000101100,10000100110,1011001e4,10110000100,1001101e4,10011000010,10000110100,10000110010,11000010010,1100101e4,11110111010,11000010100,10001111010,10100111100,10010111100,10010011110,10111100100,10011110100,10011110010,11110100100,11110010100,11110010010,11011011110,11011110110,11110110110,10101111e3,10100011110,10001011110,10111101e3,10111100010,11110101e3,11110100010,10111011110,10111101110,11101011110,11110101110,11010000100,1101001e4,11010011100,1100011101011];Object.defineProperty(Vr,"__esModule",{value:!0});var I1=function(){function t(e,n){for(var r=0;r<n.length;r++){var s=n[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),R1=He,D1=L1(R1),et=de;function L1(t){return t&&t.__esModule?t:{default:t}}function M1(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function U1(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function z1(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var B1=function(t){z1(e,t);function e(n,r){M1(this,e);var s=U1(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n.substring(1),r));return s.bytes=n.split("").map(function(a){return a.charCodeAt(0)}),s}return I1(e,[{key:"valid",value:function(){return/^[\x00-\x7F\xC8-\xD3]+$/.test(this.data)}},{key:"encode",value:function(){var r=this.bytes,s=r.shift()-105,a=et.SET_BY_CODE[s];if(a===void 0)throw new RangeError("The encoding does not start with a start character.");this.shouldEncodeAsEan128()===!0&&r.unshift(et.FNC1);var o=e.next(r,1,a);return{text:this.text===this.data?this.text.replace(/[^\x20-\x7E]/g,""):this.text,data:e.getBar(s)+o.result+e.getBar((o.checksum+s)%et.MODULO)+e.getBar(et.STOP)}}},{key:"shouldEncodeAsEan128",value:function(){var r=this.options.ean128||!1;return typeof r=="string"&&(r=r.toLowerCase()==="true"),r}}],[{key:"getBar",value:function(r){return et.BARS[r]?et.BARS[r].toString():""}},{key:"correctIndex",value:function(r,s){if(s===et.SET_A){var a=r.shift();return a<32?a+64:a-32}else return s===et.SET_B?r.shift()-32:(r.shift()-48)*10+r.shift()-48}},{key:"next",value:function(r,s,a){if(!r.length)return{result:"",checksum:0};var o=void 0,l=void 0;if(r[0]>=200){l=r.shift()-105;var u=et.SWAP[l];u!==void 0?o=e.next(r,s+1,u):((a===et.SET_A||a===et.SET_B)&&l===et.SHIFT&&(r[0]=a===et.SET_A?r[0]>95?r[0]-96:r[0]:r[0]<32?r[0]+96:r[0]),o=e.next(r,s+1,a))}else l=e.correctIndex(r,a),o=e.next(r,s+1,a);var c=e.getBar(l),h=l*s;return{result:c+o.result,checksum:h+o.checksum}}}]),e}(D1.default);Vr.default=B1;var dc={};Object.defineProperty(dc,"__esModule",{value:!0});var yn=de,P0=function(e){return e.match(new RegExp("^"+yn.A_CHARS+"*"))[0].length},T0=function(e){return e.match(new RegExp("^"+yn.B_CHARS+"*"))[0].length},$0=function(e){return e.match(new RegExp("^"+yn.C_CHARS+"*"))[0]};function hc(t,e){var n=e?yn.A_CHARS:yn.B_CHARS,r=t.match(new RegExp("^("+n+"+?)(([0-9]{2}){2,})([^0-9]|$)"));if(r)return r[1]+""+A0(t.substring(r[1].length));var s=t.match(new RegExp("^"+n+"+"))[0];return s.length===t.length?t:s+String.fromCharCode(e?205:206)+hc(t.substring(s.length),!e)}function A0(t){var e=$0(t),n=e.length;if(n===t.length)return t;t=t.substring(n);var r=P0(t)>=T0(t);return e+String.fromCharCode(r?206:205)+hc(t,r)}dc.default=function(t){var e=void 0,n=$0(t).length;if(n>=2)e=yn.C_START_CHAR+A0(t);else{var r=P0(t)>T0(t);e=(r?yn.A_START_CHAR:yn.B_START_CHAR)+hc(t,r)}return e.replace(/[\xCD\xCE]([^])[\xCD\xCE]/,function(s,a){return""+a})};Object.defineProperty(cc,"__esModule",{value:!0});var F1=Vr,q1=I0(F1),H1=dc,G1=I0(H1);function I0(t){return t&&t.__esModule?t:{default:t}}function V1(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function qo(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function W1(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var K1=function(t){W1(e,t);function e(n,r){if(V1(this,e),/^[\x00-\x7F\xC8-\xD3]+$/.test(n))var s=qo(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,(0,G1.default)(n),r));else var s=qo(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n,r));return qo(s)}return e}(q1.default);cc.default=K1;var fc={};Object.defineProperty(fc,"__esModule",{value:!0});var Q1=function(){function t(e,n){for(var r=0;r<n.length;r++){var s=n[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),X1=Vr,J1=Y1(X1),wh=de;function Y1(t){return t&&t.__esModule?t:{default:t}}function Z1(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ew(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function tw(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var nw=function(t){tw(e,t);function e(n,r){return Z1(this,e),ew(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,wh.A_START_CHAR+n,r))}return Q1(e,[{key:"valid",value:function(){return new RegExp("^"+wh.A_CHARS+"+$").test(this.data)}}]),e}(J1.default);fc.default=nw;var pc={};Object.defineProperty(pc,"__esModule",{value:!0});var rw=function(){function t(e,n){for(var r=0;r<n.length;r++){var s=n[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),sw=Vr,iw=aw(sw),bh=de;function aw(t){return t&&t.__esModule?t:{default:t}}function ow(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function lw(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function uw(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var cw=function(t){uw(e,t);function e(n,r){return ow(this,e),lw(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,bh.B_START_CHAR+n,r))}return rw(e,[{key:"valid",value:function(){return new RegExp("^"+bh.B_CHARS+"+$").test(this.data)}}]),e}(iw.default);pc.default=cw;var mc={};Object.defineProperty(mc,"__esModule",{value:!0});var dw=function(){function t(e,n){for(var r=0;r<n.length;r++){var s=n[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),hw=Vr,fw=pw(hw),_h=de;function pw(t){return t&&t.__esModule?t:{default:t}}function mw(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function gw(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function vw(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var xw=function(t){vw(e,t);function e(n,r){return mw(this,e),gw(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,_h.C_START_CHAR+n,r))}return dw(e,[{key:"valid",value:function(){return new RegExp("^"+_h.C_CHARS+"+$").test(this.data)}}]),e}(fw.default);mc.default=xw;Object.defineProperty(It,"__esModule",{value:!0});It.CODE128C=It.CODE128B=It.CODE128A=It.CODE128=void 0;var yw=cc,ww=Xa(yw),bw=fc,_w=Xa(bw),jw=pc,kw=Xa(jw),Nw=mc,Sw=Xa(Nw);function Xa(t){return t&&t.__esModule?t:{default:t}}It.CODE128=ww.default;It.CODE128A=_w.default;It.CODE128B=kw.default;It.CODE128C=Sw.default;var Ke={},gc={},xt={};Object.defineProperty(xt,"__esModule",{value:!0});xt.SIDE_BIN="101";xt.MIDDLE_BIN="01010";xt.BINARIES={L:["0001101","0011001","0010011","0111101","0100011","0110001","0101111","0111011","0110111","0001011"],G:["0100111","0110011","0011011","0100001","0011101","0111001","0000101","0010001","0001001","0010111"],R:["1110010","1100110","1101100","1000010","1011100","1001110","1010000","1000100","1001000","1110100"],O:["0001101","0011001","0010011","0111101","0100011","0110001","0101111","0111011","0110111","0001011"],E:["0100111","0110011","0011011","0100001","0011101","0111001","0000101","0010001","0001001","0010111"]};xt.EAN2_STRUCTURE=["LL","LG","GL","GG"];xt.EAN5_STRUCTURE=["GGLLL","GLGLL","GLLGL","GLLLG","LGGLL","LLGGL","LLLGG","LGLGL","LGLLG","LLGLG"];xt.EAN13_STRUCTURE=["LLLLLL","LLGLGG","LLGGLG","LLGGGL","LGLLGG","LGGLLG","LGGGLL","LGLGLG","LGLGGL","LGGLGL"];var Ja={},Xn={};Object.defineProperty(Xn,"__esModule",{value:!0});var Ew=xt,Cw=function(e,n,r){var s=e.split("").map(function(o,l){return Ew.BINARIES[n[l]]}).map(function(o,l){return o?o[e[l]]:""});if(r){var a=e.length-1;s=s.map(function(o,l){return l<a?o+r:o})}return s.join("")};Xn.default=Cw;Object.defineProperty(Ja,"__esModule",{value:!0});var Ow=function(){function t(e,n){for(var r=0;r<n.length;r++){var s=n[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),or=xt,Pw=Xn,jh=R0(Pw),Tw=He,$w=R0(Tw);function R0(t){return t&&t.__esModule?t:{default:t}}function Aw(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Iw(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function Rw(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var Dw=function(t){Rw(e,t);function e(n,r){Aw(this,e);var s=Iw(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n,r));return s.fontSize=!r.flat&&r.fontSize>r.width*10?r.width*10:r.fontSize,s.guardHeight=r.height+s.fontSize/2+r.textMargin,s}return Ow(e,[{key:"encode",value:function(){return this.options.flat?this.encodeFlat():this.encodeGuarded()}},{key:"leftText",value:function(r,s){return this.text.substr(r,s)}},{key:"leftEncode",value:function(r,s){return(0,jh.default)(r,s)}},{key:"rightText",value:function(r,s){return this.text.substr(r,s)}},{key:"rightEncode",value:function(r,s){return(0,jh.default)(r,s)}},{key:"encodeGuarded",value:function(){var r={fontSize:this.fontSize},s={height:this.guardHeight};return[{data:or.SIDE_BIN,options:s},{data:this.leftEncode(),text:this.leftText(),options:r},{data:or.MIDDLE_BIN,options:s},{data:this.rightEncode(),text:this.rightText(),options:r},{data:or.SIDE_BIN,options:s}]}},{key:"encodeFlat",value:function(){var r=[or.SIDE_BIN,this.leftEncode(),or.MIDDLE_BIN,this.rightEncode(),or.SIDE_BIN];return{data:r.join(""),text:this.text}}}]),e}($w.default);Ja.default=Dw;Object.defineProperty(gc,"__esModule",{value:!0});var Lw=function(){function t(e,n){for(var r=0;r<n.length;r++){var s=n[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),os=function t(e,n,r){e===null&&(e=Function.prototype);var s=Object.getOwnPropertyDescriptor(e,n);if(s===void 0){var a=Object.getPrototypeOf(e);return a===null?void 0:t(a,n,r)}else{if("value"in s)return s.value;var o=s.get;return o===void 0?void 0:o.call(r)}},Mw=xt,Uw=Ja,zw=Bw(Uw);function Bw(t){return t&&t.__esModule?t:{default:t}}function Fw(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function qw(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function Hw(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var kh=function(e){var n=e.substr(0,12).split("").map(function(r){return+r}).reduce(function(r,s,a){return a%2?r+s*3:r+s},0);return(10-n%10)%10},Gw=function(t){Hw(e,t);function e(n,r){Fw(this,e),n.search(/^[0-9]{12}$/)!==-1&&(n+=kh(n));var s=qw(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n,r));return s.lastChar=r.lastChar,s}return Lw(e,[{key:"valid",value:function(){return this.data.search(/^[0-9]{13}$/)!==-1&&+this.data[12]===kh(this.data)}},{key:"leftText",value:function(){return os(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"leftText",this).call(this,1,6)}},{key:"leftEncode",value:function(){var r=this.data.substr(1,6),s=Mw.EAN13_STRUCTURE[this.data[0]];return os(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"leftEncode",this).call(this,r,s)}},{key:"rightText",value:function(){return os(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"rightText",this).call(this,7,6)}},{key:"rightEncode",value:function(){var r=this.data.substr(7,6);return os(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"rightEncode",this).call(this,r,"RRRRRR")}},{key:"encodeGuarded",value:function(){var r=os(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"encodeGuarded",this).call(this);return this.options.displayValue&&(r.unshift({data:"000000000000",text:this.text.substr(0,1),options:{textAlign:"left",fontSize:this.fontSize}}),this.options.lastChar&&(r.push({data:"00"}),r.push({data:"00000",text:this.options.lastChar,options:{fontSize:this.fontSize}}))),r}}]),e}(zw.default);gc.default=Gw;var vc={};Object.defineProperty(vc,"__esModule",{value:!0});var Vw=function(){function t(e,n){for(var r=0;r<n.length;r++){var s=n[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),$i=function t(e,n,r){e===null&&(e=Function.prototype);var s=Object.getOwnPropertyDescriptor(e,n);if(s===void 0){var a=Object.getPrototypeOf(e);return a===null?void 0:t(a,n,r)}else{if("value"in s)return s.value;var o=s.get;return o===void 0?void 0:o.call(r)}},Ww=Ja,Kw=Qw(Ww);function Qw(t){return t&&t.__esModule?t:{default:t}}function Xw(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Jw(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function Yw(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var Nh=function(e){var n=e.substr(0,7).split("").map(function(r){return+r}).reduce(function(r,s,a){return a%2?r+s:r+s*3},0);return(10-n%10)%10},Zw=function(t){Yw(e,t);function e(n,r){return Xw(this,e),n.search(/^[0-9]{7}$/)!==-1&&(n+=Nh(n)),Jw(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n,r))}return Vw(e,[{key:"valid",value:function(){return this.data.search(/^[0-9]{8}$/)!==-1&&+this.data[7]===Nh(this.data)}},{key:"leftText",value:function(){return $i(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"leftText",this).call(this,0,4)}},{key:"leftEncode",value:function(){var r=this.data.substr(0,4);return $i(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"leftEncode",this).call(this,r,"LLLL")}},{key:"rightText",value:function(){return $i(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"rightText",this).call(this,4,4)}},{key:"rightEncode",value:function(){var r=this.data.substr(4,4);return $i(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"rightEncode",this).call(this,r,"RRRR")}}]),e}(Kw.default);vc.default=Zw;var xc={};Object.defineProperty(xc,"__esModule",{value:!0});var eb=function(){function t(e,n){for(var r=0;r<n.length;r++){var s=n[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),tb=xt,nb=Xn,rb=D0(nb),sb=He,ib=D0(sb);function D0(t){return t&&t.__esModule?t:{default:t}}function ab(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ob(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function lb(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var ub=function(e){var n=e.split("").map(function(r){return+r}).reduce(function(r,s,a){return a%2?r+s*9:r+s*3},0);return n%10},cb=function(t){lb(e,t);function e(n,r){return ab(this,e),ob(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n,r))}return eb(e,[{key:"valid",value:function(){return this.data.search(/^[0-9]{5}$/)!==-1}},{key:"encode",value:function(){var r=tb.EAN5_STRUCTURE[ub(this.data)];return{data:"1011"+(0,rb.default)(this.data,r,"01"),text:this.text}}}]),e}(ib.default);xc.default=cb;var yc={};Object.defineProperty(yc,"__esModule",{value:!0});var db=function(){function t(e,n){for(var r=0;r<n.length;r++){var s=n[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),hb=xt,fb=Xn,pb=L0(fb),mb=He,gb=L0(mb);function L0(t){return t&&t.__esModule?t:{default:t}}function vb(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function xb(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function yb(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var wb=function(t){yb(e,t);function e(n,r){return vb(this,e),xb(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n,r))}return db(e,[{key:"valid",value:function(){return this.data.search(/^[0-9]{2}$/)!==-1}},{key:"encode",value:function(){var r=hb.EAN2_STRUCTURE[parseInt(this.data)%4];return{data:"1011"+(0,pb.default)(this.data,r,"01"),text:this.text}}}]),e}(gb.default);yc.default=wb;var ni={};Object.defineProperty(ni,"__esModule",{value:!0});var bb=function(){function t(e,n){for(var r=0;r<n.length;r++){var s=n[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();ni.checksum=su;var _b=Xn,lr=M0(_b),jb=He,kb=M0(jb);function M0(t){return t&&t.__esModule?t:{default:t}}function Nb(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Sb(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function Eb(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var Cb=function(t){Eb(e,t);function e(n,r){Nb(this,e),n.search(/^[0-9]{11}$/)!==-1&&(n+=su(n));var s=Sb(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n,r));return s.displayValue=r.displayValue,r.fontSize>r.width*10?s.fontSize=r.width*10:s.fontSize=r.fontSize,s.guardHeight=r.height+s.fontSize/2+r.textMargin,s}return bb(e,[{key:"valid",value:function(){return this.data.search(/^[0-9]{12}$/)!==-1&&this.data[11]==su(this.data)}},{key:"encode",value:function(){return this.options.flat?this.flatEncoding():this.guardedEncoding()}},{key:"flatEncoding",value:function(){var r="";return r+="101",r+=(0,lr.default)(this.data.substr(0,6),"LLLLLL"),r+="01010",r+=(0,lr.default)(this.data.substr(6,6),"RRRRRR"),r+="101",{data:r,text:this.text}}},{key:"guardedEncoding",value:function(){var r=[];return this.displayValue&&r.push({data:"00000000",text:this.text.substr(0,1),options:{textAlign:"left",fontSize:this.fontSize}}),r.push({data:"101"+(0,lr.default)(this.data[0],"L"),options:{height:this.guardHeight}}),r.push({data:(0,lr.default)(this.data.substr(1,5),"LLLLL"),text:this.text.substr(1,5),options:{fontSize:this.fontSize}}),r.push({data:"01010",options:{height:this.guardHeight}}),r.push({data:(0,lr.default)(this.data.substr(6,5),"RRRRR"),text:this.text.substr(6,5),options:{fontSize:this.fontSize}}),r.push({data:(0,lr.default)(this.data[11],"R")+"101",options:{height:this.guardHeight}}),this.displayValue&&r.push({data:"00000000",text:this.text.substr(11,1),options:{textAlign:"right",fontSize:this.fontSize}}),r}}]),e}(kb.default);function su(t){var e=0,n;for(n=1;n<11;n+=2)e+=parseInt(t[n]);for(n=0;n<11;n+=2)e+=parseInt(t[n])*3;return(10-e%10)%10}ni.default=Cb;var wc={};Object.defineProperty(wc,"__esModule",{value:!0});var Ob=function(){function t(e,n){for(var r=0;r<n.length;r++){var s=n[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),Pb=Xn,Tb=U0(Pb),$b=He,Ab=U0($b),Ib=ni;function U0(t){return t&&t.__esModule?t:{default:t}}function Rb(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ho(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function Db(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var Lb=["XX00000XXX","XX10000XXX","XX20000XXX","XXX00000XX","XXXX00000X","XXXXX00005","XXXXX00006","XXXXX00007","XXXXX00008","XXXXX00009"],Mb=[["EEEOOO","OOOEEE"],["EEOEOO","OOEOEE"],["EEOOEO","OOEEOE"],["EEOOOE","OOEEEO"],["EOEEOO","OEOOEE"],["EOOEEO","OEEOOE"],["EOOOEE","OEEEOO"],["EOEOEO","OEOEOE"],["EOEOOE","OEOEEO"],["EOOEOE","OEEOEO"]],Ub=function(t){Db(e,t);function e(n,r){Rb(this,e);var s=Ho(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n,r));if(s.isValid=!1,n.search(/^[0-9]{6}$/)!==-1)s.middleDigits=n,s.upcA=Sh(n,"0"),s.text=r.text||""+s.upcA[0]+n+s.upcA[s.upcA.length-1],s.isValid=!0;else if(n.search(/^[01][0-9]{7}$/)!==-1)if(s.middleDigits=n.substring(1,n.length-1),s.upcA=Sh(s.middleDigits,n[0]),s.upcA[s.upcA.length-1]===n[n.length-1])s.isValid=!0;else return Ho(s);else return Ho(s);return s.displayValue=r.displayValue,r.fontSize>r.width*10?s.fontSize=r.width*10:s.fontSize=r.fontSize,s.guardHeight=r.height+s.fontSize/2+r.textMargin,s}return Ob(e,[{key:"valid",value:function(){return this.isValid}},{key:"encode",value:function(){return this.options.flat?this.flatEncoding():this.guardedEncoding()}},{key:"flatEncoding",value:function(){var r="";return r+="101",r+=this.encodeMiddleDigits(),r+="010101",{data:r,text:this.text}}},{key:"guardedEncoding",value:function(){var r=[];return this.displayValue&&r.push({data:"00000000",text:this.text[0],options:{textAlign:"left",fontSize:this.fontSize}}),r.push({data:"101",options:{height:this.guardHeight}}),r.push({data:this.encodeMiddleDigits(),text:this.text.substring(1,7),options:{fontSize:this.fontSize}}),r.push({data:"010101",options:{height:this.guardHeight}}),this.displayValue&&r.push({data:"00000000",text:this.text[7],options:{textAlign:"right",fontSize:this.fontSize}}),r}},{key:"encodeMiddleDigits",value:function(){var r=this.upcA[0],s=this.upcA[this.upcA.length-1],a=Mb[parseInt(s)][parseInt(r)];return(0,Tb.default)(this.middleDigits,a)}}]),e}(Ab.default);function Sh(t,e){for(var n=parseInt(t[t.length-1]),r=Lb[n],s="",a=0,o=0;o<r.length;o++){var l=r[o];l==="X"?s+=t[a++]:s+=l}return s=""+e+s,""+s+(0,Ib.checksum)(s)}wc.default=Ub;Object.defineProperty(Ke,"__esModule",{value:!0});Ke.UPCE=Ke.UPC=Ke.EAN2=Ke.EAN5=Ke.EAN8=Ke.EAN13=void 0;var zb=gc,Bb=Wr(zb),Fb=vc,qb=Wr(Fb),Hb=xc,Gb=Wr(Hb),Vb=yc,Wb=Wr(Vb),Kb=ni,Qb=Wr(Kb),Xb=wc,Jb=Wr(Xb);function Wr(t){return t&&t.__esModule?t:{default:t}}Ke.EAN13=Bb.default;Ke.EAN8=qb.default;Ke.EAN5=Gb.default;Ke.EAN2=Wb.default;Ke.UPC=Qb.default;Ke.UPCE=Jb.default;var Ur={},Ya={},ri={};Object.defineProperty(ri,"__esModule",{value:!0});ri.START_BIN="1010";ri.END_BIN="11101";ri.BINARIES=["00110","10001","01001","11000","00101","10100","01100","00011","10010","01010"];Object.defineProperty(Ya,"__esModule",{value:!0});var Yb=function(){function t(e,n){for(var r=0;r<n.length;r++){var s=n[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),Ai=ri,Zb=He,e_=t_(Zb);function t_(t){return t&&t.__esModule?t:{default:t}}function n_(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r_(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function s_(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var i_=function(t){s_(e,t);function e(){return n_(this,e),r_(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return Yb(e,[{key:"valid",value:function(){return this.data.search(/^([0-9]{2})+$/)!==-1}},{key:"encode",value:function(){var r=this,s=this.data.match(/.{2}/g).map(function(a){return r.encodePair(a)}).join("");return{data:Ai.START_BIN+s+Ai.END_BIN,text:this.text}}},{key:"encodePair",value:function(r){var s=Ai.BINARIES[r[1]];return Ai.BINARIES[r[0]].split("").map(function(a,o){return(a==="1"?"111":"1")+(s[o]==="1"?"000":"0")}).join("")}}]),e}(e_.default);Ya.default=i_;var bc={};Object.defineProperty(bc,"__esModule",{value:!0});var a_=function(){function t(e,n){for(var r=0;r<n.length;r++){var s=n[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o_=Ya,l_=u_(o_);function u_(t){return t&&t.__esModule?t:{default:t}}function c_(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function d_(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function h_(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var Eh=function(e){var n=e.substr(0,13).split("").map(function(r){return parseInt(r,10)}).reduce(function(r,s,a){return r+s*(3-a%2*2)},0);return Math.ceil(n/10)*10-n},f_=function(t){h_(e,t);function e(n,r){return c_(this,e),n.search(/^[0-9]{13}$/)!==-1&&(n+=Eh(n)),d_(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n,r))}return a_(e,[{key:"valid",value:function(){return this.data.search(/^[0-9]{14}$/)!==-1&&+this.data[13]===Eh(this.data)}}]),e}(l_.default);bc.default=f_;Object.defineProperty(Ur,"__esModule",{value:!0});Ur.ITF14=Ur.ITF=void 0;var p_=Ya,m_=z0(p_),g_=bc,v_=z0(g_);function z0(t){return t&&t.__esModule?t:{default:t}}Ur.ITF=m_.default;Ur.ITF14=v_.default;var dt={},Jn={};Object.defineProperty(Jn,"__esModule",{value:!0});var x_=function(){function t(e,n){for(var r=0;r<n.length;r++){var s=n[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),y_=He,w_=b_(y_);function b_(t){return t&&t.__esModule?t:{default:t}}function __(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function j_(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function k_(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var N_=function(t){k_(e,t);function e(n,r){return __(this,e),j_(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n,r))}return x_(e,[{key:"encode",value:function(){for(var r="110",s=0;s<this.data.length;s++){var a=parseInt(this.data[s]),o=a.toString(2);o=S_(o,4-o.length);for(var l=0;l<o.length;l++)r+=o[l]=="0"?"100":"110"}return r+="1001",{data:r,text:this.text}}},{key:"valid",value:function(){return this.data.search(/^[0-9]+$/)!==-1}}]),e}(w_.default);function S_(t,e){for(var n=0;n<e;n++)t="0"+t;return t}Jn.default=N_;var _c={},Yn={};Object.defineProperty(Yn,"__esModule",{value:!0});Yn.mod10=E_;Yn.mod11=C_;function E_(t){for(var e=0,n=0;n<t.length;n++){var r=parseInt(t[n]);(n+t.length)%2===0?e+=r:e+=r*2%10+Math.floor(r*2/10)}return(10-e%10)%10}function C_(t){for(var e=0,n=[2,3,4,5,6,7],r=0;r<t.length;r++){var s=parseInt(t[t.length-1-r]);e+=n[r%n.length]*s}return(11-e%11)%11}Object.defineProperty(_c,"__esModule",{value:!0});var O_=Jn,P_=$_(O_),T_=Yn;function $_(t){return t&&t.__esModule?t:{default:t}}function A_(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function I_(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function R_(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var D_=function(t){R_(e,t);function e(n,r){return A_(this,e),I_(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n+(0,T_.mod10)(n),r))}return e}(P_.default);_c.default=D_;var jc={};Object.defineProperty(jc,"__esModule",{value:!0});var L_=Jn,M_=z_(L_),U_=Yn;function z_(t){return t&&t.__esModule?t:{default:t}}function B_(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function F_(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function q_(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var H_=function(t){q_(e,t);function e(n,r){return B_(this,e),F_(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n+(0,U_.mod11)(n),r))}return e}(M_.default);jc.default=H_;var kc={};Object.defineProperty(kc,"__esModule",{value:!0});var G_=Jn,V_=W_(G_),Ch=Yn;function W_(t){return t&&t.__esModule?t:{default:t}}function K_(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Q_(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function X_(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var J_=function(t){X_(e,t);function e(n,r){return K_(this,e),n+=(0,Ch.mod10)(n),n+=(0,Ch.mod10)(n),Q_(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n,r))}return e}(V_.default);kc.default=J_;var Nc={};Object.defineProperty(Nc,"__esModule",{value:!0});var Y_=Jn,Z_=ej(Y_),Oh=Yn;function ej(t){return t&&t.__esModule?t:{default:t}}function tj(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function nj(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function rj(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var sj=function(t){rj(e,t);function e(n,r){return tj(this,e),n+=(0,Oh.mod11)(n),n+=(0,Oh.mod10)(n),nj(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n,r))}return e}(Z_.default);Nc.default=sj;Object.defineProperty(dt,"__esModule",{value:!0});dt.MSI1110=dt.MSI1010=dt.MSI11=dt.MSI10=dt.MSI=void 0;var ij=Jn,aj=si(ij),oj=_c,lj=si(oj),uj=jc,cj=si(uj),dj=kc,hj=si(dj),fj=Nc,pj=si(fj);function si(t){return t&&t.__esModule?t:{default:t}}dt.MSI=aj.default;dt.MSI10=lj.default;dt.MSI11=cj.default;dt.MSI1010=hj.default;dt.MSI1110=pj.default;var Za={};Object.defineProperty(Za,"__esModule",{value:!0});Za.pharmacode=void 0;var mj=function(){function t(e,n){for(var r=0;r<n.length;r++){var s=n[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),gj=He,vj=xj(gj);function xj(t){return t&&t.__esModule?t:{default:t}}function yj(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function wj(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function bj(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var _j=function(t){bj(e,t);function e(n,r){yj(this,e);var s=wj(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n,r));return s.number=parseInt(n,10),s}return mj(e,[{key:"encode",value:function(){for(var r=this.number,s="";!isNaN(r)&&r!=0;)r%2===0?(s="11100"+s,r=(r-2)/2):(s="100"+s,r=(r-1)/2);return s=s.slice(0,-2),{data:s,text:this.text}}},{key:"valid",value:function(){return this.number>=3&&this.number<=131070}}]),e}(vj.default);Za.pharmacode=_j;var eo={};Object.defineProperty(eo,"__esModule",{value:!0});eo.codabar=void 0;var jj=function(){function t(e,n){for(var r=0;r<n.length;r++){var s=n[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),kj=He,Nj=Sj(kj);function Sj(t){return t&&t.__esModule?t:{default:t}}function Ej(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Cj(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function Oj(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var Pj=function(t){Oj(e,t);function e(n,r){Ej(this,e),n.search(/^[0-9\-\$\:\.\+\/]+$/)===0&&(n="A"+n+"A");var s=Cj(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n.toUpperCase(),r));return s.text=s.options.text||s.text.replace(/[A-D]/g,""),s}return jj(e,[{key:"valid",value:function(){return this.data.search(/^[A-D][0-9\-\$\:\.\+\/]+[A-D]$/)!==-1}},{key:"encode",value:function(){for(var r=[],s=this.getEncodings(),a=0;a<this.data.length;a++)r.push(s[this.data.charAt(a)]),a!==this.data.length-1&&r.push("0");return{text:this.text,data:r.join("")}}},{key:"getEncodings",value:function(){return{0:"101010011",1:"101011001",2:"101001011",3:"110010101",4:"101101001",5:"110101001",6:"100101011",7:"100101101",8:"100110101",9:"110100101","-":"101001101",$:"101100101",":":"1101011011","/":"1101101011",".":"1101101101","+":"1011011011",A:"1011001001",B:"1001001011",C:"1010010011",D:"1010011001"}}}]),e}(Nj.default);eo.codabar=Pj;var zr={},to={},ii={};Object.defineProperty(ii,"__esModule",{value:!0});ii.SYMBOLS=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","-","."," ","$","/","+","%","($)","(%)","(/)","(+)",""];ii.BINARIES=["100010100","101001000","101000100","101000010","100101000","100100100","100100010","101010000","100010010","100001010","110101000","110100100","110100010","110010100","110010010","110001010","101101000","101100100","101100010","100110100","100011010","101011000","101001100","101000110","100101100","100010110","110110100","110110010","110101100","110100110","110010110","110011010","101101100","101100110","100110110","100111010","100101110","111010100","111010010","111001010","101101110","101110110","110101110","100100110","111011010","111010110","100110010","101011110"];ii.MULTI_SYMBOLS={"\0":["(%)","U"],"":["($)","A"],"":["($)","B"],"":["($)","C"],"":["($)","D"],"":["($)","E"],"":["($)","F"],"\x07":["($)","G"],"\b":["($)","H"],"	":["($)","I"],"\n":["($)","J"],"\v":["($)","K"],"\f":["($)","L"],"\r":["($)","M"],"":["($)","N"],"":["($)","O"],"":["($)","P"],"":["($)","Q"],"":["($)","R"],"":["($)","S"],"":["($)","T"],"":["($)","U"],"":["($)","V"],"":["($)","W"],"":["($)","X"],"":["($)","Y"],"":["($)","Z"],"\x1B":["(%)","A"],"":["(%)","B"],"":["(%)","C"],"":["(%)","D"],"":["(%)","E"],"!":["(/)","A"],'"':["(/)","B"],"#":["(/)","C"],"&":["(/)","F"],"'":["(/)","G"],"(":["(/)","H"],")":["(/)","I"],"*":["(/)","J"],",":["(/)","L"],":":["(/)","Z"],";":["(%)","F"],"<":["(%)","G"],"=":["(%)","H"],">":["(%)","I"],"?":["(%)","J"],"@":["(%)","V"],"[":["(%)","K"],"\\":["(%)","L"],"]":["(%)","M"],"^":["(%)","N"],_:["(%)","O"],"`":["(%)","W"],a:["(+)","A"],b:["(+)","B"],c:["(+)","C"],d:["(+)","D"],e:["(+)","E"],f:["(+)","F"],g:["(+)","G"],h:["(+)","H"],i:["(+)","I"],j:["(+)","J"],k:["(+)","K"],l:["(+)","L"],m:["(+)","M"],n:["(+)","N"],o:["(+)","O"],p:["(+)","P"],q:["(+)","Q"],r:["(+)","R"],s:["(+)","S"],t:["(+)","T"],u:["(+)","U"],v:["(+)","V"],w:["(+)","W"],x:["(+)","X"],y:["(+)","Y"],z:["(+)","Z"],"{":["(%)","P"],"|":["(%)","Q"],"}":["(%)","R"],"~":["(%)","S"],"":["(%)","T"]};Object.defineProperty(to,"__esModule",{value:!0});var Tj=function(){function t(e,n){for(var r=0;r<n.length;r++){var s=n[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),Ii=ii,$j=He,Aj=Ij($j);function Ij(t){return t&&t.__esModule?t:{default:t}}function Rj(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Dj(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function Lj(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var Mj=function(t){Lj(e,t);function e(n,r){return Rj(this,e),Dj(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n,r))}return Tj(e,[{key:"valid",value:function(){return/^[0-9A-Z\-. $/+%]+$/.test(this.data)}},{key:"encode",value:function(){var r=this.data.split("").flatMap(function(l){return Ii.MULTI_SYMBOLS[l]||l}),s=r.map(function(l){return e.getEncoding(l)}).join(""),a=e.checksum(r,20),o=e.checksum(r.concat(a),15);return{text:this.text,data:e.getEncoding("")+s+e.getEncoding(a)+e.getEncoding(o)+e.getEncoding("")+"1"}}}],[{key:"getEncoding",value:function(r){return Ii.BINARIES[e.symbolValue(r)]}},{key:"getSymbol",value:function(r){return Ii.SYMBOLS[r]}},{key:"symbolValue",value:function(r){return Ii.SYMBOLS.indexOf(r)}},{key:"checksum",value:function(r,s){var a=r.slice().reverse().reduce(function(o,l,u){var c=u%s+1;return o+e.symbolValue(l)*c},0);return e.getSymbol(a%47)}}]),e}(Aj.default);to.default=Mj;var Sc={};Object.defineProperty(Sc,"__esModule",{value:!0});var Uj=function(){function t(e,n){for(var r=0;r<n.length;r++){var s=n[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),zj=to,Bj=Fj(zj);function Fj(t){return t&&t.__esModule?t:{default:t}}function qj(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Hj(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function Gj(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var Vj=function(t){Gj(e,t);function e(n,r){return qj(this,e),Hj(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n,r))}return Uj(e,[{key:"valid",value:function(){return/^[\x00-\x7f]+$/.test(this.data)}}]),e}(Bj.default);Sc.default=Vj;Object.defineProperty(zr,"__esModule",{value:!0});zr.CODE93FullASCII=zr.CODE93=void 0;var Wj=to,Kj=B0(Wj),Qj=Sc,Xj=B0(Qj);function B0(t){return t&&t.__esModule?t:{default:t}}zr.CODE93=Kj.default;zr.CODE93FullASCII=Xj.default;var no={};Object.defineProperty(no,"__esModule",{value:!0});no.GenericBarcode=void 0;var Jj=function(){function t(e,n){for(var r=0;r<n.length;r++){var s=n[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),Yj=He,Zj=e2(Yj);function e2(t){return t&&t.__esModule?t:{default:t}}function t2(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n2(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function r2(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s2=function(t){r2(e,t);function e(n,r){return t2(this,e),n2(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n,r))}return Jj(e,[{key:"encode",value:function(){return{data:"10101010101010101010101010101010101010101",text:this.text}}},{key:"valid",value:function(){return!0}}]),e}(Zj.default);no.GenericBarcode=s2;Object.defineProperty(uc,"__esModule",{value:!0});var i2=Qa,Ri=It,ur=Ke,Ph=Ur,ls=dt,a2=Za,o2=eo,Th=zr,l2=no;uc.default={CODE39:i2.CODE39,CODE128:Ri.CODE128,CODE128A:Ri.CODE128A,CODE128B:Ri.CODE128B,CODE128C:Ri.CODE128C,EAN13:ur.EAN13,EAN8:ur.EAN8,EAN5:ur.EAN5,EAN2:ur.EAN2,UPC:ur.UPC,UPCE:ur.UPCE,ITF14:Ph.ITF14,ITF:Ph.ITF,MSI:ls.MSI,MSI10:ls.MSI10,MSI11:ls.MSI11,MSI1010:ls.MSI1010,MSI1110:ls.MSI1110,pharmacode:a2.pharmacode,codabar:o2.codabar,CODE93:Th.CODE93,CODE93FullASCII:Th.CODE93FullASCII,GenericBarcode:l2.GenericBarcode};var Kr={};Object.defineProperty(Kr,"__esModule",{value:!0});var u2=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t};Kr.default=function(t,e){return u2({},t,e)};var Ec={};Object.defineProperty(Ec,"__esModule",{value:!0});Ec.default=c2;function c2(t){var e=[];function n(r){if(Array.isArray(r))for(var s=0;s<r.length;s++)n(r[s]);else r.text=r.text||"",r.data=r.data||"",e.push(r)}return n(t),e}var Cc={};Object.defineProperty(Cc,"__esModule",{value:!0});Cc.default=d2;function d2(t){return t.marginTop=t.marginTop||t.margin,t.marginBottom=t.marginBottom||t.margin,t.marginRight=t.marginRight||t.margin,t.marginLeft=t.marginLeft||t.margin,t}var Oc={},Pc={},ro={};Object.defineProperty(ro,"__esModule",{value:!0});ro.default=h2;function h2(t){var e=["width","height","textMargin","fontSize","margin","marginTop","marginBottom","marginLeft","marginRight"];for(var n in e)e.hasOwnProperty(n)&&(n=e[n],typeof t[n]=="string"&&(t[n]=parseInt(t[n],10)));return typeof t.displayValue=="string"&&(t.displayValue=t.displayValue!="false"),t}var so={};Object.defineProperty(so,"__esModule",{value:!0});var f2={width:2,height:100,format:"auto",displayValue:!0,fontOptions:"",font:"monospace",text:void 0,textAlign:"center",textPosition:"bottom",textMargin:2,fontSize:20,background:"#ffffff",lineColor:"#000000",margin:10,marginTop:void 0,marginBottom:void 0,marginLeft:void 0,marginRight:void 0,valid:function(){}};so.default=f2;Object.defineProperty(Pc,"__esModule",{value:!0});var p2=ro,m2=F0(p2),g2=so,$h=F0(g2);function F0(t){return t&&t.__esModule?t:{default:t}}function v2(t){var e={};for(var n in $h.default)$h.default.hasOwnProperty(n)&&(t.hasAttribute("jsbarcode-"+n.toLowerCase())&&(e[n]=t.getAttribute("jsbarcode-"+n.toLowerCase())),t.hasAttribute("data-"+n.toLowerCase())&&(e[n]=t.getAttribute("data-"+n.toLowerCase())));return e.value=t.getAttribute("jsbarcode-value")||t.getAttribute("data-value"),e=(0,m2.default)(e),e}Pc.default=v2;var Tc={},$c={},nt={};Object.defineProperty(nt,"__esModule",{value:!0});nt.getTotalWidthOfEncodings=nt.calculateEncodingAttributes=nt.getBarcodePadding=nt.getEncodingHeight=nt.getMaximumHeightOfEncodings=void 0;var x2=Kr,y2=w2(x2);function w2(t){return t&&t.__esModule?t:{default:t}}function q0(t,e){return e.height+(e.displayValue&&t.text.length>0?e.fontSize+e.textMargin:0)+e.marginTop+e.marginBottom}function H0(t,e,n){if(n.displayValue&&e<t){if(n.textAlign=="center")return Math.floor((t-e)/2);if(n.textAlign=="left")return 0;if(n.textAlign=="right")return Math.floor(t-e)}return 0}function b2(t,e,n){for(var r=0;r<t.length;r++){var s=t[r],a=(0,y2.default)(e,s.options),o;a.displayValue?o=k2(s.text,a,n):o=0;var l=s.data.length*a.width;s.width=Math.ceil(Math.max(o,l)),s.height=q0(s,a),s.barcodePadding=H0(o,l,a)}}function _2(t){for(var e=0,n=0;n<t.length;n++)e+=t[n].width;return e}function j2(t){for(var e=0,n=0;n<t.length;n++)t[n].height>e&&(e=t[n].height);return e}function k2(t,e,n){var r;if(n)r=n;else if(typeof document<"u")r=document.createElement("canvas").getContext("2d");else return 0;r.font=e.fontOptions+" "+e.fontSize+"px "+e.font;var s=r.measureText(t);if(!s)return 0;var a=s.width;return a}nt.getMaximumHeightOfEncodings=j2;nt.getEncodingHeight=q0;nt.getBarcodePadding=H0;nt.calculateEncodingAttributes=b2;nt.getTotalWidthOfEncodings=_2;Object.defineProperty($c,"__esModule",{value:!0});var N2=function(){function t(e,n){for(var r=0;r<n.length;r++){var s=n[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),S2=Kr,E2=C2(S2),Go=nt;function C2(t){return t&&t.__esModule?t:{default:t}}function O2(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var P2=function(){function t(e,n,r){O2(this,t),this.canvas=e,this.encodings=n,this.options=r}return N2(t,[{key:"render",value:function(){if(!this.canvas.getContext)throw new Error("The browser does not support canvas.");this.prepareCanvas();for(var n=0;n<this.encodings.length;n++){var r=(0,E2.default)(this.options,this.encodings[n].options);this.drawCanvasBarcode(r,this.encodings[n]),this.drawCanvasText(r,this.encodings[n]),this.moveCanvasDrawing(this.encodings[n])}this.restoreCanvas()}},{key:"prepareCanvas",value:function(){var n=this.canvas.getContext("2d");n.save(),(0,Go.calculateEncodingAttributes)(this.encodings,this.options,n);var r=(0,Go.getTotalWidthOfEncodings)(this.encodings),s=(0,Go.getMaximumHeightOfEncodings)(this.encodings);this.canvas.width=r+this.options.marginLeft+this.options.marginRight,this.canvas.height=s,n.clearRect(0,0,this.canvas.width,this.canvas.height),this.options.background&&(n.fillStyle=this.options.background,n.fillRect(0,0,this.canvas.width,this.canvas.height)),n.translate(this.options.marginLeft,0)}},{key:"drawCanvasBarcode",value:function(n,r){var s=this.canvas.getContext("2d"),a=r.data,o;n.textPosition=="top"?o=n.marginTop+n.fontSize+n.textMargin:o=n.marginTop,s.fillStyle=n.lineColor;for(var l=0;l<a.length;l++){var u=l*n.width+r.barcodePadding;a[l]==="1"?s.fillRect(u,o,n.width,n.height):a[l]&&s.fillRect(u,o,n.width,n.height*a[l])}}},{key:"drawCanvasText",value:function(n,r){var s=this.canvas.getContext("2d"),a=n.fontOptions+" "+n.fontSize+"px "+n.font;if(n.displayValue){var o,l;n.textPosition=="top"?l=n.marginTop+n.fontSize-n.textMargin:l=n.height+n.textMargin+n.marginTop+n.fontSize,s.font=a,n.textAlign=="left"||r.barcodePadding>0?(o=0,s.textAlign="left"):n.textAlign=="right"?(o=r.width-1,s.textAlign="right"):(o=r.width/2,s.textAlign="center"),s.fillText(r.text,o,l)}}},{key:"moveCanvasDrawing",value:function(n){var r=this.canvas.getContext("2d");r.translate(n.width,0)}},{key:"restoreCanvas",value:function(){var n=this.canvas.getContext("2d");n.restore()}}]),t}();$c.default=P2;var Ac={};Object.defineProperty(Ac,"__esModule",{value:!0});var T2=function(){function t(e,n){for(var r=0;r<n.length;r++){var s=n[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),$2=Kr,A2=I2($2),Vo=nt;function I2(t){return t&&t.__esModule?t:{default:t}}function R2(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var Di="http://www.w3.org/2000/svg",D2=function(){function t(e,n,r){R2(this,t),this.svg=e,this.encodings=n,this.options=r,this.document=r.xmlDocument||document}return T2(t,[{key:"render",value:function(){var n=this.options.marginLeft;this.prepareSVG();for(var r=0;r<this.encodings.length;r++){var s=this.encodings[r],a=(0,A2.default)(this.options,s.options),o=this.createGroup(n,a.marginTop,this.svg);this.setGroupOptions(o,a),this.drawSvgBarcode(o,a,s),this.drawSVGText(o,a,s),n+=s.width}}},{key:"prepareSVG",value:function(){for(;this.svg.firstChild;)this.svg.removeChild(this.svg.firstChild);(0,Vo.calculateEncodingAttributes)(this.encodings,this.options);var n=(0,Vo.getTotalWidthOfEncodings)(this.encodings),r=(0,Vo.getMaximumHeightOfEncodings)(this.encodings),s=n+this.options.marginLeft+this.options.marginRight;this.setSvgAttributes(s,r),this.options.background&&this.drawRect(0,0,s,r,this.svg).setAttribute("style","fill:"+this.options.background+";")}},{key:"drawSvgBarcode",value:function(n,r,s){var a=s.data,o;r.textPosition=="top"?o=r.fontSize+r.textMargin:o=0;for(var l=0,u=0,c=0;c<a.length;c++)u=c*r.width+s.barcodePadding,a[c]==="1"?l++:l>0&&(this.drawRect(u-r.width*l,o,r.width*l,r.height,n),l=0);l>0&&this.drawRect(u-r.width*(l-1),o,r.width*l,r.height,n)}},{key:"drawSVGText",value:function(n,r,s){var a=this.document.createElementNS(Di,"text");if(r.displayValue){var o,l;a.setAttribute("style","font:"+r.fontOptions+" "+r.fontSize+"px "+r.font),r.textPosition=="top"?l=r.fontSize-r.textMargin:l=r.height+r.textMargin+r.fontSize,r.textAlign=="left"||s.barcodePadding>0?(o=0,a.setAttribute("text-anchor","start")):r.textAlign=="right"?(o=s.width-1,a.setAttribute("text-anchor","end")):(o=s.width/2,a.setAttribute("text-anchor","middle")),a.setAttribute("x",o),a.setAttribute("y",l),a.appendChild(this.document.createTextNode(s.text)),n.appendChild(a)}}},{key:"setSvgAttributes",value:function(n,r){var s=this.svg;s.setAttribute("width",n+"px"),s.setAttribute("height",r+"px"),s.setAttribute("x","0px"),s.setAttribute("y","0px"),s.setAttribute("viewBox","0 0 "+n+" "+r),s.setAttribute("xmlns",Di),s.setAttribute("version","1.1"),s.setAttribute("style","transform: translate(0,0)")}},{key:"createGroup",value:function(n,r,s){var a=this.document.createElementNS(Di,"g");return a.setAttribute("transform","translate("+n+", "+r+")"),s.appendChild(a),a}},{key:"setGroupOptions",value:function(n,r){n.setAttribute("style","fill:"+r.lineColor+";")}},{key:"drawRect",value:function(n,r,s,a,o){var l=this.document.createElementNS(Di,"rect");return l.setAttribute("x",n),l.setAttribute("y",r),l.setAttribute("width",s),l.setAttribute("height",a),o.appendChild(l),l}}]),t}();Ac.default=D2;var Ic={};Object.defineProperty(Ic,"__esModule",{value:!0});var L2=function(){function t(e,n){for(var r=0;r<n.length;r++){var s=n[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();function M2(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var U2=function(){function t(e,n,r){M2(this,t),this.object=e,this.encodings=n,this.options=r}return L2(t,[{key:"render",value:function(){this.object.encodings=this.encodings}}]),t}();Ic.default=U2;Object.defineProperty(Tc,"__esModule",{value:!0});var z2=$c,B2=Rc(z2),F2=Ac,q2=Rc(F2),H2=Ic,G2=Rc(H2);function Rc(t){return t&&t.__esModule?t:{default:t}}Tc.default={CanvasRenderer:B2.default,SVGRenderer:q2.default,ObjectRenderer:G2.default};var Qr={};Object.defineProperty(Qr,"__esModule",{value:!0});function Dc(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Lc(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function Mc(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var V2=function(t){Mc(e,t);function e(n,r){Dc(this,e);var s=Lc(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return s.name="InvalidInputException",s.symbology=n,s.input=r,s.message='"'+s.input+'" is not a valid input for '+s.symbology,s}return e}(Error),W2=function(t){Mc(e,t);function e(){Dc(this,e);var n=Lc(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n.name="InvalidElementException",n.message="Not supported type to render on",n}return e}(Error),K2=function(t){Mc(e,t);function e(){Dc(this,e);var n=Lc(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n.name="NoElementException",n.message="No element to render on.",n}return e}(Error);Qr.InvalidInputException=V2;Qr.InvalidElementException=W2;Qr.NoElementException=K2;Object.defineProperty(Oc,"__esModule",{value:!0});var Q2=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},X2=Pc,iu=G0(X2),J2=Tc,ps=G0(J2),Y2=Qr;function G0(t){return t&&t.__esModule?t:{default:t}}function Uc(t){if(typeof t=="string")return Z2(t);if(Array.isArray(t)){for(var e=[],n=0;n<t.length;n++)e.push(Uc(t[n]));return e}else{if(typeof HTMLCanvasElement<"u"&&t instanceof HTMLImageElement)return ek(t);if(t&&t.nodeName&&t.nodeName.toLowerCase()==="svg"||typeof SVGElement<"u"&&t instanceof SVGElement)return{element:t,options:(0,iu.default)(t),renderer:ps.default.SVGRenderer};if(typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement)return{element:t,options:(0,iu.default)(t),renderer:ps.default.CanvasRenderer};if(t&&t.getContext)return{element:t,renderer:ps.default.CanvasRenderer};if(t&&(typeof t>"u"?"undefined":Q2(t))==="object"&&!t.nodeName)return{element:t,renderer:ps.default.ObjectRenderer};throw new Y2.InvalidElementException}}function Z2(t){var e=document.querySelectorAll(t);if(e.length!==0){for(var n=[],r=0;r<e.length;r++)n.push(Uc(e[r]));return n}}function ek(t){var e=document.createElement("canvas");return{element:e,options:(0,iu.default)(t),renderer:ps.default.CanvasRenderer,afterRender:function(){t.setAttribute("src",e.toDataURL())}}}Oc.default=Uc;var zc={};Object.defineProperty(zc,"__esModule",{value:!0});var tk=function(){function t(e,n){for(var r=0;r<n.length;r++){var s=n[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();function nk(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var rk=function(){function t(e){nk(this,t),this.api=e}return tk(t,[{key:"handleCatch",value:function(n){if(n.name==="InvalidInputException")if(this.api._options.valid!==this.api._defaults.valid)this.api._options.valid(!1);else throw n.message;else throw n;this.api.render=function(){}}},{key:"wrapBarcodeCall",value:function(n){try{var r=n.apply(void 0,arguments);return this.api._options.valid(!0),r}catch(s){return this.handleCatch(s),this.api}}}]),t}();zc.default=rk;var sk=uc,Bn=Cn(sk),ik=Kr,ai=Cn(ik),ak=Ec,V0=Cn(ak),ok=Cc,Ah=Cn(ok),lk=Oc,uk=Cn(lk),ck=ro,dk=Cn(ck),hk=zc,fk=Cn(hk),W0=Qr,pk=so,K0=Cn(pk);function Cn(t){return t&&t.__esModule?t:{default:t}}var Vt=function(){},io=function(e,n,r){var s=new Vt;if(typeof e>"u")throw Error("No element to render on was provided.");return s._renderProperties=(0,uk.default)(e),s._encodings=[],s._options=K0.default,s._errorHandler=new fk.default(s),typeof n<"u"&&(r=r||{},r.format||(r.format=X0()),s.options(r)[r.format](n,r).render()),s};io.getModule=function(t){return Bn.default[t]};for(var Ih in Bn.default)Bn.default.hasOwnProperty(Ih)&&mk(Bn.default,Ih);function mk(t,e){Vt.prototype[e]=Vt.prototype[e.toUpperCase()]=Vt.prototype[e.toLowerCase()]=function(n,r){var s=this;return s._errorHandler.wrapBarcodeCall(function(){r.text=typeof r.text>"u"?void 0:""+r.text;var a=(0,ai.default)(s._options,r);a=(0,dk.default)(a);var o=t[e],l=Q0(n,o,a);return s._encodings.push(l),s})}}function Q0(t,e,n){t=""+t;var r=new e(t,n);if(!r.valid())throw new W0.InvalidInputException(r.constructor.name,t);var s=r.encode();s=(0,V0.default)(s);for(var a=0;a<s.length;a++)s[a].options=(0,ai.default)(n,s[a].options);return s}function X0(){return Bn.default.CODE128?"CODE128":Object.keys(Bn.default)[0]}Vt.prototype.options=function(t){return this._options=(0,ai.default)(this._options,t),this};Vt.prototype.blank=function(t){var e=new Array(t+1).join("0");return this._encodings.push({data:e}),this};Vt.prototype.init=function(){if(this._renderProperties){Array.isArray(this._renderProperties)||(this._renderProperties=[this._renderProperties]);var t;for(var e in this._renderProperties){t=this._renderProperties[e];var n=(0,ai.default)(this._options,t.options);n.format=="auto"&&(n.format=X0()),this._errorHandler.wrapBarcodeCall(function(){var r=n.value,s=Bn.default[n.format.toUpperCase()],a=Q0(r,s,n);au(t,a,n)})}}};Vt.prototype.render=function(){if(!this._renderProperties)throw new W0.NoElementException;if(Array.isArray(this._renderProperties))for(var t=0;t<this._renderProperties.length;t++)au(this._renderProperties[t],this._encodings,this._options);else au(this._renderProperties,this._encodings,this._options);return this};Vt.prototype._defaults=K0.default;function au(t,e,n){e=(0,V0.default)(e);for(var r=0;r<e.length;r++)e[r].options=(0,ai.default)(n,e[r].options),(0,Ah.default)(e[r].options);(0,Ah.default)(n);var s=t.renderer,a=new s(t.element,e,n);a.render(),t.afterRender&&t.afterRender()}typeof window<"u"&&(window.JsBarcode=io);typeof jQuery<"u"&&(jQuery.fn.JsBarcode=function(t,e){var n=[];return jQuery(this).each(function(){n.push(this)}),io(n,t,e)});var gk=io,J0={exports:{}},vk="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",xk=vk,yk=xk;function Y0(){}function Z0(){}Z0.resetWarningCache=Y0;var wk=function(){function t(r,s,a,o,l,u){if(u!==yk){var c=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw c.name="Invariant Violation",c}}t.isRequired=t;function e(){return t}var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:Z0,resetWarningCache:Y0};return n.PropTypes=n,n};J0.exports=wk();var bk=J0.exports;function Qi(t){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Qi=function(n){return typeof n}:Qi=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Qi(t)}var hr=Bc(j),_k=Bc(gk),ge=Bc(bk);function Bc(t){return t&&t.__esModule?t:{default:t}}function jk(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function kk(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Nk(t,e,n){return e&&kk(t.prototype,e),t}function Sk(t,e){return e&&(Qi(e)==="object"||typeof e=="function")?e:em(t)}function ou(t){return ou=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},ou(t)}function em(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Ek(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&lu(t,e)}function lu(t,e){return lu=Object.setPrototypeOf||function(r,s){return r.__proto__=s,r},lu(t,e)}var uu,Wo=hr.default.version.split(/[.-]/);Wo[0]==="0"&&(Wo[1]==="13"||Wo[1]==="12")?uu=function(e){return e.getDOMNode()}:uu=function(e){return e};var Fc=function(t){Ek(e,t);function e(n){var r;return jk(this,e),r=Sk(this,ou(e).call(this,n)),r.renderElementRef=hr.default.createRef(),r.update=r.update.bind(em(r)),r}return Nk(e,[{key:"shouldComponentUpdate",value:function(r){var s=this;return Object.keys(e.propTypes).some(function(a){return s.props[a]!==r[a]})}},{key:"componentDidMount",value:function(){this.update()}},{key:"componentDidUpdate",value:function(){this.update()}},{key:"update",value:function(){var r=uu(this.renderElementRef.current);try{new _k.default(r,this.props.value,Object.assign({text:this.props.text||this.props.value},this.props))}catch(s){window.console.error(s)}}},{key:"render",value:function(){var r=this.props,s=r.id,a=r.className;if(this.props.renderer==="svg")return hr.default.createElement("svg",{ref:this.renderElementRef,id:s,className:a});if(this.props.renderer==="canvas")return hr.default.createElement("canvas",{ref:this.renderElementRef,id:s,className:a});if(this.props.renderer==="img")return hr.default.createElement("img",{ref:this.renderElementRef,id:s,className:a})}}]),e}(hr.default.Component);Fc.propTypes={value:ge.default.string.isRequired,text:ge.default.string,renderer:ge.default.string,format:ge.default.string,width:ge.default.number,height:ge.default.number,displayValue:ge.default.bool,fontOptions:ge.default.string,font:ge.default.string,textAlign:ge.default.string,textPosition:ge.default.string,textMargin:ge.default.number,fontSize:ge.default.number,background:ge.default.string,lineColor:ge.default.string,margin:ge.default.number,marginTop:ge.default.number,marginBottom:ge.default.number,marginLeft:ge.default.number,marginRight:ge.default.number,id:ge.default.string,className:ge.default.string,ean128:ge.default.bool};Fc.defaultProps={format:"CODE128",renderer:"svg",width:2,height:100,displayValue:!0,fontOptions:"",font:"monospace",textAlign:"center",textPosition:"bottom",textMargin:2,fontSize:20,background:"#ffffff",lineColor:"#000000",margin:10,className:"",ean128:!1};var Ck=Fc;const Ok=nm(Ck);function Pk({products:t,onClose:e}){const[n,r]=j.useState("medium"),[s,a]=j.useState(!0);j.useEffect(()=>{const c=document.createElement("style");return c.innerHTML=`
      svg text {
        font-weight: 900 !important;
        font-family: monospace !important;
      }
      @media print {
        body * {
          visibility: hidden;
        }
        #barcode-print-area, #barcode-print-area * {
          visibility: visible !important;
        }
        #barcode-print-area {
          position: absolute;
          left: 0;
          top: 0;
          width: 100%;
        }
        .print-hide {
          display: none !important;
        }
        .barcode-label {
          page-break-inside: avoid;
          break-inside: avoid;
          border: 2px solid #000 !important;
          margin-bottom: 10px;
        }
        svg {
          display: block !important;
        }
        svg text {
          font-weight: 900 !important;
        }
        @page {
          margin: 0;
          size: auto;
        }
      }
    `,document.head.appendChild(c),()=>{document.head.removeChild(c)}},[]);const o=()=>{window.print()},u=(()=>{switch(n){case"small":return{gridCols:"grid-cols-2 sm:grid-cols-4 lg:grid-cols-6",width:"100%",minHeight:"120px",barcodeWidth:1.2,barcodeHeight:35,fontSize:16};case"large":return{gridCols:"grid-cols-1 sm:grid-cols-2",width:"100%",minHeight:"280px",barcodeWidth:2,barcodeHeight:70,fontSize:22};default:return{gridCols:"grid-cols-1 sm:grid-cols-2 lg:grid-cols-3",width:"100%",minHeight:"200px",barcodeWidth:1.5,barcodeHeight:50,fontSize:18}}})();return i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:i.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-6xl w-full max-h-[90vh] overflow-hidden flex flex-col",children:[i.jsxs("div",{className:"p-6 border-b border-slate-200 print-hide",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-900",children:"Print Barcode Labels"}),i.jsxs("p",{className:"text-sm text-slate-600 mt-1",children:[t.length," product(s) selected"]})]}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("button",{onClick:o,className:"px-6 py-2 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-lg transition",children:"Print Labels"}),i.jsx("button",{onClick:e,className:"p-2 text-slate-600 hover:bg-slate-100 rounded-lg transition",children:i.jsx(Ws,{className:"w-5 h-5"})})]})]}),i.jsxs("div",{className:"flex flex-wrap gap-6",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Label Size"}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{onClick:()=>r("small"),className:`px-4 py-2 text-sm font-medium rounded-lg transition ${n==="small"?"bg-blue-600 text-white":"bg-slate-100 text-slate-700 hover:bg-slate-200"}`,children:"Small"}),i.jsx("button",{onClick:()=>r("medium"),className:`px-4 py-2 text-sm font-medium rounded-lg transition ${n==="medium"?"bg-blue-600 text-white":"bg-slate-100 text-slate-700 hover:bg-slate-200"}`,children:"Medium"}),i.jsx("button",{onClick:()=>r("large"),className:`px-4 py-2 text-sm font-medium rounded-lg transition ${n==="large"?"bg-blue-600 text-white":"bg-slate-100 text-slate-700 hover:bg-slate-200"}`,children:"Large"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Display Options"}),i.jsx("div",{className:"flex gap-4",children:i.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[i.jsx("input",{type:"checkbox",checked:s,onChange:c=>a(c.target.checked),className:"w-4 h-4 text-blue-600 rounded focus:ring-2 focus:ring-blue-500"}),i.jsx("span",{className:"text-sm text-slate-700",children:"Show Price"})]})})]})]})]}),i.jsx("div",{className:"overflow-y-auto p-6",children:i.jsx("div",{id:"barcode-print-area",className:`grid ${u.gridCols} gap-4`,children:t.map(c=>i.jsxs("div",{className:"barcode-label border-2 border-slate-300 rounded-lg p-3 bg-white",style:{width:u.width,minHeight:u.minHeight,display:"flex",flexDirection:"column",justifyContent:"space-between"},children:[i.jsxs("div",{className:"text-center mb-2",children:[i.jsx("h3",{className:"font-black text-slate-900 mb-1 line-clamp-2",style:{fontSize:`${u.fontSize+6}px`,fontWeight:900},children:c.name}),c.color&&i.jsxs("p",{className:"text-slate-900 font-black",style:{fontSize:`${u.fontSize+2}px`,fontWeight:900},children:["Color: ",c.color]}),c.description&&n!=="small"&&i.jsx("p",{className:"text-slate-700 font-bold line-clamp-1",style:{fontSize:`${u.fontSize}px`,fontWeight:700},children:c.description})]}),i.jsx("div",{className:"flex justify-center my-2",children:i.jsx(Ok,{value:c.sku,width:u.barcodeWidth,height:u.barcodeHeight,fontSize:u.fontSize,margin:0,displayValue:!0})}),s&&i.jsx("div",{className:"border-t border-slate-200 pt-2 mt-2",children:i.jsxs("div",{className:"flex justify-between items-center",style:{fontSize:`${u.fontSize+2}px`},children:[i.jsx("span",{className:"text-slate-900 font-black",style:{fontWeight:900},children:"Price:"}),i.jsx("span",{className:"font-black text-slate-900",style:{fontWeight:900},children:V(c.selling_price)})]})})]},c.id))})}),i.jsx("div",{className:"p-4 border-t border-slate-200 bg-slate-50 print-hide",children:i.jsxs("p",{className:"text-xs text-slate-600 text-center",children:[i.jsx("strong",{children:"Important:"}),` In your browser's print dialog, please disable "Headers and footers" option to remove the URL and title from the printout.`]})})]})})}function Tk(){const{profile:t}=vt(),[e,n]=j.useState([]),[r,s]=j.useState(!0),[a,o]=j.useState(""),[l,u]=j.useState(!1),[c,h]=j.useState(!1),[d,p]=j.useState([]),[v,x]=j.useState(null),[b,k]=j.useState({name:"",description:"",sku:"",cost_price:"",selling_price:"",quantity:"",reorder_level:"",unit:"piece",hsn_code:"",gst_rate:"18",color:""});j.useEffect(()=>{g()},[]);const g=async()=>{try{const{data:w,error:N}=await T.from("products").select("*").neq("inventory_type","raw_material").order("created_at",{ascending:!1});if(N)throw N;n(w||[])}catch(w){console.error("Error loading products:",w)}finally{s(!1)}},m=async w=>{w.preventDefault();try{const N={name:b.name,description:b.description||null,sku:b.sku,cost_price:parseFloat(b.cost_price),selling_price:parseFloat(b.selling_price),quantity:parseFloat(b.quantity),reorder_level:parseFloat(b.reorder_level),unit:b.unit,hsn_code:b.hsn_code||"",gst_rate:parseFloat(b.gst_rate),color:b.color||null,created_by:t==null?void 0:t.id};if(v){const{error:I}=await T.from("products").update(N).eq("id",v.id);if(I)throw I}else{const{error:I}=await T.from("products").insert([N]);if(I)throw I}u(!1),x(null),k({name:"",description:"",sku:"",cost_price:"",selling_price:"",quantity:"",reorder_level:"",unit:"piece",hsn_code:"",gst_rate:"18",color:""}),g()}catch(N){console.error("Error saving product:",N),alert("Error saving product")}},f=w=>{var N;x(w),k({name:w.name,description:w.description||"",sku:w.sku,cost_price:w.cost_price.toString(),selling_price:w.selling_price.toString(),quantity:w.quantity.toString(),reorder_level:w.reorder_level.toString(),unit:w.unit||"piece",hsn_code:w.hsn_code||"",gst_rate:((N=w.gst_rate)==null?void 0:N.toString())||"18",color:w.color||""}),u(!0)},y=async w=>{if(confirm("Are you sure you want to delete this product?"))try{const{error:N}=await T.from("products").delete().eq("id",w);if(N)throw N;g()}catch(N){console.error("Error deleting product:",N),alert("Error deleting product")}},_=e.filter(w=>w.name.toLowerCase().includes(a.toLowerCase())||w.sku.toLowerCase().includes(a.toLowerCase()));return r?i.jsx("div",{className:"text-center py-8",children:"Loading inventory..."}):i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-start sm:items-center justify-between",children:[i.jsxs("div",{className:"relative flex-1 max-w-md",children:[i.jsx(jn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400 w-5 h-5"}),i.jsx("input",{type:"text",placeholder:"Search products...",value:a,onChange:w=>o(w.target.value),className:"w-full pl-10 pr-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none"})]}),i.jsxs("div",{className:"flex gap-3",children:[i.jsxs("button",{onClick:()=>{if(_.length===0){alert("No products to download");return}const w=[["Product Name","SKU","HSN Code","Color","Cost Price","Selling Price","GST %","Quantity","Unit","Reorder Level","Status"],..._.map(R=>[R.name,R.sku,R.hsn_code||"",R.color||"",R.cost_price,R.selling_price,R.gst_rate,R.quantity,R.unit,R.reorder_level,R.quantity<=R.reorder_level?"Low Stock":"In Stock"])].map(R=>R.join(",")).join(`
`),N=new Blob([w],{type:"text/csv"}),I=URL.createObjectURL(N),E=document.createElement("a");E.href=I,E.download=`inventory-${new Date().toISOString().split("T")[0]}.csv`,E.click(),URL.revokeObjectURL(I)},className:"flex items-center gap-2 px-4 py-2 bg-green-600 hover:bg-green-700 text-white font-medium rounded-lg transition",children:[i.jsx(b0,{className:"w-5 h-5"}),"Download CSV"]}),i.jsxs("button",{onClick:()=>{if(_.length===0){alert("No products to print barcodes for");return}p(_),h(!0)},className:"flex items-center gap-2 px-4 py-2 bg-slate-600 hover:bg-slate-700 text-white font-medium rounded-lg transition",children:[i.jsx(mh,{className:"w-5 h-5"}),"Print Barcodes"]}),i.jsxs("button",{onClick:()=>{x(null),k({name:"",description:"",sku:"",cost_price:"",selling_price:"",quantity:"",reorder_level:"",unit:"piece",hsn_code:"",gst_rate:"18",color:""}),u(!0)},className:"flex items-center gap-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-lg transition",children:[i.jsx(_n,{className:"w-5 h-5"}),"Add Product"]})]})]}),i.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden",children:i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full",children:[i.jsx("thead",{className:"bg-slate-50 border-b border-slate-200",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-600 uppercase tracking-wider",children:"Product"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-600 uppercase tracking-wider",children:"SKU / HSN"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-600 uppercase tracking-wider",children:"Cost Price"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-600 uppercase tracking-wider",children:"Selling Price"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-600 uppercase tracking-wider",children:"GST %"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-600 uppercase tracking-wider",children:"Quantity"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-600 uppercase tracking-wider",children:"Status"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-slate-600 uppercase tracking-wider",children:"Actions"})]})}),i.jsx("tbody",{className:"divide-y divide-slate-200",children:_.map(w=>i.jsxs("tr",{className:"hover:bg-slate-50 transition",children:[i.jsx("td",{className:"px-6 py-4",children:i.jsx("div",{className:"font-medium text-slate-900",children:w.name})}),i.jsxs("td",{className:"px-6 py-4",children:[i.jsx("div",{className:"text-sm text-slate-900",children:w.sku}),w.hsn_code&&i.jsxs("div",{className:"text-xs text-slate-500",children:["HSN: ",w.hsn_code]})]}),i.jsx("td",{className:"px-6 py-4 text-sm text-slate-900",children:V(w.cost_price)}),i.jsx("td",{className:"px-6 py-4 text-sm text-slate-900",children:V(w.selling_price)}),i.jsxs("td",{className:"px-6 py-4 text-sm text-slate-900",children:[w.gst_rate,"%"]}),i.jsxs("td",{className:"px-6 py-4 text-sm text-slate-900",children:[w.quantity," ",i.jsx("span",{className:"text-slate-500",children:w.unit})]}),i.jsx("td",{className:"px-6 py-4",children:w.quantity<=w.reorder_level?i.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-red-100 text-red-700",children:[i.jsx(Xy,{className:"w-3 h-3"}),"Low Stock"]}):i.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-700",children:"In Stock"})}),i.jsx("td",{className:"px-6 py-4 text-right",children:i.jsxs("div",{className:"flex items-center justify-end gap-2",children:[i.jsx("button",{onClick:()=>{p([w]),h(!0)},className:"p-2 text-slate-600 hover:bg-slate-50 rounded-lg transition",title:"Print Barcode",children:i.jsx(mh,{className:"w-4 h-4"})}),i.jsx("button",{onClick:()=>f(w),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition",children:i.jsx(w0,{className:"w-4 h-4"})}),(t==null?void 0:t.role)==="admin"&&i.jsx("button",{onClick:()=>y(w.id),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition",children:i.jsx(Jt,{className:"w-4 h-4"})})]})})]},w.id))})]})})}),l&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:i.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[i.jsx("div",{className:"p-6 border-b border-slate-200",children:i.jsx("h2",{className:"text-2xl font-bold text-slate-900",children:v?"Edit Product":"Add New Product"})}),i.jsxs("form",{onSubmit:m,className:"p-6 space-y-4",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Product Name"}),i.jsx("input",{type:"text",value:b.name,onChange:w=>k({...b,name:w.target.value}),required:!0,className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"SKU"}),i.jsx("input",{type:"text",value:b.sku,onChange:w=>k({...b,sku:w.target.value}),required:!0,className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Description"}),i.jsx("textarea",{value:b.description,onChange:w=>k({...b,description:w.target.value}),rows:3,className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Color"}),i.jsx("input",{type:"text",value:b.color,onChange:w=>k({...b,color:w.target.value}),placeholder:"e.g., Red, Blue, Black",className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none"})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"HSN Code"}),i.jsx("input",{type:"text",value:b.hsn_code,onChange:w=>k({...b,hsn_code:w.target.value}),placeholder:"e.g., 6109",className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"GST Rate (%)"}),i.jsxs("select",{value:b.gst_rate,onChange:w=>k({...b,gst_rate:w.target.value}),required:!0,className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none",children:[i.jsx("option",{value:"0",children:"0%"}),i.jsx("option",{value:"5",children:"5%"}),i.jsx("option",{value:"12",children:"12%"}),i.jsx("option",{value:"18",children:"18%"}),i.jsx("option",{value:"28",children:"28%"})]})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Cost Price (INR)"}),i.jsx("input",{type:"number",step:"0.01",value:b.cost_price,onChange:w=>k({...b,cost_price:w.target.value}),required:!0,className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Selling Price (INR)"}),i.jsx("input",{type:"number",step:"0.01",value:b.selling_price,onChange:w=>k({...b,selling_price:w.target.value}),required:!0,className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none"})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Quantity"}),i.jsx("input",{type:"number",step:"0.01",value:b.quantity,onChange:w=>k({...b,quantity:w.target.value}),required:!0,className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Unit"}),i.jsxs("select",{value:b.unit,onChange:w=>k({...b,unit:w.target.value}),required:!0,className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none",children:[i.jsx("option",{value:"piece",children:"Piece"}),i.jsx("option",{value:"kg",children:"Kilogram (kg)"}),i.jsx("option",{value:"gram",children:"Gram (g)"}),i.jsx("option",{value:"meter",children:"Meter (m)"}),i.jsx("option",{value:"centimeter",children:"Centimeter (cm)"}),i.jsx("option",{value:"liter",children:"Liter (L)"}),i.jsx("option",{value:"milliliter",children:"Milliliter (ml)"}),i.jsx("option",{value:"box",children:"Box"}),i.jsx("option",{value:"packet",children:"Packet"}),i.jsx("option",{value:"dozen",children:"Dozen"}),i.jsx("option",{value:"set",children:"Set"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Reorder Level"}),i.jsx("input",{type:"number",step:"0.01",value:b.reorder_level,onChange:w=>k({...b,reorder_level:w.target.value}),required:!0,className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none"})]})]}),i.jsxs("div",{className:"flex gap-3 pt-4",children:[i.jsx("button",{type:"submit",className:"flex-1 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-lg transition",children:v?"Update Product":"Add Product"}),i.jsx("button",{type:"button",onClick:()=>{u(!1),x(null)},className:"flex-1 px-4 py-2 bg-slate-200 hover:bg-slate-300 text-slate-700 font-medium rounded-lg transition",children:"Cancel"})]})]})]})}),c&&i.jsx(Pk,{products:d,onClose:()=>h(!1)})]})}function $k({invoiceId:t,onClose:e}){const[n,r]=j.useState(!0),[s,a]=j.useState(null),[o,l]=j.useState(null),[u,c]=j.useState("full");j.useEffect(()=>{h()},[t]),j.useEffect(()=>{const x=document.createElement("style");return x.innerHTML=`
      @media print {
        body * {
          visibility: hidden;
        }
        #invoice-content, #invoice-content * {
          visibility: visible;
        }
        #invoice-content {
          position: absolute;
          left: 0;
          top: 0;
          width: var(--print-width, 210mm);
          padding: ${u==="thermal"?"10px":"0"};
        }
        .print\\:hidden {
          display: none !important;
        }
        ${u==="thermal"?`
          #invoice-content {
            font-size: 11px !important;
          }
          #invoice-content h1 {
            font-size: 16px !important;
          }
          #invoice-content h2 {
            font-size: 14px !important;
          }
          #invoice-content h3 {
            font-size: 12px !important;
          }
          @page {
            size: 80mm auto;
            margin: 5mm;
          }
        `:`
          @page {
            size: A4;
            margin: 0;
          }
        `}
      }
    `,document.head.appendChild(x),()=>{document.head.removeChild(x)}},[u]);const h=async()=>{try{const x=await T.from("invoices").select(`
          *,
          customer:customers(*),
          items:invoice_items(
            *,
            product:products(*)
          )
        `).eq("id",t).single();if(x.error)throw x.error;const b=await T.from("company_profile").select("*").eq("user_id",x.data.created_by).maybeSingle();a(x.data),l(b.data)}catch(x){console.error("Error loading invoice:",x)}finally{r(!1)}},d=()=>{const x=document.documentElement;u==="thermal"?x.style.setProperty("--print-width","80mm"):x.style.setProperty("--print-width","210mm"),window.print()};if(n)return i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:i.jsx("div",{className:"bg-white rounded-xl p-8",children:i.jsx("div",{className:"text-center",children:"Loading invoice..."})})});if(!s)return null;const{customer:p,items:v}=s;return i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50 p-4 overflow-y-auto",children:i.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-5xl w-full my-8",children:[i.jsxs("div",{className:"p-6 border-b-4 border-blue-600 print:hidden bg-gradient-to-r from-blue-50 to-slate-50",children:[i.jsxs("div",{className:"flex items-start justify-between mb-6",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-900 mb-1",children:"Invoice Preview"}),i.jsx("p",{className:"text-sm text-slate-600",children:"Choose your print format below"})]}),i.jsxs("button",{onClick:e,className:"flex items-center justify-center gap-2 px-5 py-2.5 bg-slate-900 hover:bg-slate-800 text-white font-semibold rounded-lg transition shadow-lg hover:shadow-xl",children:[i.jsx(Ws,{className:"w-4 h-4 flex-shrink-0"}),i.jsx("span",{children:"Close"})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[i.jsxs("button",{onClick:()=>c("full"),className:`relative p-4 rounded-lg border-2 transition-all ${u==="full"?"bg-blue-600 border-blue-600 text-white shadow-lg":"bg-white border-slate-300 text-slate-700 hover:border-blue-400 hover:shadow-md"}`,children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:`p-3 rounded-lg ${u==="full"?"bg-blue-700":"bg-blue-100"}`,children:i.jsx(ja,{className:`w-6 h-6 ${u==="full"?"text-white":"text-blue-600"}`})}),i.jsxs("div",{className:"text-left",children:[i.jsx("div",{className:"text-lg font-bold mb-0.5",children:"A4 Full Page"}),i.jsx("div",{className:`text-xs ${u==="full"?"text-blue-100":"text-slate-500"}`,children:"Professional business invoice"})]})]}),u==="full"&&i.jsx("div",{className:"absolute top-3 right-3 bg-white text-blue-600 rounded-full p-1",children:i.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:i.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})})})]}),i.jsxs("button",{onClick:()=>c("thermal"),className:`relative p-4 rounded-lg border-2 transition-all ${u==="thermal"?"bg-blue-600 border-blue-600 text-white shadow-lg":"bg-white border-slate-300 text-slate-700 hover:border-blue-400 hover:shadow-md"}`,children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:`p-3 rounded-lg ${u==="thermal"?"bg-blue-700":"bg-blue-100"}`,children:i.jsx(Na,{className:`w-6 h-6 ${u==="thermal"?"text-white":"text-blue-600"}`})}),i.jsxs("div",{className:"text-left",children:[i.jsx("div",{className:"text-lg font-bold mb-0.5",children:"Thermal Receipt"}),i.jsx("div",{className:`text-xs ${u==="thermal"?"text-blue-100":"text-slate-500"}`,children:"80mm POS receipt printer"})]})]}),u==="thermal"&&i.jsx("div",{className:"absolute top-3 right-3 bg-white text-blue-600 rounded-full p-1",children:i.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:i.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})})})]})]}),i.jsxs("button",{onClick:d,className:"w-full flex items-center justify-center gap-2 px-6 py-3 bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 text-white font-bold rounded-lg transition shadow-lg hover:shadow-xl",children:[i.jsx(Cs,{className:"w-5 h-5"}),"Print Invoice - ",u==="full"?"A4 Full Page":"Thermal 80mm"]})]}),i.jsx("div",{className:"overflow-auto max-h-[70vh] print:max-h-none print:overflow-visible",children:i.jsx("div",{id:"invoice-content",className:"bg-white",children:u==="full"?i.jsx("div",{className:"min-h-[297mm] bg-white",children:i.jsxs("div",{className:"w-full",children:[i.jsx("div",{className:"bg-gradient-to-r from-slate-700 to-slate-800 px-8 py-6",children:i.jsxs("div",{className:"flex justify-between items-start",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-4xl font-bold text-white mb-2",children:(o==null?void 0:o.company_name)||"Your Company Name"}),i.jsxs("div",{className:"text-sm text-slate-300",children:[(o==null?void 0:o.address_line1)&&i.jsx("div",{children:o.address_line1}),(o==null?void 0:o.city)&&(o==null?void 0:o.postal_code)&&i.jsxs("div",{children:[o.city,", ",o.state," ",o.postal_code]})]})]}),i.jsxs("div",{className:"text-right",children:[i.jsx("div",{className:"text-5xl font-bold text-white mb-1",children:"INVOICE"}),i.jsxs("div",{className:"text-xl text-slate-300",children:["#",s.invoice_number]})]})]})}),i.jsxs("div",{className:"px-8 py-6 bg-white",children:[i.jsxs("div",{className:"grid grid-cols-2 gap-6 mb-6",children:[i.jsxs("div",{children:[i.jsx("div",{className:"text-xs font-bold text-slate-700 uppercase tracking-wider mb-2",children:"Invoice Date"}),i.jsx("div",{className:"text-slate-900",children:new Date(s.created_at).toLocaleDateString("en-IN",{day:"numeric",month:"long",year:"numeric"})})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-xs font-bold text-slate-700 uppercase tracking-wider mb-2",children:"Due Date"}),i.jsx("div",{className:"text-slate-900",children:new Date(s.due_date).toLocaleDateString("en-IN",{day:"numeric",month:"long",year:"numeric"})})]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-6 mb-8",children:[i.jsxs("div",{className:"bg-slate-50 rounded-2xl p-5 border-2 border-slate-200",children:[i.jsx("div",{className:"text-xs font-bold text-slate-700 uppercase tracking-wider mb-3",children:"Bill To"}),i.jsx("div",{className:"text-slate-900 font-semibold text-lg mb-1",children:p==null?void 0:p.name}),(p==null?void 0:p.address)&&i.jsx("div",{className:"text-slate-700 text-sm",children:p.address}),(p==null?void 0:p.phone)&&i.jsxs("div",{className:"text-slate-700 text-sm",children:["Mobile: ",p.phone]})]}),i.jsxs("div",{className:"bg-slate-50 rounded-2xl p-5 border-2 border-slate-200",children:[i.jsx("div",{className:"text-xs font-bold text-slate-700 uppercase tracking-wider mb-3",children:"Company Info"}),i.jsxs("div",{className:"text-slate-700 text-sm space-y-1",children:[(o==null?void 0:o.email)&&i.jsxs("div",{children:["Email: ",o.email]}),(o==null?void 0:o.phone)&&i.jsxs("div",{children:["Phone: ",o.phone]}),(o==null?void 0:o.gst_number)&&i.jsxs("div",{children:["GST: ",o.gst_number]})]})]})]}),i.jsx("div",{className:"mb-6",children:i.jsxs("table",{className:"w-full border-collapse border-2 border-slate-800",children:[i.jsx("thead",{children:i.jsxs("tr",{className:"bg-slate-100 border-b-2 border-slate-800",children:[i.jsx("th",{className:"text-left py-4 px-4 text-sm font-bold text-slate-700 uppercase tracking-wide border-r-2 border-slate-800",children:"Description"}),i.jsx("th",{className:"text-center py-4 px-3 text-sm font-bold text-slate-700 uppercase tracking-wide border-r-2 border-slate-800",children:"HSN"}),i.jsx("th",{className:"text-center py-4 px-3 text-sm font-bold text-slate-700 uppercase tracking-wide border-r-2 border-slate-800",children:"QTY"}),i.jsx("th",{className:"text-right py-4 px-3 text-sm font-bold text-slate-700 uppercase tracking-wide border-r-2 border-slate-800",children:"Rate"}),i.jsx("th",{className:"text-right py-4 px-4 text-sm font-bold text-slate-700 uppercase tracking-wide",children:"Amount"})]})}),i.jsx("tbody",{className:"bg-white",children:v.map(x=>{var b;return i.jsxs("tr",{className:"border-b-2 border-slate-800",children:[i.jsx("td",{className:"py-4 px-4 text-slate-900 border-r-2 border-slate-800",children:(b=x.product)==null?void 0:b.name}),i.jsx("td",{className:"py-4 px-3 text-slate-700 text-center text-sm border-r-2 border-slate-800",children:x.hsn_code||"-"}),i.jsx("td",{className:"py-4 px-3 text-slate-900 text-center border-r-2 border-slate-800",children:x.quantity}),i.jsx("td",{className:"py-4 px-3 text-slate-900 text-right border-r-2 border-slate-800",children:V(x.unit_price)}),i.jsx("td",{className:"py-4 px-4 text-slate-900 text-right font-bold",children:V(x.total)})]},x.id)})})]})}),i.jsx("div",{className:"flex justify-end mb-6",children:i.jsxs("div",{className:"w-96",children:[i.jsxs("div",{className:"space-y-2 mb-4 text-slate-700",children:[i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{children:"Subtotal"}),i.jsx("span",{className:"text-slate-900",children:V(s.subtotal)})]}),s.tax>0&&i.jsx(i.Fragment,{children:s.is_interstate?i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{children:"IGST"}),i.jsx("span",{className:"text-slate-900",children:V(s.igst)})]}):i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{children:"CGST"}),i.jsx("span",{className:"text-slate-900",children:V(s.cgst)})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{children:"SGST"}),i.jsx("span",{className:"text-slate-900",children:V(s.sgst)})]})]})})]}),i.jsx("div",{className:"bg-gradient-to-r from-slate-700 to-slate-600 rounded-lg px-6 py-5",children:i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("span",{className:"text-lg font-bold text-white uppercase tracking-wide",children:"Total Amount"}),i.jsx("span",{className:"text-3xl font-bold text-white",children:V(s.total)})]})})]})}),(o==null?void 0:o.terms_conditions)&&i.jsxs("div",{className:"bg-slate-50 rounded-2xl p-5 border-2 border-slate-200",children:[i.jsx("div",{className:"text-xs font-bold text-slate-700 uppercase tracking-wider mb-3",children:"Terms & Conditions"}),i.jsx("p",{className:"text-xs text-slate-700 leading-relaxed whitespace-pre-line",children:o.terms_conditions})]})]}),i.jsx("div",{className:"bg-gradient-to-r from-slate-700 to-slate-800 px-8 py-4 text-center",children:i.jsx("p",{className:"text-white font-medium",children:"Thank you for your business!"})})]})}):i.jsxs("div",{className:"p-4 max-w-[80mm] mx-auto",children:[i.jsxs("div",{className:"text-center mb-4",children:[(o==null?void 0:o.logo_url)&&i.jsx("div",{className:"flex justify-center mb-2",children:i.jsx("img",{src:o.logo_url,alt:"Company Logo",className:"h-16 w-16 object-contain"})}),i.jsx("h1",{className:"text-2xl font-bold mb-1",children:(o==null?void 0:o.company_name)||"Company Name"}),o&&i.jsxs("div",{className:"text-xs text-slate-600",children:[o.address_line1&&i.jsx("p",{children:o.address_line1}),o.phone&&i.jsxs("p",{children:["Tel: ",o.phone]}),o.gst_number&&i.jsxs("p",{children:["GST: ",o.gst_number]})]})]}),i.jsxs("div",{className:"border-t border-b border-dashed border-slate-400 py-2 mb-2",children:[i.jsx("div",{className:"text-center font-bold text-lg",children:"INVOICE"}),i.jsxs("div",{className:"text-xs",children:[i.jsxs("p",{children:["Invoice: #",s.invoice_number]}),i.jsxs("p",{children:["Date: ",new Date(s.created_at).toLocaleDateString("en-IN")]})]})]}),i.jsxs("div",{className:"text-xs mb-2",children:[i.jsx("p",{className:"font-bold mb-1",children:"Customer:"}),i.jsx("p",{className:"font-semibold",children:p==null?void 0:p.name}),(p==null?void 0:p.phone)&&i.jsx("p",{children:p.phone})]}),i.jsxs("table",{className:"w-full text-xs mb-2",children:[i.jsx("thead",{children:i.jsxs("tr",{className:"border-b border-slate-400",children:[i.jsx("th",{className:"text-left py-1",children:"Item"}),i.jsx("th",{className:"text-center py-1",children:"Qty"}),i.jsx("th",{className:"text-right py-1",children:"Amount"})]})}),i.jsx("tbody",{children:v.map(x=>{var b;return i.jsxs("tr",{className:"border-b border-dashed border-slate-300",children:[i.jsx("td",{className:"py-1",children:(b=x.product)==null?void 0:b.name}),i.jsx("td",{className:"text-center py-1",children:x.quantity}),i.jsx("td",{className:"text-right py-1",children:V(x.total)})]},x.id)})})]}),i.jsxs("div",{className:"text-xs space-y-1 mb-2",children:[i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{children:"Subtotal:"}),i.jsx("span",{children:V(s.subtotal)})]}),s.tax>0&&i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{children:"Tax:"}),i.jsx("span",{children:V(s.tax)})]}),i.jsxs("div",{className:"flex justify-between font-bold text-sm border-t border-slate-400 pt-1",children:[i.jsx("span",{children:"TOTAL:"}),i.jsx("span",{children:V(s.total)})]})]}),i.jsx("div",{className:"text-center text-xs border-t border-dashed border-slate-400 pt-2",children:i.jsx("p",{className:"font-medium",children:"Thank you!"})})]})})})]})})}function tm(t,e,n){const r=t*e/100;if(n)return{cgst:0,sgst:0,igst:r,cgstRate:0,sgstRate:0,igstRate:e,cgst_amount:0,sgst_amount:0,igst_amount:r};{const s=r/2,a=e/2;return{cgst:s,sgst:s,igst:0,cgstRate:a,sgstRate:a,igstRate:0,cgst_amount:s,sgst_amount:s,igst_amount:0}}}function Ak(){const{profile:t,user:e}=vt(),[n,r]=j.useState([]),[s,a]=j.useState([]),[o,l]=j.useState([]),[u,c]=j.useState(null),[h,d]=j.useState(!0),[p,v]=j.useState(""),[x,b]=j.useState(!1),[k,g]=j.useState(null),[m,f]=j.useState(null),[y,_]=j.useState(!1),[w,N]=j.useState(!1),[I,E]=j.useState(""),[R,U]=j.useState(!1),[se,K]=j.useState(""),[S,$]=j.useState([]),[F,he]=j.useState({customer_id:"",due_date:"",tax_rate:"10",include_gst:!0}),[P,B]=j.useState({name:"",email:"",phone:"",address:"",state:"",gstin:""});j.useEffect(()=>{H()},[]),j.useEffect(()=>{const C=()=>{m&&f(null)};return document.addEventListener("click",C),()=>document.removeEventListener("click",C)},[m]);const H=async()=>{try{const[C,L,z,G]=await Promise.all([T.from("invoices").select("*, customer:customers(*)").order("created_at",{ascending:!1}),T.from("customers").select("*").order("name"),T.from("products").select("*").order("name"),T.from("company_profile").select("*").eq("user_id",(e==null?void 0:e.id)||"").maybeSingle()]);if(C.error)throw C.error;if(L.error)throw L.error;if(z.error)throw z.error;r(C.data||[]),a(L.data||[]),l(z.data||[]),c(G.data)}catch(C){console.error("Error loading data:",C)}finally{d(!1)}},te=()=>{const C=new Date,L=C.getTime().toString().slice(-6);return`INV-${C.getFullYear()}${String(C.getMonth()+1).padStart(2,"0")}-${L}`},le=async C=>{var L;if(C.preventDefault(),S.length===0){alert("Please add at least one item");return}if(!(u!=null&&u.state)){alert("Please set up your company profile with state information first");return}try{const z=s.find(Ie=>Ie.id===F.customer_id);if(!z)throw new Error("Customer not found");const G=z.state||u.state;let J=0,ne=0;const D=S.map(Ie=>{var ui;const fe=o.find(ci=>ci.id===Ie.product_id);if(!fe)throw new Error("Product not found");const er=Ie.custom_price!==void 0?Ie.custom_price:fe.selling_price,On=er*Ie.quantity;ne+=On;const Xr=((ui=u.state)==null?void 0:ui.toLowerCase())!==(G==null?void 0:G.toLowerCase()),je=tm(On,fe.gst_rate||18,Xr);return J+=je.cgst_amount+je.sgst_amount+je.igst_amount,{product_id:Ie.product_id,quantity:Ie.quantity,unit_price:er,total:On,hsn_code:fe.hsn_code||"",gst_rate:fe.gst_rate||18,cgst_amount:je.cgst_amount,sgst_amount:je.sgst_amount,igst_amount:je.igst_amount}}),Y=((L=u.state)==null?void 0:L.toLowerCase())!==(G==null?void 0:G.toLowerCase()),Mt=F.include_gst?ne+J:ne,{data:Ge,error:Pe}=await T.from("invoices").insert([{invoice_number:te(),customer_id:F.customer_id,status:"draft",subtotal:ne,tax:F.include_gst?J:0,cgst:F.include_gst&&!Y?J/2:0,sgst:F.include_gst&&!Y?J/2:0,igst:F.include_gst&&Y?J:0,total:Mt,is_interstate:Y,place_of_supply:G,due_date:F.due_date,created_by:t==null?void 0:t.id}]).select().single();if(Pe)throw Pe;const Ze=D.map(Ie=>({...Ie,invoice_id:Ge.id})),{error:Zn}=await T.from("invoice_items").insert(Ze);if(Zn)throw Zn;b(!1),he({customer_id:"",due_date:"",tax_rate:"10",include_gst:!0}),$([]),H()}catch(z){console.error("Error creating invoice:",z),alert("Error creating invoice")}},Ot=async(C,L)=>{try{const z=n.find(Y=>Y.id===C);if(!z)throw new Error("Invoice not found");const G=z.payment_status==="paid"||z.payment_status==="partial";if(L==="paid"&&!G){const{data:Y,error:Mt}=await T.from("invoice_items").select("product_id, quantity").eq("invoice_id",C);if(Mt)throw Mt;for(const Ge of Y||[]){const{data:Pe,error:Ze}=await T.from("products").select("quantity").eq("id",Ge.product_id).single();if(Ze)throw Ze;const Zn=Pe.quantity-Ge.quantity,{error:Ie}=await T.from("products").update({quantity:Zn}).eq("id",Ge.product_id);if(Ie)throw Ie;const{error:fe}=await T.from("inventory_movements").insert([{product_id:Ge.product_id,type:"out",quantity:Ge.quantity,reason:`Invoice ${z.invoice_number} marked as paid`,created_by:t==null?void 0:t.id}]);if(fe)throw fe}}const ne={status:L};L==="paid"&&(ne.paid_date=new Date().toISOString().split("T")[0],ne.payment_status="paid",ne.amount_paid=z.total);const{error:D}=await T.from("invoices").update(ne).eq("id",C);if(D)throw D;H()}catch(z){console.error("Error updating invoice:",z),alert("Error updating invoice: "+z.message)}},yt=async C=>{if(confirm("Are you sure you want to delete this invoice?"))try{const{error:L}=await T.from("invoices").delete().eq("id",C);if(L)throw L;H()}catch(L){console.error("Error deleting invoice:",L),alert("Error deleting invoice")}},Zt=async(C,L)=>{try{const[z,G]=await Promise.all([T.from("invoices").select(`
            *,
            customer:customers(*),
            items:invoice_items(
              *,
              product:products(*)
            )
          `).eq("id",C).single(),T.from("company_profile").select("*").maybeSingle()]);if(z.error)throw z.error;const J=window.open("","_blank");if(!J){alert("Please allow pop-ups to print invoices");return}const ne=z.data,D=G.data,{customer:Y,items:Mt}=ne,Ge=L==="full"?`
        <!DOCTYPE html>
        <html>
          <head>
            <title>Invoice ${ne.invoice_number}</title>
            <style>
              @page { size: A4; margin: 0; }
              * { margin: 0; padding: 0; box-sizing: border-box; }
              body { font-family: Arial, sans-serif; }
              .container { padding: 60px; max-width: 800px; margin: 0 auto; }
              .header { background: linear-gradient(to right, #1e293b, #475569); color: white; padding: 30px; border-radius: 10px 10px 0 0; margin: -15px; margin-bottom: 30px; }
              .header h1 { font-size: 36px; margin-bottom: 10px; }
              .header-right { text-align: right; }
              .invoice-title { font-size: 48px; font-weight: bold; }
              .invoice-number { font-size: 20px; color: #cbd5e1; }
              .info-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 30px; margin-bottom: 30px; }
              .info-box { background: #f8fafc; padding: 20px; border-radius: 10px; border-left: 4px solid #3b82f6; }
              .info-box.dark { border-left-color: #1e293b; }
              .info-label { font-size: 11px; font-weight: bold; color: #64748b; text-transform: uppercase; margin-bottom: 10px; }
              .info-value { font-size: 18px; font-weight: 600; color: #1e293b; }
              table { width: 100%; border-collapse: collapse; margin-bottom: 30px; }
              thead { background: #1e293b; color: white; }
              th { padding: 15px; text-align: left; font-size: 12px; text-transform: uppercase; }
              td { padding: 15px; border-bottom: 1px solid #e2e8f0; }
              tbody tr:nth-child(even) { background: #f8fafc; }
              .totals { width: 350px; margin-left: auto; }
              .totals-row { display: flex; justify-content: space-between; padding: 10px 0; }
              .total-final { background: linear-gradient(to right, #1e293b, #475569); color: white; padding: 20px; border-radius: 10px; margin-top: 10px; }
              .total-final .amount { font-size: 30px; font-weight: bold; }
              .payment-box { background: #eff6ff; padding: 20px; border-radius: 10px; border-left: 4px solid #3b82f6; margin-bottom: 20px; }
              .footer { background: #1e293b; color: white; padding: 20px; text-align: center; border-radius: 0 0 10px 10px; margin: 30px -15px -15px; }
            </style>
          </head>
          <body>
            <div class="container">
              <div class="header">
                <table style="width: 100%; color: white;">
                  <tr>
                    <td>
                      <h1>${(D==null?void 0:D.company_name)||"Company Name"}</h1>
                      <div style="font-size: 14px; color: #cbd5e1;">
                        ${D!=null&&D.address_line1?`<div>${D.address_line1}</div>`:""}
                        ${D!=null&&D.address_line2?`<div>${D.address_line2}</div>`:""}
                        <div>${(D==null?void 0:D.city)||""}, ${(D==null?void 0:D.state)||""} ${(D==null?void 0:D.postal_code)||""}</div>
                      </div>
                    </td>
                    <td class="header-right">
                      <div class="invoice-title">INVOICE</div>
                      <div class="invoice-number">#${ne.invoice_number}</div>
                    </td>
                  </tr>
                </table>
              </div>

              <div class="info-grid">
                <div>
                  <div class="info-label">Invoice Date</div>
                  <div class="info-value">${new Date(ne.created_at).toLocaleDateString("en-IN",{year:"numeric",month:"long",day:"numeric"})}</div>
                </div>
                <div>
                  <div class="info-label">Due Date</div>
                  <div class="info-value">${new Date(ne.due_date).toLocaleDateString("en-IN",{year:"numeric",month:"long",day:"numeric"})}</div>
                </div>
              </div>

              <div class="info-grid">
                <div class="info-box">
                  <div class="info-label">Bill To</div>
                  <div style="font-weight: bold; font-size: 18px; margin-bottom: 5px;">${(Y==null?void 0:Y.name)||""}</div>
                  ${Y!=null&&Y.email?`<div style="font-size: 14px; color: #64748b;">${Y.email}</div>`:""}
                  ${Y!=null&&Y.phone?`<div style="font-size: 14px; color: #64748b;">${Y.phone}</div>`:""}
                  ${Y!=null&&Y.address?`<div style="font-size: 14px; color: #64748b; margin-top: 8px;">${Y.address}</div>`:""}
                  ${Y!=null&&Y.gstin?`<div style="font-size: 14px; margin-top: 8px;"><strong>GSTIN:</strong> ${Y.gstin}</div>`:""}
                </div>
                <div class="info-box dark">
                  <div class="info-label">Company Info</div>
                  ${D!=null&&D.phone?`<div style="font-size: 14px;"><strong>Phone:</strong> ${D.phone}</div>`:""}
                  ${D!=null&&D.email?`<div style="font-size: 14px;"><strong>Email:</strong> ${D.email}</div>`:""}
                  ${D!=null&&D.gst_number?`<div style="font-size: 14px;"><strong>GSTIN:</strong> ${D.gst_number}</div>`:""}
                  ${D!=null&&D.pan_number?`<div style="font-size: 14px;"><strong>PAN:</strong> ${D.pan_number}</div>`:""}
                </div>
              </div>

              <table>
                <thead>
                  <tr>
                    <th>Description</th>
                    <th style="text-align: center;">HSN</th>
                    <th style="text-align: center;">Qty</th>
                    <th style="text-align: right;">Rate</th>
                    <th style="text-align: center;">GST</th>
                    <th style="text-align: right;">Amount</th>
                  </tr>
                </thead>
                <tbody>
                  ${Mt.map(Pe=>{var Ze;return`
                    <tr>
                      <td style="font-weight: 500;">${((Ze=Pe.product)==null?void 0:Ze.name)||""}</td>
                      <td style="text-align: center; color: #64748b;">${Pe.hsn_code||"-"}</td>
                      <td style="text-align: center;">${Pe.quantity}</td>
                      <td style="text-align: right;">${Pe.unit_price.toFixed(2)}</td>
                      <td style="text-align: center; color: #64748b;">${Pe.gst_rate}%</td>
                      <td style="text-align: right; font-weight: 600;">${Pe.total.toFixed(2)}</td>
                    </tr>
                  `}).join("")}
                </tbody>
              </table>

              <div class="totals">
                <div class="totals-row">
                  <span>Subtotal</span>
                  <span style="font-weight: 600;">${ne.subtotal.toFixed(2)}</span>
                </div>
                ${ne.is_interstate?`
                  <div class="totals-row">
                    <span>IGST</span>
                    <span style="font-weight: 600;">${ne.igst.toFixed(2)}</span>
                  </div>
                `:`
                  <div class="totals-row">
                    <span>CGST</span>
                    <span style="font-weight: 600;">${ne.cgst.toFixed(2)}</span>
                  </div>
                  <div class="totals-row">
                    <span>SGST</span>
                    <span style="font-weight: 600;">${ne.sgst.toFixed(2)}</span>
                  </div>
                `}
                <div class="total-final">
                  <div style="display: flex; justify-content: space-between; align-items: center;">
                    <span style="font-size: 18px; font-weight: bold;">TOTAL AMOUNT</span>
                    <span class="amount">${ne.total.toFixed(2)}</span>
                  </div>
                </div>
              </div>

              ${D!=null&&D.bank_name?`
                <div class="payment-box">
                  <div class="info-label">Payment Details</div>
                  <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-top: 10px;">
                    <div><strong>Bank:</strong> ${D.bank_name}</div>
                    ${D.account_number?`<div><strong>Account:</strong> ${D.account_number}</div>`:""}
                    ${D.ifsc_code?`<div><strong>IFSC:</strong> ${D.ifsc_code}</div>`:""}
                  </div>
                </div>
              `:""}

              ${D!=null&&D.terms_conditions?`
                <div class="info-box dark">
                  <div class="info-label">Terms & Conditions</div>
                  <div style="font-size: 12px; line-height: 1.6; color: #475569; white-space: pre-line;">${D.terms_conditions}</div>
                </div>
              `:""}

              <div class="footer">
                <div style="font-weight: 500;">Thank you for your business!</div>
                ${D!=null&&D.website?`<div style="font-size: 12px; color: #cbd5e1; margin-top: 5px;">${D.website}</div>`:""}
              </div>
            </div>
          </body>
        </html>
      `:`
        <!DOCTYPE html>
        <html>
          <head>
            <title>Receipt ${ne.invoice_number}</title>
            <style>
              @page { size: 80mm auto; margin: 5mm; }
              * { margin: 0; padding: 0; box-sizing: border-box; }
              body { font-family: Arial, sans-serif; width: 80mm; padding: 10px; font-size: 12px; }
              .center { text-align: center; }
              .bold { font-weight: bold; }
              .line { border-top: 1px dashed #000; margin: 10px 0; }
              table { width: 100%; border-collapse: collapse; margin: 10px 0; }
              th { text-align: left; border-bottom: 1px solid #000; padding: 5px 0; }
              td { padding: 3px 0; }
            </style>
          </head>
          <body>
            <div class="center bold" style="font-size: 18px; margin-bottom: 5px;">${(D==null?void 0:D.company_name)||"Company"}</div>
            ${D!=null&&D.address_line1?`<div class="center" style="font-size: 11px;">${D.address_line1}</div>`:""}
            ${D!=null&&D.phone?`<div class="center" style="font-size: 11px;">Tel: ${D.phone}</div>`:""}
            ${D!=null&&D.gst_number?`<div class="center" style="font-size: 11px;">GST: ${D.gst_number}</div>`:""}

            <div class="line"></div>
            <div class="center bold" style="font-size: 16px;">INVOICE</div>
            <div class="center">No: ${ne.invoice_number}</div>
            <div class="center">Date: ${new Date(ne.created_at).toLocaleDateString("en-IN")}</div>
            <div class="line"></div>

            <div class="bold">Customer: ${(Y==null?void 0:Y.name)||""}</div>
            ${Y!=null&&Y.phone?`<div>Ph: ${Y.phone}</div>`:""}
            <div class="line"></div>

            <table>
              <thead>
                <tr>
                  <th>Item</th>
                  <th style="text-align: center;">Qty</th>
                  <th style="text-align: right;">Amt</th>
                </tr>
              </thead>
              <tbody>
                ${Mt.map(Pe=>{var Ze;return`
                  <tr>
                    <td>${((Ze=Pe.product)==null?void 0:Ze.name)||""}</td>
                    <td style="text-align: center;">${Pe.quantity}</td>
                    <td style="text-align: right;">${Pe.total.toFixed(2)}</td>
                  </tr>
                `}).join("")}
              </tbody>
            </table>

            <div class="line"></div>
            <div style="display: flex; justify-content: space-between;">
              <span>Subtotal:</span>
              <span>${ne.subtotal.toFixed(2)}</span>
            </div>
            <div style="display: flex; justify-content: space-between;">
              <span>Tax:</span>
              <span>${ne.tax.toFixed(2)}</span>
            </div>
            <div class="line"></div>
            <div style="display: flex; justify-content: space-between;" class="bold">
              <span>TOTAL:</span>
              <span style="font-size: 16px;">${ne.total.toFixed(2)}</span>
            </div>
            <div class="line"></div>
            <div class="center">Thank you!</div>
          </body>
        </html>
      `;J.document.write(Ge),J.document.close(),J.onload=()=>{J.focus(),setTimeout(()=>{J.print(),J.close()},250)}}catch(z){console.error("Error printing invoice:",z),alert("Error loading invoice for printing")}},lt=()=>{if(o.length===0){alert("Please add products first");return}$([...S,{product_id:o[0].id,quantity:1}])},Lt=async C=>{C.preventDefault();try{const L={name:P.name,email:P.email||null,phone:P.phone||null,address:P.address||null,state:P.state||"",gstin:P.gstin||"",created_by:t==null?void 0:t.id},{data:z,error:G}=await T.from("customers").insert([L]).select().single();if(G)throw G;a([...s,z]),he({...F,customer_id:z.id}),_(!1),B({name:"",email:"",phone:"",address:"",state:"",gstin:""})}catch(L){console.error("Error creating customer:",L),alert("Error creating customer")}},oi=C=>{if(C.key==="Enter"){C.preventDefault();const L=o.find(z=>z.barcode===I.trim());if(L){const z=S.findIndex(G=>G.product_id===L.id);if(z>=0){const G=[...S];G[z].quantity+=1,$(G)}else $([...S,{product_id:L.id,quantity:1}]);E("")}else alert("Product not found with barcode: "+I),E("")}},li=C=>{if(C.key==="Enter"){C.preventDefault();const L=o.find(z=>{var G;return((G=z.sku)==null?void 0:G.toLowerCase())===se.trim().toLowerCase()});if(L){const z=S.findIndex(G=>G.product_id===L.id);if(z>=0){const G=[...S];G[z].quantity+=1,$(G)}else $([...S,{product_id:L.id,quantity:1}]);K("")}else alert("Product not found with SKU: "+se),K("")}},O=C=>{$(S.filter((L,z)=>z!==C))},q=(C,L,z)=>{const G=[...S];G[C]={...G[C],[L]:z},$(G)},X=n.filter(C=>{var L;return C.invoice_number.toLowerCase().includes(p.toLowerCase())||((L=C.customer)==null?void 0:L.name.toLowerCase().includes(p.toLowerCase()))}),me=C=>{switch(C){case"paid":return"bg-green-100 text-green-700";case"sent":return"bg-blue-100 text-blue-700";case"draft":return"bg-slate-100 text-slate-700";case"cancelled":return"bg-red-100 text-red-700";default:return"bg-slate-100 text-slate-700"}};return h?i.jsx("div",{className:"text-center py-8",children:"Loading invoices..."}):i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-start sm:items-center justify-between",children:[i.jsxs("div",{className:"relative flex-1 max-w-md",children:[i.jsx(jn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400 w-5 h-5"}),i.jsx("input",{type:"text",placeholder:"Search invoices...",value:p,onChange:C=>v(C.target.value),className:"w-full pl-10 pr-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none"})]}),i.jsxs("button",{onClick:()=>b(!0),className:"flex items-center gap-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-lg transition",children:[i.jsx(_n,{className:"w-5 h-5"}),"Create Invoice"]})]}),i.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden",children:i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full",children:[i.jsx("thead",{className:"bg-slate-50 border-b border-slate-200",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-600 uppercase tracking-wider",children:"Invoice #"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-600 uppercase tracking-wider",children:"Customer"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-600 uppercase tracking-wider",children:"Date"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-600 uppercase tracking-wider",children:"Due Date"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-600 uppercase tracking-wider",children:"Amount"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-600 uppercase tracking-wider",children:"Status"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-slate-600 uppercase tracking-wider",children:"Actions"})]})}),i.jsx("tbody",{className:"divide-y divide-slate-200",children:X.map(C=>{var L;return i.jsxs("tr",{className:"hover:bg-slate-50 transition",children:[i.jsx("td",{className:"px-6 py-4 text-sm font-medium text-slate-900",children:C.invoice_number}),i.jsx("td",{className:"px-6 py-4 text-sm text-slate-900",children:(L=C.customer)==null?void 0:L.name}),i.jsx("td",{className:"px-6 py-4 text-sm text-slate-600",children:new Date(C.created_at).toLocaleDateString()}),i.jsx("td",{className:"px-6 py-4 text-sm text-slate-600",children:new Date(C.due_date).toLocaleDateString()}),i.jsx("td",{className:"px-6 py-4 text-sm font-medium text-slate-900",children:V(C.total)}),i.jsx("td",{className:"px-6 py-4",children:i.jsxs("select",{value:C.status,onChange:z=>Ot(C.id,z.target.value),className:`px-3 py-1 rounded-full text-xs font-medium ${me(C.status)} border-0 outline-none cursor-pointer`,children:[i.jsx("option",{value:"draft",children:"Draft"}),i.jsx("option",{value:"sent",children:"Sent"}),i.jsx("option",{value:"paid",children:"Paid"}),i.jsx("option",{value:"cancelled",children:"Cancelled"})]})}),i.jsx("td",{className:"px-6 py-4 text-right",children:i.jsxs("div",{className:"flex items-center justify-end gap-2",children:[i.jsx("button",{onClick:()=>g(C.id),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition",title:"View Invoice",children:i.jsx(Zl,{className:"w-4 h-4"})}),i.jsxs("div",{className:"relative",children:[i.jsxs("button",{onClick:z=>{z.stopPropagation(),f(m===C.id?null:C.id)},className:"flex items-center gap-1 p-2 text-green-600 hover:bg-green-50 rounded-lg transition",title:"Print Invoice",children:[i.jsx(Cs,{className:"w-4 h-4"}),i.jsx(Zy,{className:"w-3 h-3"})]}),m===C.id&&i.jsx("div",{className:"absolute right-0 mt-1 w-56 bg-white rounded-lg shadow-xl border border-slate-200 z-50",children:i.jsxs("div",{className:"p-2 space-y-1",children:[i.jsxs("button",{onClick:()=>{Zt(C.id,"full"),f(null)},className:"w-full flex items-center gap-3 px-4 py-3 text-left text-slate-700 hover:bg-blue-50 rounded-lg transition",children:[i.jsx("div",{className:"flex-shrink-0 w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center",children:i.jsx(Cs,{className:"w-4 h-4 text-blue-600"})}),i.jsxs("div",{children:[i.jsx("div",{className:"font-semibold text-sm text-slate-900",children:"A4 Full Page"}),i.jsx("div",{className:"text-xs text-slate-500",children:"Business invoice"})]})]}),i.jsxs("button",{onClick:()=>{Zt(C.id,"thermal"),f(null)},className:"w-full flex items-center gap-3 px-4 py-3 text-left text-slate-700 hover:bg-green-50 rounded-lg transition",children:[i.jsx("div",{className:"flex-shrink-0 w-8 h-8 bg-green-100 rounded-lg flex items-center justify-center",children:i.jsx(Cs,{className:"w-4 h-4 text-green-600"})}),i.jsxs("div",{children:[i.jsx("div",{className:"font-semibold text-sm text-slate-900",children:"Thermal Receipt"}),i.jsx("div",{className:"text-xs text-slate-500",children:"80mm POS printer"})]})]})]})})]}),(t==null?void 0:t.role)==="admin"&&i.jsx("button",{onClick:()=>yt(C.id),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition",children:i.jsx(Jt,{className:"w-4 h-4"})})]})})]},C.id)})})]})})}),x&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:i.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[i.jsx("div",{className:"p-6 border-b border-slate-200",children:i.jsx("h2",{className:"text-2xl font-bold text-slate-900",children:"Create New Invoice"})}),i.jsxs("form",{onSubmit:le,className:"p-6 space-y-6",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Customer"}),i.jsxs("div",{className:"flex gap-2",children:[i.jsxs("select",{value:F.customer_id,onChange:C=>he({...F,customer_id:C.target.value}),required:!0,className:"flex-1 px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none",children:[i.jsx("option",{value:"",children:"Select Customer"}),s.map(C=>i.jsx("option",{value:C.id,children:C.name},C.id))]}),i.jsxs("button",{type:"button",onClick:()=>_(!y),className:"px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg transition flex items-center gap-2",title:"Add New Customer",children:[i.jsx(f1,{className:"w-4 h-4"}),"New"]})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Due Date"}),i.jsx("input",{type:"date",value:F.due_date,onChange:C=>he({...F,due_date:C.target.value}),required:!0,className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none"})]})]}),i.jsx("div",{className:"bg-slate-50 border border-slate-200 rounded-lg p-4",children:i.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[i.jsx("input",{type:"checkbox",checked:F.include_gst,onChange:C=>he({...F,include_gst:C.target.checked}),className:"w-5 h-5 text-blue-600 border-slate-300 rounded focus:ring-2 focus:ring-blue-500"}),i.jsxs("div",{children:[i.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Include GST in Invoice"}),i.jsx("div",{className:"text-xs text-slate-600",children:"Toggle to create invoice with or without GST calculations"})]})]})}),y&&i.jsxs("div",{className:"bg-green-50 border-2 border-green-200 rounded-lg p-4",children:[i.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-4",children:"New Customer"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Name *"}),i.jsx("input",{type:"text",value:P.name,onChange:C=>B({...P,name:C.target.value}),required:!0,className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-green-500 outline-none"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Phone"}),i.jsx("input",{type:"tel",value:P.phone,onChange:C=>B({...P,phone:C.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-green-500 outline-none"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Email"}),i.jsx("input",{type:"email",value:P.email,onChange:C=>B({...P,email:C.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-green-500 outline-none"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"State"}),i.jsxs("select",{value:P.state,onChange:C=>B({...P,state:C.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-green-500 outline-none",children:[i.jsx("option",{value:"",children:"Select State"}),i.jsx("option",{value:"Andhra Pradesh",children:"Andhra Pradesh"}),i.jsx("option",{value:"Arunachal Pradesh",children:"Arunachal Pradesh"}),i.jsx("option",{value:"Assam",children:"Assam"}),i.jsx("option",{value:"Bihar",children:"Bihar"}),i.jsx("option",{value:"Chhattisgarh",children:"Chhattisgarh"}),i.jsx("option",{value:"Goa",children:"Goa"}),i.jsx("option",{value:"Gujarat",children:"Gujarat"}),i.jsx("option",{value:"Haryana",children:"Haryana"}),i.jsx("option",{value:"Himachal Pradesh",children:"Himachal Pradesh"}),i.jsx("option",{value:"Jharkhand",children:"Jharkhand"}),i.jsx("option",{value:"Karnataka",children:"Karnataka"}),i.jsx("option",{value:"Kerala",children:"Kerala"}),i.jsx("option",{value:"Madhya Pradesh",children:"Madhya Pradesh"}),i.jsx("option",{value:"Maharashtra",children:"Maharashtra"}),i.jsx("option",{value:"Manipur",children:"Manipur"}),i.jsx("option",{value:"Meghalaya",children:"Meghalaya"}),i.jsx("option",{value:"Mizoram",children:"Mizoram"}),i.jsx("option",{value:"Nagaland",children:"Nagaland"}),i.jsx("option",{value:"Odisha",children:"Odisha"}),i.jsx("option",{value:"Punjab",children:"Punjab"}),i.jsx("option",{value:"Rajasthan",children:"Rajasthan"}),i.jsx("option",{value:"Sikkim",children:"Sikkim"}),i.jsx("option",{value:"Tamil Nadu",children:"Tamil Nadu"}),i.jsx("option",{value:"Telangana",children:"Telangana"}),i.jsx("option",{value:"Tripura",children:"Tripura"}),i.jsx("option",{value:"Uttar Pradesh",children:"Uttar Pradesh"}),i.jsx("option",{value:"Uttarakhand",children:"Uttarakhand"}),i.jsx("option",{value:"West Bengal",children:"West Bengal"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"GSTIN"}),i.jsx("input",{type:"text",value:P.gstin,onChange:C=>B({...P,gstin:C.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-green-500 outline-none"})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Address"}),i.jsx("textarea",{value:P.address,onChange:C=>B({...P,address:C.target.value}),rows:2,className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-green-500 outline-none"})]})]}),i.jsxs("div",{className:"flex gap-3 mt-4",children:[i.jsx("button",{type:"button",onClick:Lt,className:"px-4 py-2 bg-green-600 hover:bg-green-700 text-white font-medium rounded-lg transition",children:"Save Customer"}),i.jsx("button",{type:"button",onClick:()=>{_(!1),B({name:"",email:"",phone:"",address:"",state:"",gstin:""})},className:"px-4 py-2 bg-slate-200 hover:bg-slate-300 text-slate-700 font-medium rounded-lg transition",children:"Cancel"})]})]}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700",children:"Invoice Items"}),i.jsxs("div",{className:"flex gap-2",children:[i.jsxs("button",{type:"button",onClick:()=>{N(!w),w||U(!1)},className:`px-3 py-1 text-sm font-medium rounded-lg transition flex items-center gap-2 ${w?"bg-green-600 text-white hover:bg-green-700":"bg-slate-200 text-slate-700 hover:bg-slate-300"}`,children:[i.jsx(u1,{className:"w-4 h-4"}),w?"Scanning...":"Scan"]}),i.jsxs("button",{type:"button",onClick:()=>{U(!R),R||N(!1)},className:`px-3 py-1 text-sm font-medium rounded-lg transition flex items-center gap-2 ${R?"bg-blue-600 text-white hover:bg-blue-700":"bg-slate-200 text-slate-700 hover:bg-slate-300"}`,children:[i.jsx(jn,{className:"w-4 h-4"}),R?"SKU Search":"SKU"]}),i.jsx("button",{type:"button",onClick:lt,className:"px-3 py-1 bg-slate-600 hover:bg-slate-700 text-white text-sm font-medium rounded-lg transition",children:"Add Item"})]})]}),w&&i.jsxs("div",{className:"mb-4 bg-green-50 border-2 border-green-200 rounded-lg p-4",children:[i.jsx("label",{className:"block text-sm font-medium text-green-900 mb-2",children:"Scan Barcode"}),i.jsx("input",{type:"text",value:I,onChange:C=>E(C.target.value),onKeyDown:oi,placeholder:"Scan or type barcode and press Enter",autoFocus:!0,className:"w-full px-4 py-3 border-2 border-green-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500 outline-none text-lg"}),i.jsx("p",{className:"text-xs text-green-700 mt-2",children:"Place cursor here and scan product barcode"})]}),R&&i.jsxs("div",{className:"mb-4 bg-blue-50 border-2 border-blue-200 rounded-lg p-4",children:[i.jsx("label",{className:"block text-sm font-medium text-blue-900 mb-2",children:"Search by SKU"}),i.jsx("input",{type:"text",value:se,onChange:C=>K(C.target.value),onKeyDown:li,placeholder:"Type SKU and press Enter",autoFocus:!0,className:"w-full px-4 py-3 border-2 border-blue-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none text-lg"}),i.jsx("p",{className:"text-xs text-blue-700 mt-2",children:"Enter product SKU to quickly add to invoice"})]}),i.jsx("div",{className:"space-y-3",children:S.map((C,L)=>{const z=o.find(J=>J.id===C.product_id),G=C.custom_price!==void 0?C.custom_price:(z==null?void 0:z.selling_price)||0;return i.jsxs("div",{className:"bg-slate-50 p-4 rounded-lg border border-slate-200",children:[i.jsxs("div",{className:"flex gap-3 items-start mb-3",children:[i.jsx("select",{value:C.product_id,onChange:J=>q(L,"product_id",J.target.value),className:"flex-1 px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none bg-white",children:o.map(J=>i.jsxs("option",{value:J.id,children:[J.name," - ",V(J.selling_price)," (GST: ",J.gst_rate,"%)"]},J.id))}),i.jsx("input",{type:"number",min:"1",value:C.quantity,onChange:J=>q(L,"quantity",parseInt(J.target.value)),placeholder:"Qty",className:"w-24 px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none bg-white"}),i.jsx("button",{type:"button",onClick:()=>O(L),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition",children:i.jsx(Jt,{className:"w-5 h-5"})})]}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("label",{className:"text-sm font-medium text-slate-700 whitespace-nowrap",children:"Custom Price:"}),i.jsx("input",{type:"number",min:"0",step:"0.01",value:C.custom_price!==void 0?C.custom_price:"",onChange:J=>q(L,"custom_price",J.target.value?parseFloat(J.target.value):void 0),placeholder:`Default: ${V((z==null?void 0:z.selling_price)||0)}`,className:"flex-1 px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none bg-white"}),i.jsxs("span",{className:"text-sm font-semibold text-slate-900 whitespace-nowrap min-w-[100px] text-right",children:["Total: ",V(G*C.quantity)]})]})]},L)})})]}),i.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:i.jsxs("p",{className:"text-sm text-blue-800",children:[i.jsx("strong",{children:"Note:"})," GST will be calculated automatically based on product GST rates and customer location.",(u==null?void 0:u.state)&&` Company State: ${u.state}`]})}),i.jsxs("div",{className:"flex gap-3 pt-4",children:[i.jsx("button",{type:"submit",className:"flex-1 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-lg transition",children:"Create Invoice"}),i.jsx("button",{type:"button",onClick:()=>{b(!1),he({customer_id:"",due_date:"",tax_rate:"10",include_gst:!0}),$([]),_(!1),N(!1),E(""),U(!1),K(""),B({name:"",email:"",phone:"",address:"",state:"",gstin:""})},className:"flex-1 px-4 py-2 bg-slate-200 hover:bg-slate-300 text-slate-700 font-medium rounded-lg transition",children:"Cancel"})]})]})]})}),k&&i.jsx($k,{invoiceId:k,onClose:()=>g(null)})]})}function Ik(){const{profile:t}=vt(),[e,n]=j.useState([]),[r,s]=j.useState(!0),[a,o]=j.useState(""),[l,u]=j.useState(!1),[c,h]=j.useState(null),[d,p]=j.useState({name:"",email:"",phone:"",address:"",state:"",gstin:""});j.useEffect(()=>{v()},[]);const v=async()=>{try{const{data:f,error:y}=await T.from("customers").select("*").order("created_at",{ascending:!1});if(y)throw y;n(f||[])}catch(f){console.error("Error loading customers:",f)}finally{s(!1)}},x=async f=>{f.preventDefault();try{const y={name:d.name,email:d.email||null,phone:d.phone||null,address:d.address||null,state:d.state||"",gstin:d.gstin||"",created_by:t==null?void 0:t.id};if(c){const{error:_}=await T.from("customers").update(y).eq("id",c.id);if(_)throw _}else{const{error:_}=await T.from("customers").insert([y]);if(_)throw _}u(!1),h(null),p({name:"",email:"",phone:"",address:"",state:"",gstin:""}),v()}catch(y){console.error("Error saving customer:",y),alert("Error saving customer")}},b=f=>{h(f),p({name:f.name,email:f.email||"",phone:f.phone||"",address:f.address||"",state:f.state||"",gstin:f.gstin||""}),u(!0)},k=async f=>{if(confirm("Are you sure you want to delete this customer?"))try{const{error:y}=await T.from("customers").delete().eq("id",f);if(y)throw y;v()}catch(y){console.error("Error deleting customer:",y),alert("Error deleting customer")}},g=e.filter(f=>{var y;return f.name.toLowerCase().includes(a.toLowerCase())||((y=f.email)==null?void 0:y.toLowerCase().includes(a.toLowerCase()))}),m=()=>{const f=["Name","Email","Phone","Address","State","GSTIN","Created Date"],y=g.map(E=>[E.name,E.email||"",E.phone||"",E.address||"",E.state||"",E.gstin||"",new Date(E.created_at).toLocaleDateString("en-IN")]),_=[f.join(","),...y.map(E=>E.map(R=>`"${R}"`).join(","))].join(`
`),w=new Blob([_],{type:"text/csv;charset=utf-8;"}),N=document.createElement("a"),I=URL.createObjectURL(w);N.setAttribute("href",I),N.setAttribute("download",`customers_${new Date().toISOString().split("T")[0]}.csv`),N.style.visibility="hidden",document.body.appendChild(N),N.click(),document.body.removeChild(N)};return r?i.jsx("div",{className:"text-center py-8",children:"Loading customers..."}):i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-start sm:items-center justify-between",children:[i.jsxs("div",{className:"relative flex-1 max-w-md",children:[i.jsx(jn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400 w-5 h-5"}),i.jsx("input",{type:"text",placeholder:"Search customers...",value:a,onChange:f=>o(f.target.value),className:"w-full pl-10 pr-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none"})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsxs("button",{onClick:m,className:"flex items-center gap-2 px-4 py-2 bg-green-600 hover:bg-green-700 text-white font-medium rounded-lg transition",title:"Export to CSV/Excel",children:[i.jsx(b0,{className:"w-5 h-5"}),"Export"]}),i.jsxs("button",{onClick:()=>{h(null),p({name:"",email:"",phone:"",address:"",state:"",gstin:""}),u(!0)},className:"flex items-center gap-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-lg transition",children:[i.jsx(_n,{className:"w-5 h-5"}),"Add Customer"]})]})]}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:g.map(f=>i.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-6 hover:shadow-md transition",children:[i.jsxs("div",{className:"flex items-start justify-between mb-4",children:[i.jsx("div",{className:"bg-blue-100 p-3 rounded-lg",children:i.jsx(ka,{className:"w-6 h-6 text-blue-600"})}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{onClick:()=>b(f),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition",children:i.jsx(w0,{className:"w-4 h-4"})}),(t==null?void 0:t.role)==="admin"&&i.jsx("button",{onClick:()=>k(f.id),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition",children:i.jsx(Jt,{className:"w-4 h-4"})})]})]}),i.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-3",children:f.name}),i.jsxs("div",{className:"space-y-2",children:[f.email&&i.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-600",children:[i.jsx(ka,{className:"w-4 h-4"}),i.jsx("span",{className:"truncate",children:f.email})]}),f.phone&&i.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-600",children:[i.jsx(k0,{className:"w-4 h-4"}),i.jsx("span",{children:f.phone})]}),f.address&&i.jsxs("div",{className:"flex items-start gap-2 text-sm text-slate-600",children:[i.jsx(j0,{className:"w-4 h-4 mt-0.5"}),i.jsx("span",{className:"flex-1",children:f.address})]}),f.state&&i.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-600",children:[i.jsx("span",{className:"font-medium",children:"State:"}),i.jsx("span",{children:f.state})]}),f.gstin&&i.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-600",children:[i.jsx("span",{className:"font-medium",children:"GSTIN:"}),i.jsx("span",{className:"font-mono",children:f.gstin})]})]})]},f.id))}),l&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:i.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-2xl w-full",children:[i.jsx("div",{className:"p-6 border-b border-slate-200",children:i.jsx("h2",{className:"text-2xl font-bold text-slate-900",children:c?"Edit Customer":"Add New Customer"})}),i.jsxs("form",{onSubmit:x,className:"p-6 space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Customer Name"}),i.jsx("input",{type:"text",value:d.name,onChange:f=>p({...d,name:f.target.value}),required:!0,className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Email"}),i.jsx("input",{type:"email",value:d.email,onChange:f=>p({...d,email:f.target.value}),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Phone"}),i.jsx("input",{type:"tel",value:d.phone,onChange:f=>p({...d,phone:f.target.value}),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Address"}),i.jsx("textarea",{value:d.address,onChange:f=>p({...d,address:f.target.value}),rows:3,className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none"})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"State"}),i.jsxs("select",{value:d.state,onChange:f=>p({...d,state:f.target.value}),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none",children:[i.jsx("option",{value:"",children:"Select State"}),i.jsx("option",{value:"Andhra Pradesh",children:"Andhra Pradesh"}),i.jsx("option",{value:"Arunachal Pradesh",children:"Arunachal Pradesh"}),i.jsx("option",{value:"Assam",children:"Assam"}),i.jsx("option",{value:"Bihar",children:"Bihar"}),i.jsx("option",{value:"Chhattisgarh",children:"Chhattisgarh"}),i.jsx("option",{value:"Goa",children:"Goa"}),i.jsx("option",{value:"Gujarat",children:"Gujarat"}),i.jsx("option",{value:"Haryana",children:"Haryana"}),i.jsx("option",{value:"Himachal Pradesh",children:"Himachal Pradesh"}),i.jsx("option",{value:"Jharkhand",children:"Jharkhand"}),i.jsx("option",{value:"Karnataka",children:"Karnataka"}),i.jsx("option",{value:"Kerala",children:"Kerala"}),i.jsx("option",{value:"Madhya Pradesh",children:"Madhya Pradesh"}),i.jsx("option",{value:"Maharashtra",children:"Maharashtra"}),i.jsx("option",{value:"Manipur",children:"Manipur"}),i.jsx("option",{value:"Meghalaya",children:"Meghalaya"}),i.jsx("option",{value:"Mizoram",children:"Mizoram"}),i.jsx("option",{value:"Nagaland",children:"Nagaland"}),i.jsx("option",{value:"Odisha",children:"Odisha"}),i.jsx("option",{value:"Punjab",children:"Punjab"}),i.jsx("option",{value:"Rajasthan",children:"Rajasthan"}),i.jsx("option",{value:"Sikkim",children:"Sikkim"}),i.jsx("option",{value:"Tamil Nadu",children:"Tamil Nadu"}),i.jsx("option",{value:"Telangana",children:"Telangana"}),i.jsx("option",{value:"Tripura",children:"Tripura"}),i.jsx("option",{value:"Uttar Pradesh",children:"Uttar Pradesh"}),i.jsx("option",{value:"Uttarakhand",children:"Uttarakhand"}),i.jsx("option",{value:"West Bengal",children:"West Bengal"}),i.jsx("option",{value:"Delhi",children:"Delhi"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"GSTIN (Optional)"}),i.jsx("input",{type:"text",value:d.gstin,onChange:f=>p({...d,gstin:f.target.value.toUpperCase()}),placeholder:"e.g., 29ABCDE1234F1Z5",maxLength:15,className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none font-mono"})]})]}),i.jsxs("div",{className:"flex gap-3 pt-4",children:[i.jsx("button",{type:"submit",className:"flex-1 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-lg transition",children:c?"Update Customer":"Add Customer"}),i.jsx("button",{type:"button",onClick:()=>{u(!1),h(null)},className:"flex-1 px-4 py-2 bg-slate-200 hover:bg-slate-300 text-slate-700 font-medium rounded-lg transition",children:"Cancel"})]})]})]})})]})}function Rk(){const{profile:t}=vt(),[e,n]=j.useState([]),[r,s]=j.useState([]),[a,o]=j.useState([]),[l,u]=j.useState(!0),[c,h]=j.useState(""),[d,p]=j.useState("all"),[v,x]=j.useState({start:"",end:""}),[b,k]=j.useState(!1),[g,m]=j.useState(null),[f,y]=j.useState({type:"income",category:"",amount:"",description:"",transaction_date:new Date().toISOString().split("T")[0],payment_method_id:"",reference_number:""});j.useEffect(()=>{_()},[]);const _=async()=>{try{const[S,$,F]=await Promise.all([T.from("transactions").select(`
            *,
            payment_method:payment_methods(name)
          `).order("transaction_date",{ascending:!1}),T.from("payment_methods").select("*").eq("is_active",!0).order("name"),T.from("expense_categories").select("*").eq("is_active",!0).order("name")]);if(S.error)throw S.error;if($.error)throw $.error;if(F.error)throw F.error;n(S.data||[]),s($.data||[]),o(F.data||[])}catch(S){console.error("Error loading data:",S)}finally{u(!1)}},w=async S=>{S.preventDefault();try{const $={type:f.type,category:f.category,amount:parseFloat(f.amount),description:f.description||null,transaction_date:f.transaction_date,payment_method_id:f.payment_method_id||null,reference_number:f.reference_number||null,created_by:t==null?void 0:t.id};if(g){const{error:F}=await T.from("transactions").update($).eq("id",g.id);if(F)throw F}else{const{error:F}=await T.from("transactions").insert([$]);if(F)throw F}k(!1),m(null),y({type:"income",category:"",amount:"",description:"",transaction_date:new Date().toISOString().split("T")[0],payment_method_id:"",reference_number:""}),_()}catch($){console.error("Error saving transaction:",$),alert("Error saving transaction")}},N=S=>{m(S),y({type:S.type,category:S.category,amount:S.amount.toString(),description:S.description||"",transaction_date:S.transaction_date,payment_method_id:S.payment_method_id||"",reference_number:S.reference_number||""}),k(!0)},I=async S=>{if(confirm("Are you sure you want to delete this transaction?"))try{const{error:$}=await T.from("transactions").delete().eq("id",S);if($)throw $;_()}catch($){console.error("Error deleting transaction:",$),alert("Error deleting transaction")}},E=e.filter(S=>{var P,B;const $=S.category.toLowerCase().includes(c.toLowerCase())||((P=S.description)==null?void 0:P.toLowerCase().includes(c.toLowerCase()))||((B=S.reference_number)==null?void 0:B.toLowerCase().includes(c.toLowerCase())),F=d==="all"||S.type===d,he=(!v.start||S.transaction_date>=v.start)&&(!v.end||S.transaction_date<=v.end);return $&&F&&he}),R=E.filter(S=>S.type==="income").reduce((S,$)=>S+Number($.amount),0),U=E.filter(S=>S.type==="expense").reduce((S,$)=>S+Number($.amount),0),se=R-U,K=["Product Sales","Service Revenue","Interest Income","Other Income"];return l?i.jsx("div",{className:"text-center py-8",children:"Loading accounting data..."}):i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[i.jsxs("div",{className:"bg-gradient-to-br from-green-500 to-green-600 rounded-xl shadow-lg p-6 text-white",children:[i.jsx("div",{className:"flex items-center justify-between mb-4",children:i.jsx("div",{className:"bg-white bg-opacity-20 p-3 rounded-lg",children:i.jsx(ru,{className:"w-6 h-6"})})}),i.jsx("h3",{className:"text-green-100 text-sm font-medium mb-1",children:"Total Revenue"}),i.jsx("p",{className:"text-3xl font-bold",children:V(R)})]}),i.jsxs("div",{className:"bg-gradient-to-br from-red-500 to-red-600 rounded-xl shadow-lg p-6 text-white",children:[i.jsx("div",{className:"flex items-center justify-between mb-4",children:i.jsx("div",{className:"bg-white bg-opacity-20 p-3 rounded-lg",children:i.jsx(nu,{className:"w-6 h-6"})})}),i.jsx("h3",{className:"text-red-100 text-sm font-medium mb-1",children:"Total Expenses"}),i.jsx("p",{className:"text-3xl font-bold",children:V(U)})]}),i.jsxs("div",{className:`bg-gradient-to-br ${se>=0?"from-blue-500 to-blue-600":"from-orange-500 to-orange-600"} rounded-xl shadow-lg p-6 text-white`,children:[i.jsx("div",{className:"flex items-center justify-between mb-4",children:i.jsx("div",{className:"bg-white bg-opacity-20 p-3 rounded-lg",children:i.jsx(Yl,{className:"w-6 h-6"})})}),i.jsx("h3",{className:`${se>=0?"text-blue-100":"text-orange-100"} text-sm font-medium mb-1`,children:"Net Profit/Loss"}),i.jsx("p",{className:"text-3xl font-bold",children:V(se)}),i.jsx("p",{className:"text-xs mt-2 opacity-90",children:"Revenue - Expenses"})]})]}),i.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-6",children:[i.jsxs("div",{className:"flex flex-col lg:flex-row gap-4 items-start lg:items-center justify-between mb-6",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 flex-1 w-full",children:[i.jsxs("div",{className:"relative flex-1",children:[i.jsx(jn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400 w-5 h-5"}),i.jsx("input",{type:"text",placeholder:"Search transactions...",value:c,onChange:S=>h(S.target.value),className:"w-full pl-10 pr-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none"})]}),i.jsxs("select",{value:d,onChange:S=>p(S.target.value),className:"px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none",children:[i.jsx("option",{value:"all",children:"All Transactions"}),i.jsx("option",{value:"income",children:"Income Only"}),i.jsx("option",{value:"expense",children:"Expenses Only"})]})]}),i.jsxs("button",{onClick:()=>{m(null),y({type:"income",category:"",amount:"",description:"",transaction_date:new Date().toISOString().split("T")[0],payment_method_id:"",reference_number:""}),k(!0)},className:"flex items-center gap-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-lg transition whitespace-nowrap",children:[i.jsx(_n,{className:"w-5 h-5"}),"Add Transaction"]})]}),i.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 mb-6 items-start sm:items-center",children:[i.jsx(Yy,{className:"w-5 h-5 text-slate-400 mt-2 sm:mt-0"}),i.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 flex-1",children:[i.jsxs("div",{className:"flex-1",children:[i.jsx("label",{className:"block text-xs text-slate-600 mb-1",children:"From Date"}),i.jsx("input",{type:"date",value:v.start,onChange:S=>x({...v,start:S.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none text-sm"})]}),i.jsxs("div",{className:"flex-1",children:[i.jsx("label",{className:"block text-xs text-slate-600 mb-1",children:"To Date"}),i.jsx("input",{type:"date",value:v.end,onChange:S=>x({...v,end:S.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none text-sm"})]}),(v.start||v.end)&&i.jsx("button",{onClick:()=>x({start:"",end:""}),className:"px-4 py-2 mt-5 bg-slate-200 hover:bg-slate-300 text-slate-700 rounded-lg transition text-sm",children:"Clear"})]})]}),E.length===0?i.jsxs("div",{className:"text-center py-12 text-slate-500",children:[i.jsx(Yl,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),i.jsx("p",{children:"No transactions found"})]}):i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full",children:[i.jsx("thead",{className:"bg-slate-50 border-b border-slate-200",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-600 uppercase tracking-wider",children:"Date"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-600 uppercase tracking-wider",children:"Type"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-600 uppercase tracking-wider",children:"Category"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-600 uppercase tracking-wider",children:"Payment Method"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-600 uppercase tracking-wider",children:"Reference"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-600 uppercase tracking-wider",children:"Description"}),i.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-slate-600 uppercase tracking-wider",children:"Amount"}),i.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-slate-600 uppercase tracking-wider",children:"Actions"})]})}),i.jsx("tbody",{className:"divide-y divide-slate-200",children:E.map(S=>{var $;return i.jsxs("tr",{className:"hover:bg-slate-50 transition",children:[i.jsx("td",{className:"px-4 py-3 text-sm text-slate-900",children:new Date(S.transaction_date).toLocaleDateString("en-IN")}),i.jsx("td",{className:"px-4 py-3",children:i.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium ${S.type==="income"?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:[S.type==="income"?i.jsx(ru,{className:"w-3 h-3"}):i.jsx(nu,{className:"w-3 h-3"}),S.type.charAt(0).toUpperCase()+S.type.slice(1)]})}),i.jsx("td",{className:"px-4 py-3 text-sm text-slate-900",children:S.category}),i.jsx("td",{className:"px-4 py-3 text-sm text-slate-600",children:(($=S.payment_method)==null?void 0:$.name)||"-"}),i.jsx("td",{className:"px-4 py-3 text-sm text-slate-600",children:S.reference_number||"-"}),i.jsx("td",{className:"px-4 py-3 text-sm text-slate-600",children:S.description||"-"}),i.jsxs("td",{className:`px-4 py-3 text-sm font-semibold text-right ${S.type==="income"?"text-green-600":"text-red-600"}`,children:[S.type==="income"?"+":"-",V(Number(S.amount))]}),i.jsx("td",{className:"px-4 py-3 text-right",children:i.jsxs("div",{className:"flex items-center justify-end gap-2",children:[i.jsx("button",{onClick:()=>N(S),className:"p-1.5 text-blue-600 hover:bg-blue-50 rounded-lg transition",title:"Edit",children:i.jsx(o1,{className:"w-4 h-4"})}),(t==null?void 0:t.role)==="admin"&&i.jsx("button",{onClick:()=>I(S.id),className:"p-1.5 text-red-600 hover:bg-red-50 rounded-lg transition",title:"Delete",children:i.jsx(Jt,{className:"w-4 h-4"})})]})})]},S.id)})})]})})]}),b&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:i.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[i.jsx("div",{className:"p-6 border-b border-slate-200 sticky top-0 bg-white",children:i.jsx("h2",{className:"text-2xl font-bold text-slate-900",children:g?"Edit Transaction":"Add New Transaction"})}),i.jsxs("form",{onSubmit:w,className:"p-6 space-y-4",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Type *"}),i.jsxs("select",{value:f.type,onChange:S=>y({...f,type:S.target.value,category:""}),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none",children:[i.jsx("option",{value:"income",children:"Income"}),i.jsx("option",{value:"expense",children:"Expense"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Date *"}),i.jsx("input",{type:"date",value:f.transaction_date,onChange:S=>y({...f,transaction_date:S.target.value}),required:!0,className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none"})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Category *"}),f.type==="expense"?i.jsxs("select",{value:f.category,onChange:S=>y({...f,category:S.target.value}),required:!0,className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none",children:[i.jsx("option",{value:"",children:"Select Category"}),a.map(S=>i.jsx("option",{value:S.name,children:S.name},S.id))]}):i.jsxs("select",{value:f.category,onChange:S=>y({...f,category:S.target.value}),required:!0,className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none",children:[i.jsx("option",{value:"",children:"Select Category"}),K.map(S=>i.jsx("option",{value:S,children:S},S))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Amount *"}),i.jsx("input",{type:"number",step:"0.01",value:f.amount,onChange:S=>y({...f,amount:S.target.value}),required:!0,placeholder:"0.00",className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none"})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Payment Method"}),i.jsxs("select",{value:f.payment_method_id,onChange:S=>y({...f,payment_method_id:S.target.value}),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none",children:[i.jsx("option",{value:"",children:"Select Payment Method"}),r.map(S=>i.jsx("option",{value:S.id,children:S.name},S.id))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Reference Number"}),i.jsx("input",{type:"text",value:f.reference_number,onChange:S=>y({...f,reference_number:S.target.value}),placeholder:"Cheque No, Transaction ID, etc.",className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Description"}),i.jsx("textarea",{value:f.description,onChange:S=>y({...f,description:S.target.value}),rows:3,placeholder:"Add notes or details about this transaction...",className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none"})]}),i.jsxs("div",{className:"flex gap-3 pt-4",children:[i.jsx("button",{type:"submit",className:"flex-1 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-lg transition",children:g?"Update Transaction":"Add Transaction"}),i.jsx("button",{type:"button",onClick:()=>{k(!1),m(null)},className:"flex-1 px-4 py-2 bg-slate-200 hover:bg-slate-300 text-slate-700 font-medium rounded-lg transition",children:"Cancel"})]})]})]})})]})}function Dk(){const[t,e]=j.useState(!0),[n,r]=j.useState(!1),[s,a]=j.useState(null),[o,l]=j.useState({company_name:"",gst_number:"",pan_number:"",address_line1:"",address_line2:"",city:"",state:"",postal_code:"",country:"India",phone:"",email:"",website:"",whatsapp_number:"",whatsapp_api_token:"",whatsapp_phone_number_id:"",bank_name:"",account_number:"",ifsc_code:"",terms_conditions:"Payment due within 30 days",logo_url:""});j.useEffect(()=>{u()},[]);const u=async()=>{try{const{data:{user:d}}=await T.auth.getUser();if(!d)return;const{data:p,error:v}=await T.from("company_profile").select("*").eq("user_id",d.id).maybeSingle();if(v&&v.code!=="PGRST116")throw v;p&&l(p)}catch(d){console.error("Error loading profile:",d),a({type:"error",text:"Failed to load company profile"})}finally{e(!1)}},c=async d=>{d.preventDefault(),r(!0),a(null);try{const{data:{user:p}}=await T.auth.getUser();if(!p)throw new Error("Not authenticated");const v={...o,user_id:p.id};if(o.id){const{error:x}=await T.from("company_profile").update(v).eq("id",o.id);if(x)throw x}else{const{data:x,error:b}=await T.from("company_profile").insert([v]).select().single();if(b)throw b;l({...o,id:x.id})}a({type:"success",text:"Company profile saved successfully!"})}catch(p){console.error("Error saving profile:",p),a({type:"error",text:"Failed to save company profile"})}finally{r(!1)}},h=(d,p)=>{l({...o,[d]:p})};return t?i.jsx("div",{className:"flex items-center justify-center h-96",children:i.jsx(xh,{className:"w-8 h-8 animate-spin text-blue-600"})}):i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"bg-blue-600 p-3 rounded-xl",children:i.jsx(y0,{className:"w-6 h-6 text-white"})}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Company Profile"}),i.jsx("p",{className:"text-slate-600",children:"Manage your business information and invoice settings"})]})]}),s&&i.jsx("div",{className:`p-4 rounded-lg ${s.type==="success"?"bg-green-50 border border-green-200 text-green-800":"bg-red-50 border border-red-200 text-red-800"}`,children:s.text}),i.jsxs("form",{onSubmit:c,className:"bg-white rounded-xl shadow-sm border border-slate-200",children:[i.jsxs("div",{className:"p-6 space-y-6",children:[i.jsxs("div",{className:"border-t border-slate-200 pt-6",children:[i.jsx("h2",{className:"text-lg font-semibold text-slate-900 mb-4",children:"Basic Information"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Company Name *"}),i.jsx("input",{type:"text",value:o.company_name,onChange:d=>h("company_name",d.target.value),required:!0,className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none",placeholder:"ABC Enterprises Pvt Ltd"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"GST Number"}),i.jsx("input",{type:"text",value:o.gst_number,onChange:d=>h("gst_number",d.target.value),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none",placeholder:"22AAAAA0000A1Z5"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"PAN Number"}),i.jsx("input",{type:"text",value:o.pan_number,onChange:d=>h("pan_number",d.target.value),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none",placeholder:"AAAAA0000A"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Business Email"}),i.jsx("input",{type:"email",value:o.email,onChange:d=>h("email",d.target.value),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none",placeholder:"info@company.com"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Phone"}),i.jsx("input",{type:"tel",value:o.phone,onChange:d=>h("phone",d.target.value),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none",placeholder:"+91 98765 43210"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Website"}),i.jsx("input",{type:"url",value:o.website,onChange:d=>h("website",d.target.value),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none",placeholder:"https://www.company.com"})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"WhatsApp Number"}),i.jsx("input",{type:"tel",value:o.whatsapp_number,onChange:d=>h("whatsapp_number",d.target.value),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none",placeholder:"919876543210"}),i.jsx("p",{className:"mt-1 text-xs text-slate-500",children:"Enter with country code (e.g., 919876543210 for India)"})]})]})]}),i.jsxs("div",{className:"border-t border-slate-200 pt-6",children:[i.jsx("h2",{className:"text-lg font-semibold text-slate-900 mb-4",children:"WhatsApp Business API"}),i.jsxs("p",{className:"text-sm text-slate-600 mb-4",children:["Configure Meta WhatsApp Business API for automatic message sending.",i.jsx("a",{href:"https://developers.facebook.com/docs/whatsapp/cloud-api/get-started",target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline ml-1",children:"Get your credentials here"})]}),i.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"WhatsApp API Token"}),i.jsx("input",{type:"password",value:o.whatsapp_api_token,onChange:d=>h("whatsapp_api_token",d.target.value),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none font-mono text-sm",placeholder:"EAAxxxxxxxxxx"}),i.jsx("p",{className:"mt-1 text-xs text-slate-500",children:"Your permanent access token from Meta Business"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Phone Number ID"}),i.jsx("input",{type:"text",value:o.whatsapp_phone_number_id,onChange:d=>h("whatsapp_phone_number_id",d.target.value),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none font-mono text-sm",placeholder:"123456789012345"}),i.jsx("p",{className:"mt-1 text-xs text-slate-500",children:"The Phone Number ID from your WhatsApp Business API dashboard"})]})]})]}),i.jsxs("div",{className:"border-t border-slate-200 pt-6",children:[i.jsx("h2",{className:"text-lg font-semibold text-slate-900 mb-4",children:"Address"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Address Line 1"}),i.jsx("input",{type:"text",value:o.address_line1,onChange:d=>h("address_line1",d.target.value),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none",placeholder:"123 Business Street"})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Address Line 2"}),i.jsx("input",{type:"text",value:o.address_line2,onChange:d=>h("address_line2",d.target.value),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none",placeholder:"Suite 100"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"City"}),i.jsx("input",{type:"text",value:o.city,onChange:d=>h("city",d.target.value),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none",placeholder:"Mumbai"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"State"}),i.jsx("input",{type:"text",value:o.state,onChange:d=>h("state",d.target.value),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none",placeholder:"Maharashtra"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Postal Code"}),i.jsx("input",{type:"text",value:o.postal_code,onChange:d=>h("postal_code",d.target.value),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none",placeholder:"400001"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Country"}),i.jsx("input",{type:"text",value:o.country,onChange:d=>h("country",d.target.value),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none",placeholder:"India"})]})]})]}),i.jsxs("div",{className:"border-t border-slate-200 pt-6",children:[i.jsx("h2",{className:"text-lg font-semibold text-slate-900 mb-4",children:"Banking Details"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Bank Name"}),i.jsx("input",{type:"text",value:o.bank_name,onChange:d=>h("bank_name",d.target.value),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none",placeholder:"State Bank of India"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Account Number"}),i.jsx("input",{type:"text",value:o.account_number,onChange:d=>h("account_number",d.target.value),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none",placeholder:"1234567890"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"IFSC Code"}),i.jsx("input",{type:"text",value:o.ifsc_code,onChange:d=>h("ifsc_code",d.target.value),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none",placeholder:"SBIN0001234"})]})]})]}),i.jsxs("div",{className:"border-t border-slate-200 pt-6",children:[i.jsx("h2",{className:"text-lg font-semibold text-slate-900 mb-4",children:"Invoice Settings"}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Terms & Conditions"}),i.jsx("textarea",{value:o.terms_conditions,onChange:d=>h("terms_conditions",d.target.value),rows:4,className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none",placeholder:"Payment due within 30 days. Late payments subject to 2% monthly interest."})]})]})]}),i.jsx("div",{className:"px-6 py-4 bg-slate-50 border-t border-slate-200 rounded-b-xl flex justify-end",children:i.jsx("button",{type:"submit",disabled:n,className:"flex items-center gap-2 px-6 py-2.5 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-lg transition disabled:opacity-50 disabled:cursor-not-allowed",children:n?i.jsxs(i.Fragment,{children:[i.jsx(xh,{className:"w-4 h-4 animate-spin"}),"Saving..."]}):i.jsxs(i.Fragment,{children:[i.jsx(tu,{className:"w-4 h-4"}),"Save Profile"]})})})]})]})}function Lk(){var I;const{profile:t}=vt(),[e,n]=j.useState([]),[,r]=j.useState([]),[s,a]=j.useState([]),[o,l]=j.useState(!0),[u,c]=j.useState(""),[h,d]=j.useState("all"),[p,v]=j.useState(!1),[x,b]=j.useState(null),[k,g]=j.useState({amount:"",payment_date:new Date().toISOString().split("T")[0],payment_method_id:"",reference_number:"",notes:""});j.useEffect(()=>{m()},[]);const m=async()=>{try{const[E,R,U]=await Promise.all([T.from("invoices").select(`
            *,
            customer:customers(name, phone)
          `).neq("payment_status","paid").order("due_date",{ascending:!0}),T.from("invoice_payments").select(`
            *,
            payment_method:payment_methods(name)
          `).order("payment_date",{ascending:!1}),T.from("payment_methods").select("*").eq("is_active",!0).order("name")]);if(E.error)throw E.error;if(R.error)throw R.error;if(U.error)throw U.error;n(E.data||[]),r(R.data||[]),a(U.data||[])}catch(E){console.error("Error loading data:",E)}finally{l(!1)}},f=async E=>{var R;if(E.preventDefault(),!!x)try{const U=parseFloat(k.amount),se=x.total-x.amount_paid;if(U<=0){alert("Payment amount must be greater than 0");return}if(U>se){alert(`Payment amount cannot exceed remaining balance of ${V(se)}`);return}const{error:K}=await T.from("invoice_payments").insert([{invoice_id:x.id,amount:U,payment_date:k.payment_date,payment_method_id:k.payment_method_id||null,reference_number:k.reference_number||null,notes:k.notes||null,created_by:t==null?void 0:t.id}]);if(K)throw K;const S=x.amount_paid+U,$=S>=x.total?"paid":S>0?"partial":"unpaid",{error:F}=await T.from("invoices").update({amount_paid:S,payment_status:$,status:$==="paid"?"paid":"sent",paid_date:$==="paid"?new Date().toISOString().split("T")[0]:null}).eq("id",x.id);if(F)throw F;if(x.payment_status==="unpaid"&&($==="partial"||$==="paid")){const{data:P,error:B}=await T.from("invoice_items").select("product_id, quantity").eq("invoice_id",x.id);if(B)throw B;const H=await T.from("invoices").select("invoice_number").eq("id",x.id).single();for(const te of P||[]){const{data:le}=await T.from("products").select("quantity").eq("id",te.product_id).single();if(le){const Ot=le.quantity-te.quantity;await T.from("products").update({quantity:Ot}).eq("id",te.product_id),await T.from("inventory_movements").insert([{product_id:te.product_id,type:"out",quantity:te.quantity,reason:`Invoice ${(R=H.data)==null?void 0:R.invoice_number} - first payment received`,created_by:t==null?void 0:t.id}])}}}const{error:he}=await T.from("transactions").insert([{type:"income",category:"Product Sales",amount:U,description:`Payment for Invoice ${x.invoice_number}`,transaction_date:k.payment_date,payment_method_id:k.payment_method_id||null,reference_number:k.reference_number||null,invoice_id:x.id,created_by:t==null?void 0:t.id}]);if(he)throw he;v(!1),b(null),g({amount:"",payment_date:new Date().toISOString().split("T")[0],payment_method_id:"",reference_number:"",notes:""}),m()}catch(U){console.error("Error adding payment:",U),alert("Error adding payment: "+U.message)}},y=e.filter(E=>{var S;const R=E.invoice_number.toLowerCase().includes(u.toLowerCase())||((S=E.customer)==null?void 0:S.name.toLowerCase().includes(u.toLowerCase())),U=h==="all"||E.payment_status===h,se=new Date(E.due_date)<new Date&&E.payment_status!=="paid";return R&&U&&(h==="overdue"?se:!0)}),_=y.reduce((E,R)=>E+(R.total-R.amount_paid),0),w=y.filter(E=>new Date(E.due_date)<new Date&&E.payment_status!=="paid").reduce((E,R)=>E+(R.total-R.amount_paid),0),N=E=>{if(new Date(E.due_date)<new Date&&E.payment_status!=="paid")return i.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-red-100 text-red-700",children:[i.jsx(Jl,{className:"w-3 h-3"}),"Overdue"]});switch(E.payment_status){case"unpaid":return i.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-orange-100 text-orange-700",children:[i.jsx(Es,{className:"w-3 h-3"}),"Unpaid"]});case"partial":return i.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-yellow-100 text-yellow-700",children:[i.jsx(Es,{className:"w-3 h-3"}),"Partial"]});case"paid":return i.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-700",children:[i.jsx(_a,{className:"w-3 h-3"}),"Paid"]});default:return null}};return o?i.jsx("div",{className:"text-center py-8",children:"Loading payment receivables..."}):i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.jsxs("div",{className:"bg-gradient-to-br from-orange-500 to-orange-600 rounded-xl shadow-lg p-6 text-white",children:[i.jsx("div",{className:"flex items-center justify-between mb-4",children:i.jsx("div",{className:"bg-white bg-opacity-20 p-3 rounded-lg",children:i.jsx(_0,{className:"w-6 h-6"})})}),i.jsx("h3",{className:"text-orange-100 text-sm font-medium mb-1",children:"Total Receivable"}),i.jsx("p",{className:"text-3xl font-bold",children:V(_)}),i.jsxs("p",{className:"text-xs mt-2 opacity-90",children:[y.length," pending invoices"]})]}),i.jsxs("div",{className:"bg-gradient-to-br from-red-500 to-red-600 rounded-xl shadow-lg p-6 text-white",children:[i.jsx("div",{className:"flex items-center justify-between mb-4",children:i.jsx("div",{className:"bg-white bg-opacity-20 p-3 rounded-lg",children:i.jsx(Jl,{className:"w-6 h-6"})})}),i.jsx("h3",{className:"text-red-100 text-sm font-medium mb-1",children:"Overdue Amount"}),i.jsx("p",{className:"text-3xl font-bold",children:V(w)})]})]}),i.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-6",children:[i.jsx("div",{className:"flex flex-col lg:flex-row gap-4 items-start lg:items-center justify-between mb-6",children:i.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 flex-1 w-full",children:[i.jsxs("div",{className:"relative flex-1",children:[i.jsx(jn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400 w-5 h-5"}),i.jsx("input",{type:"text",placeholder:"Search by invoice or customer...",value:u,onChange:E=>c(E.target.value),className:"w-full pl-10 pr-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none"})]}),i.jsxs("select",{value:h,onChange:E=>d(E.target.value),className:"px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none",children:[i.jsx("option",{value:"all",children:"All Status"}),i.jsx("option",{value:"unpaid",children:"Unpaid"}),i.jsx("option",{value:"partial",children:"Partial Payment"}),i.jsx("option",{value:"overdue",children:"Overdue"})]})]})}),y.length===0?i.jsxs("div",{className:"text-center py-12 text-slate-500",children:[i.jsx(_a,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),i.jsx("p",{children:"No pending receivables"})]}):i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full",children:[i.jsx("thead",{className:"bg-slate-50 border-b border-slate-200",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-600 uppercase tracking-wider",children:"Invoice"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-600 uppercase tracking-wider",children:"Customer"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-600 uppercase tracking-wider",children:"Due Date"}),i.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-slate-600 uppercase tracking-wider",children:"Total"}),i.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-slate-600 uppercase tracking-wider",children:"Paid"}),i.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-slate-600 uppercase tracking-wider",children:"Balance"}),i.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-slate-600 uppercase tracking-wider",children:"Status"}),i.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-slate-600 uppercase tracking-wider",children:"Actions"})]})}),i.jsx("tbody",{className:"divide-y divide-slate-200",children:y.map(E=>{var se,K;const R=E.total-E.amount_paid,U=new Date(E.due_date)<new Date;return i.jsxs("tr",{className:`hover:bg-slate-50 transition ${U?"bg-red-50":""}`,children:[i.jsx("td",{className:"px-4 py-3 text-sm font-medium text-slate-900",children:E.invoice_number}),i.jsx("td",{className:"px-4 py-3 text-sm text-slate-900",children:i.jsxs("div",{children:[i.jsx("div",{className:"font-medium",children:(se=E.customer)==null?void 0:se.name}),i.jsx("div",{className:"text-xs text-slate-500",children:(K=E.customer)==null?void 0:K.phone})]})}),i.jsx("td",{className:"px-4 py-3 text-sm text-slate-900",children:new Date(E.due_date).toLocaleDateString("en-IN")}),i.jsx("td",{className:"px-4 py-3 text-sm text-slate-900 text-right",children:V(E.total)}),i.jsx("td",{className:"px-4 py-3 text-sm text-green-600 text-right",children:V(E.amount_paid)}),i.jsx("td",{className:"px-4 py-3 text-sm font-semibold text-orange-600 text-right",children:V(R)}),i.jsx("td",{className:"px-4 py-3 text-center",children:N(E)}),i.jsx("td",{className:"px-4 py-3 text-right",children:i.jsx("button",{onClick:()=>{b(E),g({amount:R.toString(),payment_date:new Date().toISOString().split("T")[0],payment_method_id:"",reference_number:"",notes:""}),v(!0)},className:"px-3 py-1.5 bg-blue-600 hover:bg-blue-700 text-white text-sm font-medium rounded-lg transition",children:"Add Payment"})})]},E.id)})})]})})]}),p&&x&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:i.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-2xl w-full",children:[i.jsxs("div",{className:"p-6 border-b border-slate-200",children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-900",children:"Record Payment"}),i.jsxs("div",{className:"mt-2 text-sm text-slate-600",children:[i.jsxs("p",{children:["Invoice: ",i.jsx("span",{className:"font-medium",children:x.invoice_number})]}),i.jsxs("p",{children:["Customer: ",i.jsx("span",{className:"font-medium",children:(I=x.customer)==null?void 0:I.name})]}),i.jsxs("p",{className:"mt-2",children:["Total: ",i.jsx("span",{className:"font-semibold",children:V(x.total)})," | Paid: ",i.jsx("span",{className:"font-semibold text-green-600",children:V(x.amount_paid)})," | Balance: ",i.jsx("span",{className:"font-semibold text-orange-600",children:V(x.total-x.amount_paid)})]})]})]}),i.jsxs("form",{onSubmit:f,className:"p-6 space-y-4",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Payment Amount *"}),i.jsx("input",{type:"number",step:"0.01",value:k.amount,onChange:E=>g({...k,amount:E.target.value}),required:!0,max:x.total-x.amount_paid,placeholder:"0.00",className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Payment Date *"}),i.jsx("input",{type:"date",value:k.payment_date,onChange:E=>g({...k,payment_date:E.target.value}),required:!0,className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none"})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Payment Method"}),i.jsxs("select",{value:k.payment_method_id,onChange:E=>g({...k,payment_method_id:E.target.value}),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none",children:[i.jsx("option",{value:"",children:"Select Method"}),s.map(E=>i.jsx("option",{value:E.id,children:E.name},E.id))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Reference Number"}),i.jsx("input",{type:"text",value:k.reference_number,onChange:E=>g({...k,reference_number:E.target.value}),placeholder:"Transaction ID, Cheque No, etc.",className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Notes"}),i.jsx("textarea",{value:k.notes,onChange:E=>g({...k,notes:E.target.value}),rows:3,placeholder:"Additional payment notes...",className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none"})]}),i.jsxs("div",{className:"flex gap-3 pt-4",children:[i.jsx("button",{type:"submit",className:"flex-1 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-lg transition",children:"Record Payment"}),i.jsx("button",{type:"button",onClick:()=>{v(!1),b(null)},className:"flex-1 px-4 py-2 bg-slate-200 hover:bg-slate-300 text-slate-700 font-medium rounded-lg transition",children:"Cancel"})]})]})]})})]})}function Mk(){const{profile:t}=vt(),[e,n]=j.useState([]),[r,s]=j.useState(!0),[a,o]=j.useState(""),[l,u]=j.useState(!1),[c,h]=j.useState(null),[d,p]=j.useState({name:"",contact_person:"",email:"",phone:"",address:"",state:"",gstin:"",pan:""});j.useEffect(()=>{v()},[]);const v=async()=>{try{const{data:m,error:f}=await T.from("suppliers").select("*").order("name",{ascending:!0});if(f)throw f;n(m||[])}catch(m){console.error("Error loading suppliers:",m)}finally{s(!1)}},x=async m=>{m.preventDefault();try{if(c){const{error:f}=await T.from("suppliers").update({...d,updated_at:new Date().toISOString()}).eq("id",c.id);if(f)throw f}else{const{error:f}=await T.from("suppliers").insert([{...d,created_by:t==null?void 0:t.id}]);if(f)throw f}u(!1),h(null),p({name:"",contact_person:"",email:"",phone:"",address:"",state:"",gstin:"",pan:""}),v()}catch(f){console.error("Error saving supplier:",f),alert("Error saving supplier: "+f.message)}},b=m=>{h(m),p({name:m.name,contact_person:m.contact_person||"",email:m.email||"",phone:m.phone||"",address:m.address||"",state:m.state||"",gstin:m.gstin||"",pan:m.pan||""}),u(!0)},k=async m=>{if(confirm("Are you sure you want to delete this supplier?"))try{const{error:f}=await T.from("suppliers").delete().eq("id",m);if(f)throw f;v()}catch(f){console.error("Error deleting supplier:",f),alert("Error deleting supplier: "+f.message)}},g=e.filter(m=>{var f,y;return m.name.toLowerCase().includes(a.toLowerCase())||((f=m.contact_person)==null?void 0:f.toLowerCase().includes(a.toLowerCase()))||((y=m.phone)==null?void 0:y.includes(a))});return r?i.jsx("div",{className:"text-center py-8",children:"Loading suppliers..."}):i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-start sm:items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-slate-900",children:"Suppliers"}),i.jsx("p",{className:"text-slate-600 mt-1",children:"Manage your supplier information"})]}),i.jsxs("button",{onClick:()=>{h(null),p({name:"",contact_person:"",email:"",phone:"",address:"",state:"",gstin:"",pan:""}),u(!0)},className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-lg transition flex items-center gap-2 shadow-sm",children:[i.jsx(_n,{className:"w-5 h-5"}),"Add Supplier"]})]}),i.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-6",children:[i.jsx("div",{className:"mb-6",children:i.jsxs("div",{className:"relative",children:[i.jsx(jn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400 w-5 h-5"}),i.jsx("input",{type:"text",placeholder:"Search suppliers...",value:a,onChange:m=>o(m.target.value),className:"w-full pl-10 pr-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none"})]})}),g.length===0?i.jsxs("div",{className:"text-center py-12 text-slate-500",children:[i.jsx(gh,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),i.jsx("p",{children:"No suppliers found"})]}):i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:g.map(m=>i.jsxs("div",{className:"border border-slate-200 rounded-lg p-4 hover:shadow-md transition",children:[i.jsxs("div",{className:"flex items-start justify-between mb-3",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"bg-blue-100 p-2 rounded-lg",children:i.jsx(gh,{className:"w-5 h-5 text-blue-600"})}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold text-slate-900",children:m.name}),m.contact_person&&i.jsx("p",{className:"text-xs text-slate-500",children:m.contact_person})]})]}),i.jsxs("div",{className:"flex gap-1",children:[i.jsx("button",{onClick:()=>b(m),className:"p-1.5 text-slate-600 hover:text-blue-600 hover:bg-blue-50 rounded transition",children:i.jsx(d1,{className:"w-4 h-4"})}),i.jsx("button",{onClick:()=>k(m.id),className:"p-1.5 text-slate-600 hover:text-red-600 hover:bg-red-50 rounded transition",children:i.jsx(Jt,{className:"w-4 h-4"})})]})]}),i.jsxs("div",{className:"space-y-2 text-sm",children:[m.phone&&i.jsxs("div",{className:"flex items-center gap-2 text-slate-600",children:[i.jsx(k0,{className:"w-4 h-4"}),i.jsx("span",{children:m.phone})]}),m.email&&i.jsxs("div",{className:"flex items-center gap-2 text-slate-600",children:[i.jsx(ka,{className:"w-4 h-4"}),i.jsx("span",{className:"truncate",children:m.email})]}),m.address&&i.jsxs("div",{className:"flex items-start gap-2 text-slate-600",children:[i.jsx(j0,{className:"w-4 h-4 mt-0.5 flex-shrink-0"}),i.jsx("span",{className:"text-xs",children:m.address})]}),m.state&&i.jsxs("div",{className:"text-xs text-slate-500",children:["State: ",m.state]}),m.gstin&&i.jsxs("div",{className:"text-xs text-slate-500",children:["GSTIN: ",m.gstin]})]})]},m.id))})]}),l&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:i.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[i.jsx("div",{className:"p-6 border-b border-slate-200",children:i.jsx("h2",{className:"text-2xl font-bold text-slate-900",children:c?"Edit Supplier":"Add New Supplier"})}),i.jsxs("form",{onSubmit:x,className:"p-6 space-y-4",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Supplier Name *"}),i.jsx("input",{type:"text",value:d.name,onChange:m=>p({...d,name:m.target.value}),required:!0,placeholder:"ABC Suppliers Pvt Ltd",className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Contact Person"}),i.jsx("input",{type:"text",value:d.contact_person,onChange:m=>p({...d,contact_person:m.target.value}),placeholder:"John Doe",className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Phone"}),i.jsx("input",{type:"tel",value:d.phone,onChange:m=>p({...d,phone:m.target.value}),placeholder:"+91 98765 43210",className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none"})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Email"}),i.jsx("input",{type:"email",value:d.email,onChange:m=>p({...d,email:m.target.value}),placeholder:"contact@supplier.com",className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none"})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Address"}),i.jsx("textarea",{value:d.address,onChange:m=>p({...d,address:m.target.value}),rows:2,placeholder:"Street address, city, postal code",className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"State"}),i.jsx("input",{type:"text",value:d.state,onChange:m=>p({...d,state:m.target.value}),placeholder:"Maharashtra",className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"GSTIN"}),i.jsx("input",{type:"text",value:d.gstin,onChange:m=>p({...d,gstin:m.target.value.toUpperCase()}),placeholder:"27XXXXX1234X1Z5",maxLength:15,className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"PAN"}),i.jsx("input",{type:"text",value:d.pan,onChange:m=>p({...d,pan:m.target.value.toUpperCase()}),placeholder:"ABCDE1234F",maxLength:10,className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none"})]})]}),i.jsxs("div",{className:"flex gap-3 pt-4",children:[i.jsx("button",{type:"submit",className:"flex-1 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-lg transition",children:c?"Update Supplier":"Add Supplier"}),i.jsx("button",{type:"button",onClick:()=>{u(!1),h(null)},className:"flex-1 px-4 py-2 bg-slate-200 hover:bg-slate-300 text-slate-700 font-medium rounded-lg transition",children:"Cancel"})]})]})]})})]})}function Uk(){var li;const{profile:t}=vt(),[e,n]=j.useState("orders"),[r,s]=j.useState([]),[a,o]=j.useState([]),[l,u]=j.useState([]),[c,h]=j.useState(!0),[d,p]=j.useState(""),[v,x]=j.useState("all"),[b,k]=j.useState(!1),[g,m]=j.useState(!1),[f,y]=j.useState(null),[_,w]=j.useState(""),[N,I]=j.useState([]),[E,R]=j.useState({supplier_id:"",order_date:new Date().toISOString().split("T")[0],expected_date:"",notes:""}),[U,se]=j.useState({product_name:"",sku:"",quantity:"",unit:"piece",unit_price:"",gst_rate:"18",hsn_code:""}),[K,S]=j.useState({amount:"",payment_date:new Date().toISOString().split("T")[0],payment_method_id:"",reference_number:"",notes:""});j.useEffect(()=>{$()},[]);const $=async()=>{var O;try{const[q,X,me,C]=await Promise.all([T.from("purchases").select(`
            *,
            supplier:suppliers(name)
          `).order("created_at",{ascending:!1}),T.from("suppliers").select("id, name").order("name"),T.from("payment_methods").select("*").eq("is_active",!0).order("name"),T.from("company_profile").select("state").eq("user_id",t==null?void 0:t.id).single()]);if(q.error)throw q.error;if(X.error)throw X.error;if(me.error)throw me.error;s(q.data||[]),o(X.data||[]),u(me.data||[]),w(((O=C.data)==null?void 0:O.state)||"")}catch(q){console.error("Error loading data:",q)}finally{h(!1)}},F=async()=>{const{data:O,error:q}=await T.from("purchases").select("purchase_number").order("created_at",{ascending:!1}).limit(1);if(q)throw q;const X=O&&O.length>0?parseInt(O[0].purchase_number.replace("PO-","")):0;return`PO-${String(X+1).padStart(5,"0")}`},he=()=>{if(!U.product_name||!U.sku||!U.quantity||!U.unit_price){alert("Please fill in all required fields");return}const O={temp_id:Date.now().toString(),product_name:U.product_name,sku:U.sku,quantity:parseFloat(U.quantity),unit:U.unit,unit_price:parseFloat(U.unit_price),gst_rate:parseFloat(U.gst_rate),hsn_code:U.hsn_code};I([...N,O]),se({product_name:"",sku:"",quantity:"",unit:"piece",unit_price:"",gst_rate:"18",hsn_code:""})},P=O=>{I(N.filter(q=>q.temp_id!==O))},B=(O,q)=>{I(N.map(X=>X.temp_id===O?{...X,quantity:q}:X))},H=(O,q)=>{I(N.map(X=>X.temp_id===O?{...X,unit_price:q}:X))},te=async O=>{if(O.preventDefault(),N.length===0){alert("Please add at least one item");return}try{const q=await F(),{data:X}=await T.from("suppliers").select("state").eq("id",E.supplier_id).maybeSingle(),me=((X==null?void 0:X.state)||"").trim(),C=(_||"").trim(),L=C&&me?C!==me:!1;console.log("Purchase creation debug:",{companyState:C,supplierState:me,isInterstate:L,isInterstateType:typeof L,rawSupplierState:X==null?void 0:X.state,rawCompanyState:_});let z=0,G=0,J=0,ne=0;const D=[];for(const fe of N){const{data:er}=await T.from("products").select("id").eq("sku",fe.sku).single();let On=er==null?void 0:er.id;if(!On){const{data:ui,error:ci}=await T.from("products").insert([{name:fe.product_name,sku:fe.sku,description:"Raw Material",cost_price:fe.unit_price,selling_price:fe.unit_price,quantity:0,reorder_level:10,unit:fe.unit,hsn_code:fe.hsn_code||"",gst_rate:fe.gst_rate,inventory_type:"raw_material",created_by:t==null?void 0:t.id}]).select().single();if(ci)throw ci;On=ui.id}const Xr=fe.quantity*fe.unit_price,je=tm(Xr,fe.gst_rate,L);z+=Xr,G+=je.cgst,J+=je.sgst,ne+=je.igst,D.push({product_id:On,quantity:fe.quantity,unit_price:fe.unit_price,cgst_rate:je.cgstRate,sgst_rate:je.sgstRate,igst_rate:je.igstRate,cgst_amount:je.cgst,sgst_amount:je.sgst,igst_amount:je.igst,total:Xr+je.cgst+je.sgst+je.igst})}const Y=G+J+ne,Mt=z+Y,Ge={purchase_number:q,supplier_id:E.supplier_id,status:"ordered",payment_status:"unpaid",amount_paid:0,subtotal:z,cgst:G,sgst:J,igst:ne,tax:Y,total:Mt,is_interstate:!!L,place_of_supply:me||null,order_date:E.order_date,expected_date:E.expected_date||null,notes:E.notes||null,created_by:t==null?void 0:t.id};console.log("Purchase data being inserted:",Ge),console.log("is_interstate value:",Ge.is_interstate,"type:",typeof Ge.is_interstate);const{data:Pe,error:Ze}=await T.from("purchases").insert([Ge]).select().single();if(Ze)throw Ze;const Zn=D.map(fe=>({...fe,purchase_id:Pe.id})),{error:Ie}=await T.from("purchase_items").insert(Zn);if(Ie)throw Ie;k(!1),R({supplier_id:"",order_date:new Date().toISOString().split("T")[0],expected_date:"",notes:""}),I([]),$()}catch(q){console.error("Error creating purchase:",q),alert("Error creating purchase: "+q.message)}},le=async O=>{if(confirm("Mark this purchase as received? This will update inventory."))try{const{data:q,error:X}=await T.from("purchase_items").select("product_id, quantity").eq("purchase_id",O);if(X)throw X;for(const C of q||[]){const{data:L}=await T.from("products").select("quantity").eq("id",C.product_id).single();if(L){const z=L.quantity+C.quantity;await T.from("products").update({quantity:z}).eq("id",C.product_id);const G=r.find(J=>J.id===O);await T.from("inventory_movements").insert([{product_id:C.product_id,type:"in",quantity:C.quantity,reason:`Purchase ${G==null?void 0:G.purchase_number} received`,created_by:t==null?void 0:t.id}])}}const{error:me}=await T.from("purchases").update({status:"received",received_date:new Date().toISOString().split("T")[0]}).eq("id",O);if(me)throw me;$()}catch(q){console.error("Error marking received:",q),alert("Error marking received: "+q.message)}},Ot=async O=>{if(O.preventDefault(),!!f)try{const q=parseFloat(K.amount),X=f.total-f.amount_paid;if(q<=0){alert("Payment amount must be greater than 0");return}if(q>X){alert(`Payment amount cannot exceed remaining balance of ${V(X)}`);return}const{error:me}=await T.from("purchase_payments").insert([{purchase_id:f.id,amount:q,payment_date:K.payment_date,payment_method_id:K.payment_method_id||null,reference_number:K.reference_number||null,notes:K.notes||null,created_by:t==null?void 0:t.id}]);if(me)throw me;const C=f.amount_paid+q,L=C>=f.total?"paid":C>0?"partial":"unpaid",{error:z}=await T.from("purchases").update({amount_paid:C,payment_status:L}).eq("id",f.id);if(z)throw z;const{error:G}=await T.from("transactions").insert([{type:"expense",category:"Inventory Purchase",amount:q,description:`Payment for Purchase ${f.purchase_number}`,transaction_date:K.payment_date,payment_method_id:K.payment_method_id||null,reference_number:K.reference_number||null,created_by:t==null?void 0:t.id}]);if(G)throw G;m(!1),y(null),S({amount:"",payment_date:new Date().toISOString().split("T")[0],payment_method_id:"",reference_number:"",notes:""}),$()}catch(q){console.error("Error adding payment:",q),alert("Error adding payment: "+q.message)}},yt=async O=>{if(confirm("Are you sure you want to delete this purchase?"))try{const{error:q}=await T.from("purchases").delete().eq("id",O);if(q)throw q;$()}catch(q){console.error("Error deleting purchase:",q),alert("Error deleting purchase: "+q.message)}},Zt=O=>{switch(O.status){case"ordered":return i.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-700",children:[i.jsx(Es,{className:"w-3 h-3"}),"Ordered"]});case"received":return i.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-700",children:[i.jsx(_a,{className:"w-3 h-3"}),"Received"]});case"cancelled":return i.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-red-100 text-red-700",children:[i.jsx(Jl,{className:"w-3 h-3"}),"Cancelled"]});default:return null}},lt=O=>{switch(O.payment_status){case"unpaid":return i.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-orange-100 text-orange-700",children:[i.jsx(Es,{className:"w-3 h-3"}),"Unpaid"]});case"partial":return i.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-yellow-100 text-yellow-700",children:[i.jsx(Es,{className:"w-3 h-3"}),"Partial"]});case"paid":return i.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-700",children:[i.jsx(_a,{className:"w-3 h-3"}),"Paid"]});default:return null}},Lt=r.filter(O=>{var me;const q=O.purchase_number.toLowerCase().includes(d.toLowerCase())||((me=O.supplier)==null?void 0:me.name.toLowerCase().includes(d.toLowerCase()));let X=!0;if(v!=="all"){const C=new Date(O.order_date),L=new Date;switch(L.setHours(0,0,0,0),v){case"today":const z=new Date(L);z.setHours(23,59,59,999),X=C>=L&&C<=z;break;case"week":const G=new Date(L);G.setDate(L.getDate()-7),X=C>=G;break;case"month":const J=new Date(L);J.setMonth(L.getMonth()-1),X=C>=J;break;case"year":const ne=new Date(L);ne.setFullYear(L.getFullYear()-1),X=C>=ne;break}}return e==="payables"?q&&X&&O.payment_status!=="paid":q&&X}),oi=r.filter(O=>O.payment_status!=="paid").reduce((O,q)=>O+(q.total-q.amount_paid),0);return c?i.jsx("div",{className:"text-center py-8",children:"Loading purchases..."}):i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-start sm:items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-slate-900",children:"Purchase Management"}),i.jsx("p",{className:"text-slate-600 mt-1",children:"Manage purchase orders and supplier payments"})]}),i.jsxs("button",{onClick:()=>k(!0),className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-lg transition flex items-center gap-2 shadow-sm",children:[i.jsx(_n,{className:"w-5 h-5"}),"New Purchase Order"]})]}),i.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200",children:[i.jsx("div",{className:"border-b border-slate-200",children:i.jsxs("div",{className:"flex",children:[i.jsx("button",{onClick:()=>n("orders"),className:`flex-1 px-6 py-4 text-sm font-medium transition ${e==="orders"?"text-blue-600 border-b-2 border-blue-600":"text-slate-600 hover:text-slate-900"}`,children:i.jsxs("div",{className:"flex items-center justify-center gap-2",children:[i.jsx(Na,{className:"w-5 h-5"}),"Purchase Orders"]})}),i.jsx("button",{onClick:()=>n("payables"),className:`flex-1 px-6 py-4 text-sm font-medium transition ${e==="payables"?"text-blue-600 border-b-2 border-blue-600":"text-slate-600 hover:text-slate-900"}`,children:i.jsxs("div",{className:"flex items-center justify-center gap-2",children:[i.jsx(_0,{className:"w-5 h-5"}),"Payment Payables",oi>0&&i.jsx("span",{className:"ml-2 px-2 py-0.5 bg-orange-100 text-orange-700 text-xs font-semibold rounded-full",children:V(oi)})]})})]})}),i.jsxs("div",{className:"p-6",children:[i.jsxs("div",{className:"mb-6 flex flex-col sm:flex-row gap-4",children:[i.jsxs("div",{className:"relative flex-1",children:[i.jsx(jn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400 w-5 h-5"}),i.jsx("input",{type:"text",placeholder:`Search ${e==="orders"?"purchase orders":"payables"}...`,value:d,onChange:O=>p(O.target.value),className:"w-full pl-10 pr-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none"})]}),i.jsx("div",{className:"sm:w-48",children:i.jsxs("select",{value:v,onChange:O=>x(O.target.value),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none bg-white",children:[i.jsx("option",{value:"all",children:"All Time"}),i.jsx("option",{value:"today",children:"Today"}),i.jsx("option",{value:"week",children:"Last 7 Days"}),i.jsx("option",{value:"month",children:"Last Month"}),i.jsx("option",{value:"year",children:"Last Year"})]})})]}),Lt.length===0?i.jsxs("div",{className:"text-center py-12 text-slate-500",children:[i.jsx(Na,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),i.jsxs("p",{children:["No ",e==="orders"?"purchase orders":"payables"," found"]})]}):i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full",children:[i.jsx("thead",{className:"bg-slate-50 border-b border-slate-200",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-600 uppercase tracking-wider",children:"Purchase #"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-600 uppercase tracking-wider",children:"Supplier"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-600 uppercase tracking-wider",children:"Date"}),i.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-slate-600 uppercase tracking-wider",children:"Total"}),e==="payables"&&i.jsxs(i.Fragment,{children:[i.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-slate-600 uppercase tracking-wider",children:"Paid"}),i.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-slate-600 uppercase tracking-wider",children:"Balance"})]}),i.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-slate-600 uppercase tracking-wider",children:"Status"}),e==="payables"&&i.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-slate-600 uppercase tracking-wider",children:"Payment"}),i.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-slate-600 uppercase tracking-wider",children:"Actions"})]})}),i.jsx("tbody",{className:"divide-y divide-slate-200",children:Lt.map(O=>{var X;const q=O.total-O.amount_paid;return i.jsxs("tr",{className:"hover:bg-slate-50 transition",children:[i.jsx("td",{className:"px-4 py-3 text-sm font-medium text-slate-900",children:O.purchase_number}),i.jsx("td",{className:"px-4 py-3 text-sm text-slate-900",children:(X=O.supplier)==null?void 0:X.name}),i.jsx("td",{className:"px-4 py-3 text-sm text-slate-900",children:new Date(O.order_date).toLocaleDateString("en-IN")}),i.jsx("td",{className:"px-4 py-3 text-sm text-slate-900 text-right",children:V(O.total)}),e==="payables"&&i.jsxs(i.Fragment,{children:[i.jsx("td",{className:"px-4 py-3 text-sm text-green-600 text-right",children:V(O.amount_paid)}),i.jsx("td",{className:"px-4 py-3 text-sm font-semibold text-orange-600 text-right",children:V(q)})]}),i.jsx("td",{className:"px-4 py-3 text-center",children:i.jsxs("div",{className:"flex flex-col gap-1 items-center",children:[Zt(O),e==="orders"&&lt(O)]})}),e==="payables"&&i.jsx("td",{className:"px-4 py-3 text-center",children:lt(O)}),i.jsx("td",{className:"px-4 py-3 text-right",children:i.jsxs("div",{className:"flex gap-2 justify-end",children:[e==="payables"&&i.jsx("button",{onClick:()=>{y(O),S({amount:q.toString(),payment_date:new Date().toISOString().split("T")[0],payment_method_id:"",reference_number:"",notes:""}),m(!0)},className:"px-3 py-1.5 bg-blue-600 hover:bg-blue-700 text-white text-sm font-medium rounded-lg transition",children:"Add Payment"}),O.status==="ordered"&&e==="orders"&&i.jsx("button",{onClick:()=>le(O.id),className:"px-3 py-1.5 bg-green-600 hover:bg-green-700 text-white text-sm font-medium rounded-lg transition",children:"Mark Received"}),i.jsx("button",{onClick:()=>yt(O.id),className:"p-2 text-slate-600 hover:text-red-600 hover:bg-red-50 rounded-lg transition",children:i.jsx(Jt,{className:"w-4 h-4"})})]})})]},O.id)})})]})})]})]}),b&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4 overflow-y-auto",children:i.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-6xl w-full my-8",children:[i.jsxs("div",{className:"p-6 border-b border-slate-200",children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-900",children:"Create Purchase Order"}),i.jsx("p",{className:"text-sm text-slate-600 mt-1",children:"Add raw materials manually to this purchase order"})]}),i.jsxs("form",{onSubmit:te,className:"p-6 space-y-6",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Supplier *"}),i.jsxs("select",{value:E.supplier_id,onChange:O=>R({...E,supplier_id:O.target.value}),required:!0,className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none",children:[i.jsx("option",{value:"",children:"Select Supplier"}),a.map(O=>i.jsx("option",{value:O.id,children:O.name},O.id))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Order Date *"}),i.jsx("input",{type:"date",value:E.order_date,onChange:O=>R({...E,order_date:O.target.value}),required:!0,className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Expected Date"}),i.jsx("input",{type:"date",value:E.expected_date,onChange:O=>R({...E,expected_date:O.target.value}),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none"})]})]}),i.jsxs("div",{className:"border-t border-slate-200 pt-6",children:[i.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-4",children:"Add Raw Material"}),i.jsx("div",{className:"bg-slate-50 p-4 rounded-lg space-y-4",children:i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Product Name *"}),i.jsx("input",{type:"text",value:U.product_name,onChange:O=>se({...U,product_name:O.target.value}),placeholder:"e.g., Cotton Fabric",className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"SKU *"}),i.jsx("input",{type:"text",value:U.sku,onChange:O=>se({...U,sku:O.target.value}),placeholder:"e.g., FAB001",className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"HSN Code"}),i.jsx("input",{type:"text",value:U.hsn_code,onChange:O=>se({...U,hsn_code:O.target.value}),placeholder:"e.g., 5208",className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Quantity *"}),i.jsx("input",{type:"number",step:"0.01",value:U.quantity,onChange:O=>se({...U,quantity:O.target.value}),placeholder:"e.g., 100",className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Unit *"}),i.jsxs("select",{value:U.unit,onChange:O=>se({...U,unit:O.target.value}),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none",children:[i.jsx("option",{value:"piece",children:"Piece"}),i.jsx("option",{value:"kg",children:"Kilogram (kg)"}),i.jsx("option",{value:"gram",children:"Gram (g)"}),i.jsx("option",{value:"meter",children:"Meter (m)"}),i.jsx("option",{value:"centimeter",children:"Centimeter (cm)"}),i.jsx("option",{value:"liter",children:"Liter (L)"}),i.jsx("option",{value:"milliliter",children:"Milliliter (ml)"}),i.jsx("option",{value:"box",children:"Box"}),i.jsx("option",{value:"packet",children:"Packet"}),i.jsx("option",{value:"dozen",children:"Dozen"}),i.jsx("option",{value:"set",children:"Set"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Unit Price *"}),i.jsx("input",{type:"number",step:"0.01",value:U.unit_price,onChange:O=>se({...U,unit_price:O.target.value}),placeholder:"e.g., 50.00",className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"GST Rate (%)"}),i.jsxs("select",{value:U.gst_rate,onChange:O=>se({...U,gst_rate:O.target.value}),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none",children:[i.jsx("option",{value:"0",children:"0%"}),i.jsx("option",{value:"5",children:"5%"}),i.jsx("option",{value:"12",children:"12%"}),i.jsx("option",{value:"18",children:"18%"}),i.jsx("option",{value:"28",children:"28%"})]})]}),i.jsx("div",{className:"flex items-end",children:i.jsxs("button",{type:"button",onClick:he,className:"w-full px-4 py-2 bg-green-600 hover:bg-green-700 text-white font-medium rounded-lg transition flex items-center justify-center gap-2",children:[i.jsx(_n,{className:"w-5 h-5"}),"Add Item"]})})]})})]}),N.length>0&&i.jsxs("div",{className:"border border-slate-200 rounded-lg overflow-hidden",children:[i.jsx("div",{className:"bg-slate-100 px-4 py-2 border-b border-slate-200",children:i.jsxs("h4",{className:"font-semibold text-slate-900",children:["Purchase Items (",N.length,")"]})}),i.jsxs("table",{className:"w-full",children:[i.jsx("thead",{className:"bg-slate-50",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-slate-600",children:"Product"}),i.jsx("th",{className:"px-4 py-2 text-center text-xs font-medium text-slate-600",children:"Quantity"}),i.jsx("th",{className:"px-4 py-2 text-right text-xs font-medium text-slate-600",children:"Unit Price"}),i.jsx("th",{className:"px-4 py-2 text-right text-xs font-medium text-slate-600",children:"GST"}),i.jsx("th",{className:"px-4 py-2 text-right text-xs font-medium text-slate-600",children:"Total"}),i.jsx("th",{className:"px-4 py-2"})]})}),i.jsx("tbody",{className:"divide-y divide-slate-200",children:N.map(O=>{const q=O.quantity*O.unit_price,X=q+q*O.gst_rate/100;return i.jsxs("tr",{children:[i.jsxs("td",{className:"px-4 py-2 text-sm",children:[i.jsx("div",{className:"font-medium",children:O.product_name}),i.jsxs("div",{className:"text-xs text-slate-500",children:[O.sku," - ",O.unit]})]}),i.jsx("td",{className:"px-4 py-2",children:i.jsxs("div",{className:"flex items-center gap-2 justify-center",children:[i.jsx("input",{type:"number",step:"0.01",min:"0.01",value:O.quantity,onChange:me=>B(O.temp_id,parseFloat(me.target.value)),className:"w-20 px-2 py-1 border border-slate-300 rounded text-center"}),i.jsx("span",{className:"text-xs text-slate-500",children:O.unit})]})}),i.jsx("td",{className:"px-4 py-2",children:i.jsxs("div",{className:"flex items-center gap-1 justify-end",children:[i.jsx("input",{type:"number",step:"0.01",min:"0",value:O.unit_price,onChange:me=>H(O.temp_id,parseFloat(me.target.value)),className:"w-24 px-2 py-1 border border-slate-300 rounded text-right"}),i.jsxs("span",{className:"text-xs text-slate-500",children:["/",O.unit]})]})}),i.jsxs("td",{className:"px-4 py-2 text-sm text-right text-slate-600",children:[O.gst_rate,"%"]}),i.jsx("td",{className:"px-4 py-2 text-sm text-right font-medium",children:V(X)}),i.jsx("td",{className:"px-4 py-2",children:i.jsx("button",{type:"button",onClick:()=>P(O.temp_id),className:"text-red-600 hover:text-red-700",children:i.jsx(Jt,{className:"w-4 h-4"})})})]},O.temp_id)})})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Notes"}),i.jsx("textarea",{value:E.notes,onChange:O=>R({...E,notes:O.target.value}),rows:3,placeholder:"Additional notes about this purchase...",className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none"})]}),i.jsxs("div",{className:"flex gap-3 pt-4",children:[i.jsx("button",{type:"submit",disabled:N.length===0,className:"flex-1 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-lg transition disabled:bg-slate-300 disabled:cursor-not-allowed",children:"Create Purchase Order"}),i.jsx("button",{type:"button",onClick:()=>{k(!1),I([])},className:"flex-1 px-4 py-2 bg-slate-200 hover:bg-slate-300 text-slate-700 font-medium rounded-lg transition",children:"Cancel"})]})]})]})}),g&&f&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:i.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-2xl w-full",children:[i.jsxs("div",{className:"p-6 border-b border-slate-200",children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-900",children:"Record Payment"}),i.jsxs("div",{className:"mt-2 text-sm text-slate-600",children:[i.jsxs("p",{children:["Purchase Order: ",i.jsx("span",{className:"font-medium",children:f.purchase_number})]}),i.jsxs("p",{children:["Supplier: ",i.jsx("span",{className:"font-medium",children:(li=f.supplier)==null?void 0:li.name})]}),i.jsxs("p",{className:"mt-2",children:["Total: ",i.jsx("span",{className:"font-semibold",children:V(f.total)})," | Paid: ",i.jsx("span",{className:"font-semibold text-green-600",children:V(f.amount_paid)})," | Balance: ",i.jsx("span",{className:"font-semibold text-orange-600",children:V(f.total-f.amount_paid)})]})]})]}),i.jsxs("form",{onSubmit:Ot,className:"p-6 space-y-4",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Payment Amount *"}),i.jsx("input",{type:"number",step:"0.01",value:K.amount,onChange:O=>S({...K,amount:O.target.value}),required:!0,max:f.total-f.amount_paid,placeholder:"0.00",className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Payment Date *"}),i.jsx("input",{type:"date",value:K.payment_date,onChange:O=>S({...K,payment_date:O.target.value}),required:!0,className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none"})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Payment Method"}),i.jsxs("select",{value:K.payment_method_id,onChange:O=>S({...K,payment_method_id:O.target.value}),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none",children:[i.jsx("option",{value:"",children:"Select Method"}),l.map(O=>i.jsx("option",{value:O.id,children:O.name},O.id))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Reference Number"}),i.jsx("input",{type:"text",value:K.reference_number,onChange:O=>S({...K,reference_number:O.target.value}),placeholder:"Transaction ID, Cheque No, etc.",className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Notes"}),i.jsx("textarea",{value:K.notes,onChange:O=>S({...K,notes:O.target.value}),rows:3,placeholder:"Additional payment notes...",className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none"})]}),i.jsxs("div",{className:"flex gap-3 pt-4",children:[i.jsx("button",{type:"submit",className:"flex-1 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-lg transition",children:"Record Payment"}),i.jsx("button",{type:"button",onClick:()=>{m(!1),y(null)},className:"flex-1 px-4 py-2 bg-slate-200 hover:bg-slate-300 text-slate-700 font-medium rounded-lg transition",children:"Cancel"})]})]})]})})]})}function zk(){const{user:t}=vt(),[e,n]=j.useState(!1),[r,s]=j.useState(null),[a,o]=j.useState({newEmail:""}),[l,u]=j.useState({newPassword:"",confirmPassword:""}),c=async d=>{d.preventDefault(),n(!0),s(null);try{if(!a.newEmail)throw new Error("Please enter a new email address");const{error:p}=await T.auth.updateUser({email:a.newEmail});if(p)throw p;s({type:"success",text:"Email updated successfully! Please check your new email for confirmation."}),o({newEmail:""})}catch(p){s({type:"error",text:p.message})}finally{n(!1)}},h=async d=>{d.preventDefault(),n(!0),s(null);try{if(!l.newPassword||!l.confirmPassword)throw new Error("Please fill in all password fields");if(l.newPassword.length<6)throw new Error("Password must be at least 6 characters long");if(l.newPassword!==l.confirmPassword)throw new Error("Passwords do not match");const{error:p}=await T.auth.updateUser({password:l.newPassword});if(p)throw p;s({type:"success",text:"Password updated successfully!"}),u({newPassword:"",confirmPassword:""})}catch(p){s({type:"error",text:p.message})}finally{n(!1)}};return i.jsxs("div",{className:"p-6",children:[i.jsxs("div",{className:"mb-8",children:[i.jsxs("h1",{className:"text-3xl font-bold text-gray-900 flex items-center gap-2",children:[i.jsx(Sa,{className:"w-8 h-8"}),"Manage Profile"]}),i.jsx("p",{className:"text-gray-600 mt-2",children:"Update your account settings"})]}),r&&i.jsx("div",{className:`mb-6 p-4 rounded-lg ${r.type==="success"?"bg-green-50 text-green-800 border border-green-200":"bg-red-50 text-red-800 border border-red-200"}`,children:r.text}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[i.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[i.jsx(Sa,{className:"w-5 h-5 text-gray-600"}),i.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Current Information"})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Current Email"}),i.jsx("div",{className:"px-4 py-2 bg-gray-50 rounded-lg border border-gray-200 text-gray-700",children:(t==null?void 0:t.email)||"Not available"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"User ID"}),i.jsx("div",{className:"px-4 py-2 bg-gray-50 rounded-lg border border-gray-200 text-gray-700 text-sm font-mono break-all",children:(t==null?void 0:t.id)||"Not available"})]})]})]}),i.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[i.jsx(ka,{className:"w-5 h-5 text-gray-600"}),i.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Change Email"})]}),i.jsxs("form",{onSubmit:c,className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"New Email Address"}),i.jsx("input",{type:"email",value:a.newEmail,onChange:d=>o({newEmail:d.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter new email",disabled:e})]}),i.jsxs("button",{type:"submit",disabled:e,className:"w-full flex items-center justify-center gap-2 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 disabled:bg-gray-400 transition-colors",children:[i.jsx(tu,{className:"w-4 h-4"}),e?"Updating...":"Update Email"]})]})]}),i.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 lg:col-span-2",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[i.jsx(r1,{className:"w-5 h-5 text-gray-600"}),i.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Change Password"})]}),i.jsxs("form",{onSubmit:h,className:"max-w-xl space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"New Password"}),i.jsx("input",{type:"password",value:l.newPassword,onChange:d=>u({...l,newPassword:d.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter new password",disabled:e})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Confirm New Password"}),i.jsx("input",{type:"password",value:l.confirmPassword,onChange:d=>u({...l,confirmPassword:d.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Confirm new password",disabled:e})]}),i.jsxs("button",{type:"submit",disabled:e,className:"flex items-center justify-center gap-2 bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 disabled:bg-gray-400 transition-colors",children:[i.jsx(tu,{className:"w-4 h-4"}),e?"Updating...":"Update Password"]})]})]})]})]})}function Bk(){const{profile:t}=vt(),[e,n]=j.useState([]),[r,s]=j.useState(!0),[a,o]=j.useState(!1),[l,u]=j.useState(null),[c,h]=j.useState(!1),[d,p]=j.useState(!1),[v,x]=j.useState(null),[b,k]=j.useState(""),[g,m]=j.useState(!1),[f,y]=j.useState(null),[_,w]=j.useState({email:"",full_name:"",role:"sales_person",phone:"",password:"",is_active:!0});j.useEffect(()=>{N()},[]);const N=async()=>{try{const{data:$,error:F}=await T.from("employees").select("*").order("created_at",{ascending:!1});if(F)throw F;n($||[])}catch($){console.error("Error loading employees:",$),y({type:"error",text:"Failed to load employees"})}finally{s(!1)}},I=async $=>{$.preventDefault(),s(!0),y(null);try{if(l){const{error:F}=await T.from("employees").update({full_name:_.full_name,role:_.role,phone:_.phone,is_active:_.is_active,updated_at:new Date().toISOString()}).eq("id",l.id);if(F)throw F;y({type:"success",text:"Employee updated successfully"})}else{if(!_.password)throw new Error("Password is required for new employees");const{data:{session:F}}=await T.auth.getSession(),he=F,{data:P,error:B}=await T.auth.signUp({email:_.email,password:_.password});if(B)throw B;if(P.user){const{error:H}=await T.from("profiles").insert({id:P.user.id,email:_.email,full_name:_.full_name,role:_.role});if(H)throw H;const{error:te}=await T.from("employees").insert({id:P.user.id,email:_.email,full_name:_.full_name,role:_.role,phone:_.phone,is_active:_.is_active,created_by:t==null?void 0:t.id});if(te)throw te;he&&await T.auth.setSession({access_token:he.access_token,refresh_token:he.refresh_token})}y({type:"success",text:"Employee created successfully"})}await N(),K()}catch(F){console.error("Error saving employee:",F),y({type:"error",text:F.message||"Failed to save employee"})}finally{s(!1)}},E=async $=>{if(confirm("Are you sure you want to delete this employee?"))try{const{error:F}=await T.from("employees").delete().eq("id",$);if(F)throw F;y({type:"success",text:"Employee deleted successfully"}),await N()}catch(F){console.error("Error deleting employee:",F),y({type:"error",text:F.message||"Failed to delete employee"})}},R=$=>{x($),k(""),p(!0)},U=async $=>{if($.preventDefault(),!!v){s(!0),y(null);try{const{data:{session:F}}=await T.auth.getSession(),he=await fetch("https://ftjukgofugzoxhvqhrez.supabase.co/functions/v1/change-employee-password",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${F==null?void 0:F.access_token}`},body:JSON.stringify({userId:v.id,newPassword:b})}),P=await he.json();if(!he.ok||!P.success)throw new Error(P.error||"Failed to change password");y({type:"success",text:"Password changed successfully"}),p(!1),x(null),k("")}catch(F){console.error("Error changing password:",F),y({type:"error",text:F.message||"Failed to change password"})}finally{s(!1)}}},se=$=>{u($),w({email:$.email,full_name:$.full_name,role:$.role,phone:$.phone,password:"",is_active:$.is_active}),o(!0)},K=()=>{o(!1),u(null),w({email:"",full_name:"",role:"sales_person",phone:"",password:"",is_active:!0}),h(!1)},S=$=>({admin:"Admin",sales_person:"Sales Person",inventory_person:"Inventory Person",purchase_person:"Purchase Person"})[$]||$;return(t==null?void 0:t.role)!=="admin"?i.jsx("div",{className:"p-6",children:i.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:i.jsx("p",{className:"text-red-800",children:"You do not have permission to access this page."})})}):i.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[i.jsxs("div",{className:"flex justify-between items-center mb-6",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-slate-900",children:"Employees"}),i.jsx("p",{className:"text-slate-600 mt-1",children:"Manage employee accounts and access"})]}),i.jsxs("button",{onClick:()=>o(!0),className:"flex items-center gap-2 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:[i.jsx(_n,{className:"w-5 h-5"}),"Add Employee"]})]}),f&&i.jsx("div",{className:`mb-4 p-4 rounded-lg ${f.type==="success"?"bg-green-50 text-green-800":"bg-red-50 text-red-800"}`,children:f.text}),r&&!a?i.jsx("div",{className:"text-center py-12",children:i.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):i.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-slate-200 overflow-hidden",children:i.jsxs("table",{className:"min-w-full divide-y divide-slate-200",children:[i.jsx("thead",{className:"bg-slate-50",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Name"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Email"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Role"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Phone"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Status"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Actions"})]})}),i.jsx("tbody",{className:"bg-white divide-y divide-slate-200",children:e.length===0?i.jsx("tr",{children:i.jsxs("td",{colSpan:6,className:"px-6 py-12 text-center text-slate-500",children:[i.jsx(Ea,{className:"w-12 h-12 mx-auto mb-4 text-slate-300"}),i.jsx("p",{children:"No employees found. Add your first employee to get started."})]})}):e.map($=>i.jsxs("tr",{className:"hover:bg-slate-50",children:[i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsx("div",{className:"font-medium text-slate-900",children:$.full_name})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-slate-600",children:$.email}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsx("span",{className:"px-2 py-1 text-xs font-medium bg-blue-100 text-blue-800 rounded",children:S($.role)})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-slate-600",children:$.phone||"-"}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded ${$.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:$.is_active?"Active":"Inactive"})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{onClick:()=>se($),className:"text-blue-600 hover:text-blue-800",title:"Edit employee",children:i.jsx(l1,{className:"w-4 h-4"})}),i.jsx("button",{onClick:()=>R($),className:"text-green-600 hover:text-green-800",title:"Change password",children:i.jsx(t1,{className:"w-4 h-4"})}),i.jsx("button",{onClick:()=>E($.id),className:"text-red-600 hover:text-red-800",title:"Delete employee",children:i.jsx(Jt,{className:"w-4 h-4"})})]})})]},$.id))})]})}),d&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:i.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full",children:[i.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-slate-200",children:[i.jsx("h2",{className:"text-xl font-semibold text-slate-900",children:"Change Password"}),i.jsx("button",{onClick:()=>{p(!1),x(null),k(""),m(!1)},className:"text-slate-400 hover:text-slate-600",children:i.jsx(Ws,{className:"w-6 h-6"})})]}),i.jsxs("form",{onSubmit:U,className:"p-6 space-y-4",children:[i.jsx("div",{children:i.jsxs("p",{className:"text-sm text-slate-600 mb-4",children:["Changing password for: ",i.jsx("span",{className:"font-medium text-slate-900",children:v==null?void 0:v.full_name})]})}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"New Password *"}),i.jsxs("div",{className:"relative",children:[i.jsx("input",{type:g?"text":"password",required:!0,minLength:6,value:b,onChange:$=>k($.target.value),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter new password (min. 6 characters)"}),i.jsx("button",{type:"button",onClick:()=>m(!g),className:"absolute right-3 top-1/2 -translate-y-1/2 text-slate-400 hover:text-slate-600",children:g?i.jsx(vh,{className:"w-5 h-5"}):i.jsx(Zl,{className:"w-5 h-5"})})]})]}),i.jsxs("div",{className:"flex gap-3 pt-4",children:[i.jsx("button",{type:"button",onClick:()=>{p(!1),x(null),k(""),m(!1)},className:"flex-1 px-4 py-2 border border-slate-300 text-slate-700 rounded-lg hover:bg-slate-50 transition-colors",children:"Cancel"}),i.jsx("button",{type:"submit",disabled:r||b.length<6,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:bg-blue-400",children:r?"Changing...":"Change Password"})]})]})]})}),a&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:i.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full",children:[i.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-slate-200",children:[i.jsx("h2",{className:"text-xl font-semibold text-slate-900",children:l?"Edit Employee":"Add New Employee"}),i.jsx("button",{onClick:K,className:"text-slate-400 hover:text-slate-600",children:i.jsx(Ws,{className:"w-6 h-6"})})]}),i.jsxs("form",{onSubmit:I,className:"p-6 space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Full Name *"}),i.jsx("input",{type:"text",required:!0,value:_.full_name,onChange:$=>w({..._,full_name:$.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Email *"}),i.jsx("input",{type:"email",required:!0,disabled:!!l,value:_.email,onChange:$=>w({..._,email:$.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:bg-slate-100"})]}),!l&&i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Password *"}),i.jsxs("div",{className:"relative",children:[i.jsx("input",{type:c?"text":"password",required:!0,value:_.password,onChange:$=>w({..._,password:$.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),i.jsx("button",{type:"button",onClick:()=>h(!c),className:"absolute right-3 top-1/2 -translate-y-1/2 text-slate-400 hover:text-slate-600",children:c?i.jsx(vh,{className:"w-5 h-5"}):i.jsx(Zl,{className:"w-5 h-5"})})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Role *"}),i.jsxs("select",{required:!0,value:_.role,onChange:$=>w({..._,role:$.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[i.jsx("option",{value:"admin",children:"Admin"}),i.jsx("option",{value:"sales_person",children:"Sales Person"}),i.jsx("option",{value:"inventory_person",children:"Inventory Person"}),i.jsx("option",{value:"purchase_person",children:"Purchase Person"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Phone"}),i.jsx("input",{type:"tel",value:_.phone,onChange:$=>w({..._,phone:$.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("input",{type:"checkbox",id:"is_active",checked:_.is_active,onChange:$=>w({..._,is_active:$.target.checked}),className:"w-4 h-4 text-blue-600 border-slate-300 rounded focus:ring-blue-500"}),i.jsx("label",{htmlFor:"is_active",className:"text-sm font-medium text-slate-700",children:"Active"})]}),i.jsxs("div",{className:"flex gap-3 pt-4",children:[i.jsx("button",{type:"button",onClick:K,className:"flex-1 px-4 py-2 border border-slate-300 text-slate-700 rounded-lg hover:bg-slate-50 transition-colors",children:"Cancel"}),i.jsx("button",{type:"submit",disabled:r,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:bg-blue-400",children:r?"Saving...":l?"Update":"Create"})]})]})]})})]})}function Fk(){const[t,e]=j.useState(!0),[n,r]=j.useState(null),[s,a]=j.useState(null),[o,l]=j.useState(null);j.useEffect(()=>{const d=new URLSearchParams(window.location.search).get("id");if(!d){l("Invoice ID is missing"),e(!1);return}u(d)},[]),j.useEffect(()=>{const h=document.createElement("style");return h.innerHTML=`
      @media print {
        body * {
          visibility: hidden;
        }
        #invoice-content, #invoice-content * {
          visibility: visible;
        }
        #invoice-content {
          position: absolute;
          left: 0;
          top: 0;
          width: 210mm;
        }
        .print\\:hidden {
          display: none !important;
        }
        @page {
          size: A4;
          margin: 0;
        }
      }
    `,document.head.appendChild(h),()=>{document.head.removeChild(h)}},[]);const u=async h=>{try{const[d,p]=await Promise.all([T.from("invoices").select(`
            *,
            customer:customers(*)
          `).eq("id",h).maybeSingle(),T.from("invoice_items").select(`
            *,
            product:products(*)
          `).eq("invoice_id",h)]);if(d.error)throw d.error;if(p.error)throw p.error;if(!d.data){l("Invoice not found"),e(!1);return}const v={...d.data,items:p.data||[]};r(v);const x=await T.from("company_profile").select("*").eq("user_id",v.created_by).maybeSingle();!x.error&&x.data&&a(x.data)}catch(d){console.error("Error loading invoice:",d),l("Failed to load invoice")}finally{e(!1)}},c=()=>{window.print()};return t?i.jsx("div",{className:"min-h-screen flex items-center justify-center bg-slate-50",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"inline-block animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mb-4"}),i.jsx("p",{className:"text-slate-600",children:"Loading invoice..."})]})}):o||!n?i.jsx("div",{className:"min-h-screen flex items-center justify-center bg-slate-50",children:i.jsx("div",{className:"text-center",children:i.jsx("div",{className:"text-red-600 text-xl mb-4",children:o||"Invoice not found"})})}):i.jsx("div",{className:"min-h-screen bg-slate-50 py-8",children:i.jsxs("div",{className:"max-w-4xl mx-auto px-4",children:[i.jsx("div",{className:"bg-white rounded-lg shadow-lg mb-4 print:hidden",children:i.jsxs("div",{className:"p-4 flex gap-3 justify-center",children:[i.jsxs("button",{onClick:c,className:"flex items-center gap-2 px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition",children:[i.jsx(Cs,{className:"w-5 h-5"}),"Print Invoice"]}),i.jsxs("button",{onClick:c,className:"flex items-center gap-2 px-6 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 transition",children:[i.jsx(e1,{className:"w-5 h-5"}),"Download PDF"]})]})}),i.jsxs("div",{id:"invoice-content",className:"bg-white rounded-lg shadow-lg p-8",children:[i.jsx("div",{className:"border-b-2 border-slate-200 pb-6 mb-6",children:i.jsxs("div",{className:"flex justify-between items-start",children:[i.jsxs("div",{className:"flex items-start gap-6",children:[(s==null?void 0:s.logo_url)&&i.jsx("div",{className:"flex-shrink-0",children:i.jsx("img",{src:s.logo_url,alt:"Company Logo",className:"h-20 w-20 object-contain border-2 border-slate-200 rounded-lg p-2"})}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-slate-900 mb-2",children:(s==null?void 0:s.company_name)||"Company Name"}),i.jsxs("div",{className:"text-sm text-slate-600 space-y-1",children:[(s==null?void 0:s.address_line1)&&i.jsx("p",{children:s.address_line1}),(s==null?void 0:s.address_line2)&&i.jsx("p",{children:s.address_line2}),((s==null?void 0:s.city)||(s==null?void 0:s.state))&&i.jsx("p",{children:[s.city,s.state,s.postal_code].filter(Boolean).join(", ")}),(s==null?void 0:s.phone)&&i.jsxs("p",{children:["Phone: ",s.phone]}),(s==null?void 0:s.email)&&i.jsxs("p",{children:["Email: ",s.email]}),(s==null?void 0:s.gst_number)&&i.jsxs("p",{children:["GSTIN: ",s.gst_number]})]})]})]}),i.jsxs("div",{className:"text-right",children:[i.jsx("div",{className:"text-2xl font-bold text-blue-600 mb-2",children:"INVOICE"}),i.jsxs("div",{className:"text-sm space-y-1",children:[i.jsxs("p",{children:[i.jsx("span",{className:"font-semibold",children:"Invoice #:"})," ",n.invoice_number]}),i.jsxs("p",{children:[i.jsx("span",{className:"font-semibold",children:"Date:"})," ",new Date(n.invoice_date).toLocaleDateString("en-IN")]}),i.jsxs("p",{children:[i.jsx("span",{className:"font-semibold",children:"Due Date:"})," ",new Date(n.due_date).toLocaleDateString("en-IN")]})]})]})]})}),i.jsxs("div",{className:"mb-6",children:[i.jsx("h3",{className:"text-sm font-semibold text-slate-500 uppercase mb-2",children:"Bill To:"}),i.jsxs("div",{className:"text-slate-900",children:[i.jsx("p",{className:"font-semibold text-lg",children:n.customer.name}),n.customer.email&&i.jsx("p",{className:"text-sm",children:n.customer.email}),n.customer.phone&&i.jsx("p",{className:"text-sm",children:n.customer.phone}),n.customer.address&&i.jsx("p",{className:"text-sm",children:n.customer.address}),n.customer.gstin&&i.jsxs("p",{className:"text-sm",children:["GSTIN: ",n.customer.gstin]})]})]}),i.jsxs("table",{className:"w-full mb-6",children:[i.jsx("thead",{children:i.jsxs("tr",{className:"bg-slate-100 border-b-2 border-slate-300",children:[i.jsx("th",{className:"text-left p-3 font-semibold text-slate-700",children:"Item"}),i.jsx("th",{className:"text-right p-3 font-semibold text-slate-700",children:"Qty"}),i.jsx("th",{className:"text-right p-3 font-semibold text-slate-700",children:"Rate"}),i.jsx("th",{className:"text-right p-3 font-semibold text-slate-700",children:"Amount"})]})}),i.jsx("tbody",{children:n.items.map((h,d)=>i.jsxs("tr",{className:"border-b border-slate-200",children:[i.jsxs("td",{className:"p-3",children:[i.jsx("div",{className:"font-medium text-slate-900",children:h.product.name}),h.product.description&&i.jsx("div",{className:"text-sm text-slate-500",children:h.product.description})]}),i.jsx("td",{className:"text-right p-3 text-slate-700",children:h.quantity}),i.jsx("td",{className:"text-right p-3 text-slate-700",children:V(h.unit_price)}),i.jsx("td",{className:"text-right p-3 text-slate-900 font-medium",children:V(h.total_price)})]},d))})]}),i.jsx("div",{className:"flex justify-end mb-6",children:i.jsxs("div",{className:"w-64",children:[i.jsxs("div",{className:"flex justify-between py-2 text-slate-600",children:[i.jsx("span",{children:"Subtotal:"}),i.jsx("span",{children:V(n.subtotal)})]}),n.cgst_amount>0&&i.jsxs("div",{className:"flex justify-between py-2 text-slate-600",children:[i.jsxs("span",{children:["CGST (",n.tax_rate/2,"%):"]}),i.jsx("span",{children:V(n.cgst_amount)})]}),n.sgst_amount>0&&i.jsxs("div",{className:"flex justify-between py-2 text-slate-600",children:[i.jsxs("span",{children:["SGST (",n.tax_rate/2,"%):"]}),i.jsx("span",{children:V(n.sgst_amount)})]}),n.igst_amount>0&&i.jsxs("div",{className:"flex justify-between py-2 text-slate-600",children:[i.jsxs("span",{children:["IGST (",n.tax_rate,"%):"]}),i.jsx("span",{children:V(n.igst_amount)})]}),i.jsxs("div",{className:"flex justify-between py-3 border-t-2 border-slate-300 font-bold text-lg text-slate-900",children:[i.jsx("span",{children:"Total:"}),i.jsx("span",{children:V(n.total_amount)})]})]})}),(s==null?void 0:s.bank_name)&&i.jsxs("div",{className:"mb-6 p-4 bg-slate-50 rounded",children:[i.jsx("h3",{className:"font-semibold text-slate-900 mb-2",children:"Banking Details"}),i.jsxs("div",{className:"text-sm text-slate-600 space-y-1",children:[i.jsxs("p",{children:[i.jsx("span",{className:"font-medium",children:"Bank:"})," ",s.bank_name]}),s.account_number&&i.jsxs("p",{children:[i.jsx("span",{className:"font-medium",children:"Account Number:"})," ",s.account_number]}),s.ifsc_code&&i.jsxs("p",{children:[i.jsx("span",{className:"font-medium",children:"IFSC Code:"})," ",s.ifsc_code]})]})]}),(s==null?void 0:s.terms_conditions)&&i.jsxs("div",{className:"text-sm text-slate-600 border-t pt-4",children:[i.jsx("p",{className:"font-semibold mb-1",children:"Terms & Conditions:"}),i.jsx("p",{children:s.terms_conditions})]})]})]})})}function qk(){const{user:t,profile:e,loading:n}=vt();return window.location.pathname==="/invoice"||window.location.search.includes("id=")?i.jsx(Fk,{}):n?i.jsx("div",{className:"min-h-screen flex items-center justify-center bg-slate-50",children:i.jsx("div",{className:"text-slate-600 text-lg",children:"Loading..."})}):!t||!e?i.jsx(p1,{}):i.jsx(g1,{children:({currentView:r,setCurrentView:s})=>{switch(r){case"dashboard":return i.jsx(yh,{setCurrentView:s});case"inventory":return i.jsx(Tk,{});case"invoices":return i.jsx(Ak,{});case"customers":return i.jsx(Ik,{});case"accounting":return i.jsx(Rk,{});case"receivables":return i.jsx(Lk,{});case"suppliers":return i.jsx(Mk,{});case"purchases":return i.jsx(Uk,{});case"employees":return i.jsx(Bk,{});case"profile":return i.jsx(Dk,{});case"manage-profile":return i.jsx(zk,{});default:return i.jsx(yh,{setCurrentView:s})}}})}function Hk(){return i.jsx(Wy,{children:i.jsx(qk,{})})}Kp(document.getElementById("root")).render(i.jsx(j.StrictMode,{children:i.jsx(Hk,{})}));
